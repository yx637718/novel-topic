(window.webpackJsonp=window.webpackJsonp||[]).push([[32,9],{1e3:function(e,t){e.exports={}},1001:function(e,t,n){var a=n(895),o=n(920),r=n(921),i=n(1002);e.exports=function(e){var t=r(e),n=i[t];if("function"!=typeof n||!(t in a.prototype))return!1;if(e===n)return!0;var c=o(n);return!!c&&e===c[0]}},1002:function(e,t,n){var a=n(895),o=n(893),r=n(894),i=n(86),c=n(115),s=n(1003),l=Object.prototype.hasOwnProperty;function u(e){if(c(e)&&!i(e)&&!(e instanceof a)){if(e instanceof o)return e;if(l.call(e,"__wrapped__"))return s(e)}return new o(e)}u.prototype=r.prototype,u.prototype.constructor=u,e.exports=u},1003:function(e,t,n){var a=n(895),o=n(893),r=n(384);e.exports=function(e){if(e instanceof a)return e.clone();var t=new o(e.__wrapped__,e.__chain__);return t.__actions__=r(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}},1004:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var a=n(387),o=n(386),r=n(232),i=n(388);function c(e){return Object(a.a)(e)||Object(o.a)(e)||Object(r.a)(e)||Object(i.a)()}},1005:function(e,t,n){"use strict";
/** @license React v16.13.1
 * react-dom-server.browser.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a=n(78),o=n(1);function r(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i="function"==typeof Symbol&&Symbol.for,c=i?Symbol.for("react.portal"):60106,s=i?Symbol.for("react.fragment"):60107,l=i?Symbol.for("react.strict_mode"):60108,u=i?Symbol.for("react.profiler"):60114,d=i?Symbol.for("react.provider"):60109,p=i?Symbol.for("react.context"):60110,h=i?Symbol.for("react.concurrent_mode"):60111,f=i?Symbol.for("react.forward_ref"):60112,b=i?Symbol.for("react.suspense"):60113,m=i?Symbol.for("react.suspense_list"):60120,v=i?Symbol.for("react.memo"):60115,g=i?Symbol.for("react.lazy"):60116,O=i?Symbol.for("react.block"):60121,j=i?Symbol.for("react.fundamental"):60117,y=i?Symbol.for("react.scope"):60119;function C(e){if(null==e)return null;if("function"==typeof e)return e.displayName||e.name||null;if("string"==typeof e)return e;switch(e){case s:return"Fragment";case c:return"Portal";case u:return"Profiler";case l:return"StrictMode";case b:return"Suspense";case m:return"SuspenseList"}if("object"==typeof e)switch(e.$$typeof){case p:return"Context.Consumer";case d:return"Context.Provider";case f:var t=e.render;return t=t.displayName||t.name||"",e.displayName||(""!==t?"ForwardRef("+t+")":"ForwardRef");case v:return C(e.type);case O:return C(e.render);case g:if(e=1===e._status?e._result:null)return C(e)}return null}var k=o.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED;k.hasOwnProperty("ReactCurrentDispatcher")||(k.ReactCurrentDispatcher={current:null}),k.hasOwnProperty("ReactCurrentBatchConfig")||(k.ReactCurrentBatchConfig={suspense:null});var w={};function N(e,t){for(var n=0|e._threadCount;n<=t;n++)e[n]=e._currentValue2,e._threadCount=n+1}for(var S=new Uint16Array(16),x=0;15>x;x++)S[x]=x+1;S[15]=0;var T=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,I=Object.prototype.hasOwnProperty,E={},L={};function P(e){return!!I.call(L,e)||!I.call(E,e)&&(T.test(e)?L[e]=!0:(E[e]=!0,!1))}function A(e,t,n,a,o,r){this.acceptsBooleans=2===t||3===t||4===t,this.attributeName=a,this.attributeNamespace=o,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=r}var M={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){M[e]=new A(e,0,!1,e,null,!1)}),[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];M[t]=new A(t,1,!1,e[1],null,!1)}),["contentEditable","draggable","spellCheck","value"].forEach(function(e){M[e]=new A(e,2,!1,e.toLowerCase(),null,!1)}),["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){M[e]=new A(e,2,!1,e,null,!1)}),"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){M[e]=new A(e,3,!1,e.toLowerCase(),null,!1)}),["checked","multiple","muted","selected"].forEach(function(e){M[e]=new A(e,3,!0,e,null,!1)}),["capture","download"].forEach(function(e){M[e]=new A(e,4,!1,e,null,!1)}),["cols","rows","size","span"].forEach(function(e){M[e]=new A(e,6,!1,e,null,!1)}),["rowSpan","start"].forEach(function(e){M[e]=new A(e,5,!1,e.toLowerCase(),null,!1)});var R=/[\-:]([a-z])/g;function _(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(R,_);M[t]=new A(t,1,!1,e,null,!1)}),"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(R,_);M[t]=new A(t,1,!1,e,"http://www.w3.org/1999/xlink",!1)}),["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(R,_);M[t]=new A(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1)}),["tabIndex","crossOrigin"].forEach(function(e){M[e]=new A(e,1,!1,e.toLowerCase(),null,!1)}),M.xlinkHref=new A("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0),["src","href","action","formAction"].forEach(function(e){M[e]=new A(e,1,!1,e.toLowerCase(),null,!0)});var z=/["'&<>]/;function B(e){if("boolean"==typeof e||"number"==typeof e)return""+e;e=""+e;var t=z.exec(e);if(t){var n,a="",o=0;for(n=t.index;n<e.length;n++){switch(e.charCodeAt(n)){case 34:t="&quot;";break;case 38:t="&amp;";break;case 39:t="&#x27;";break;case 60:t="&lt;";break;case 62:t="&gt;";break;default:continue}o!==n&&(a+=e.substring(o,n)),o=n+1,a+=t}e=o!==n?a+e.substring(o,n):a}return e}function D(e,t){var n,a=M.hasOwnProperty(e)?M[e]:null;return(n="style"!==e)&&(n=null!==a?0===a.type:2<e.length&&("o"===e[0]||"O"===e[0])&&("n"===e[1]||"N"===e[1])),n||function(e,t,n,a){if(null==t||function(e,t,n,a){if(null!==n&&0===n.type)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return!a&&(null!==n?!n.acceptsBooleans:"data-"!==(e=e.toLowerCase().slice(0,5))&&"aria-"!==e);default:return!1}}(e,t,n,a))return!0;if(a)return!1;if(null!==n)switch(n.type){case 3:return!t;case 4:return!1===t;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}(e,t,a,!1)?"":null!==a?(e=a.attributeName,3===(n=a.type)||4===n&&!0===t?e+'=""':(a.sanitizeURL&&(t=""+t),e+'="'+B(t)+'"')):P(e)?e+'="'+B(t)+'"':""}var V="function"==typeof Object.is?Object.is:function(e,t){return e===t&&(0!==e||1/e==1/t)||e!=e&&t!=t},F=null,H=null,U=null,q=!1,W=!1,K=null,G=0;function Q(){if(null===F)throw Error(r(321));return F}function Z(){if(0<G)throw Error(r(312));return{memoizedState:null,queue:null,next:null}}function J(){return null===U?null===H?(q=!1,H=U=Z()):(q=!0,U=H):null===U.next?(q=!1,U=U.next=Z()):(q=!0,U=U.next),U}function Y(e,t,n,a){for(;W;)W=!1,G+=1,U=null,n=e(t,a);return H=F=null,G=0,U=K=null,n}function X(e,t){return"function"==typeof t?t(e):t}function $(e,t,n){if(F=Q(),U=J(),q){var a=U.queue;if(t=a.dispatch,null!==K&&void 0!==(n=K.get(a))){K.delete(a),a=U.memoizedState;do{a=e(a,n.action),n=n.next}while(null!==n);return U.memoizedState=a,[a,t]}return[U.memoizedState,t]}return e=e===X?"function"==typeof t?t():t:void 0!==n?n(t):t,U.memoizedState=e,e=(e=U.queue={last:null,dispatch:null}).dispatch=function(e,t,n){if(!(25>G))throw Error(r(301));if(e===F)if(W=!0,e={action:n,next:null},null===K&&(K=new Map),void 0===(n=K.get(t)))K.set(t,e);else{for(t=n;null!==t.next;)t=t.next;t.next=e}}.bind(null,F,e),[U.memoizedState,e]}function ee(){}var te=0,ne={readContext:function(e){var t=te;return N(e,t),e[t]},useContext:function(e){Q();var t=te;return N(e,t),e[t]},useMemo:function(e,t){if(F=Q(),t=void 0===t?null:t,null!==(U=J())){var n=U.memoizedState;if(null!==n&&null!==t){e:{var a=n[1];if(null===a)a=!1;else{for(var o=0;o<a.length&&o<t.length;o++)if(!V(t[o],a[o])){a=!1;break e}a=!0}}if(a)return n[0]}}return e=e(),U.memoizedState=[e,t],e},useReducer:$,useRef:function(e){F=Q();var t=(U=J()).memoizedState;return null===t?(e={current:e},U.memoizedState=e):t},useState:function(e){return $(X,e)},useLayoutEffect:function(){},useCallback:function(e){return e},useImperativeHandle:ee,useEffect:ee,useDebugValue:ee,useResponder:function(e,t){return{props:t,responder:e}},useDeferredValue:function(e){return Q(),e},useTransition:function(){return Q(),[function(e){e()},!1]}},ae={html:"http://www.w3.org/1999/xhtml",mathml:"http://www.w3.org/1998/Math/MathML",svg:"http://www.w3.org/2000/svg"};function oe(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}var re={area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0},ie=a({menuitem:!0},re),ce={animationIterationCount:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},se=["Webkit","ms","Moz","O"];Object.keys(ce).forEach(function(e){se.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),ce[t]=ce[e]})});var le=/([A-Z])/g,ue=/^ms-/,de=o.Children.toArray,pe=k.ReactCurrentDispatcher,he={listing:!0,pre:!0,textarea:!0},fe=/^[a-zA-Z][a-zA-Z:_\.\-\d]*$/,be={},me={};var ve=Object.prototype.hasOwnProperty,ge={children:null,dangerouslySetInnerHTML:null,suppressContentEditableWarning:null,suppressHydrationWarning:null};function Oe(e,t){if(void 0===e)throw Error(r(152,C(t)||"Component"))}function je(e,t,n){function i(o,i){var c=i.prototype&&i.prototype.isReactComponent,s=function(e,t,n,a){if(a&&("object"==typeof(a=e.contextType)&&null!==a))return N(a,n),a[n];if(e=e.contextTypes){for(var o in n={},e)n[o]=t[o];t=n}else t=w;return t}(i,t,n,c),l=[],u=!1,d={isMounted:function(){return!1},enqueueForceUpdate:function(){if(null===l)return null},enqueueReplaceState:function(e,t){u=!0,l=[t]},enqueueSetState:function(e,t){if(null===l)return null;l.push(t)}};if(c){if(c=new i(o.props,s,d),"function"==typeof i.getDerivedStateFromProps){var p=i.getDerivedStateFromProps.call(null,o.props,c.state);null!=p&&(c.state=a({},c.state,p))}}else if(F={},c=i(o.props,s,d),null==(c=Y(i,o.props,c,s))||null==c.render)return void Oe(e=c,i);if(c.props=o.props,c.context=s,c.updater=d,void 0===(d=c.state)&&(c.state=d=null),"function"==typeof c.UNSAFE_componentWillMount||"function"==typeof c.componentWillMount)if("function"==typeof c.componentWillMount&&"function"!=typeof i.getDerivedStateFromProps&&c.componentWillMount(),"function"==typeof c.UNSAFE_componentWillMount&&"function"!=typeof i.getDerivedStateFromProps&&c.UNSAFE_componentWillMount(),l.length){d=l;var h=u;if(l=null,u=!1,h&&1===d.length)c.state=d[0];else{p=h?d[0]:c.state;var f=!0;for(h=h?1:0;h<d.length;h++){var b=d[h];null!=(b="function"==typeof b?b.call(c,p,o.props,s):b)&&(f?(f=!1,p=a({},p,b)):a(p,b))}c.state=p}}else l=null;if(Oe(e=c.render(),i),"function"==typeof c.getChildContext&&"object"==typeof(o=i.childContextTypes)){var m=c.getChildContext();for(var v in m)if(!(v in o))throw Error(r(108,C(i)||"Unknown",v))}m&&(t=a({},t,m))}for(;o.isValidElement(e);){var c=e,s=c.type;if("function"!=typeof s)break;i(c,s)}return{child:e,context:t}}var ye=function(){function e(e,t){o.isValidElement(e)?e.type!==s?e=[e]:(e=e.props.children,e=o.isValidElement(e)?[e]:de(e)):e=de(e),e={type:null,domNamespace:ae.html,children:e,childIndex:0,context:w,footer:""};var n=S[0];if(0===n){var a=S,i=2*(n=a.length);if(!(65536>=i))throw Error(r(304));var c=new Uint16Array(i);for(c.set(a),(S=c)[0]=n+1,a=n;a<i-1;a++)S[a]=a+1;S[i-1]=0}else S[0]=S[n];this.threadID=n,this.stack=[e],this.exhausted=!1,this.currentSelectValue=null,this.previousWasTextNode=!1,this.makeStaticMarkup=t,this.suspenseDepth=0,this.contextIndex=-1,this.contextStack=[],this.contextValueStack=[]}var t=e.prototype;return t.destroy=function(){if(!this.exhausted){this.exhausted=!0,this.clearProviders();var e=this.threadID;S[e]=S[0],S[0]=e}},t.pushProvider=function(e){var t=++this.contextIndex,n=e.type._context,a=this.threadID;N(n,a);var o=n[a];this.contextStack[t]=n,this.contextValueStack[t]=o,n[a]=e.props.value},t.popProvider=function(){var e=this.contextIndex,t=this.contextStack[e],n=this.contextValueStack[e];this.contextStack[e]=null,this.contextValueStack[e]=null,this.contextIndex--,t[this.threadID]=n},t.clearProviders=function(){for(var e=this.contextIndex;0<=e;e--)this.contextStack[e][this.threadID]=this.contextValueStack[e]},t.read=function(e){if(this.exhausted)return null;var t=te;te=this.threadID;var n=pe.current;pe.current=ne;try{for(var a=[""],o=!1;a[0].length<e;){if(0===this.stack.length){this.exhausted=!0;var i=this.threadID;S[i]=S[0],S[0]=i;break}var c=this.stack[this.stack.length-1];if(o||c.childIndex>=c.children.length){var s=c.footer;if(""!==s&&(this.previousWasTextNode=!1),this.stack.pop(),"select"===c.type)this.currentSelectValue=null;else if(null!=c.type&&null!=c.type.type&&c.type.type.$$typeof===d)this.popProvider(c.type);else if(c.type===b){this.suspenseDepth--;var l=a.pop();if(o){o=!1;var u=c.fallbackFrame;if(!u)throw Error(r(303));this.stack.push(u),a[this.suspenseDepth]+="\x3c!--$!--\x3e";continue}a[this.suspenseDepth]+=l}a[this.suspenseDepth]+=s}else{var p=c.children[c.childIndex++],h="";try{h+=this.render(p,c.context,c.domNamespace)}catch(e){if(null!=e&&"function"==typeof e.then)throw Error(r(294));throw e}a.length<=this.suspenseDepth&&a.push(""),a[this.suspenseDepth]+=h}}return a[0]}finally{pe.current=n,te=t}},t.render=function(e,t,n){if("string"==typeof e||"number"==typeof e)return""===(n=""+e)?"":this.makeStaticMarkup?B(n):this.previousWasTextNode?"\x3c!-- --\x3e"+B(n):(this.previousWasTextNode=!0,B(n));if(e=(t=je(e,t,this.threadID)).child,t=t.context,null===e||!1===e)return"";if(!o.isValidElement(e)){if(null!=e&&null!=e.$$typeof){if((n=e.$$typeof)===c)throw Error(r(257));throw Error(r(258,n.toString()))}return e=de(e),this.stack.push({type:null,domNamespace:n,children:e,childIndex:0,context:t,footer:""}),""}var i=e.type;if("string"==typeof i)return this.renderDOM(e,t,n);switch(i){case l:case h:case u:case m:case s:return e=de(e.props.children),this.stack.push({type:null,domNamespace:n,children:e,childIndex:0,context:t,footer:""}),"";case b:throw Error(r(294))}if("object"==typeof i&&null!==i)switch(i.$$typeof){case f:F={};var O=i.render(e.props,e.ref);return O=Y(i.render,e.props,O,e.ref),O=de(O),this.stack.push({type:null,domNamespace:n,children:O,childIndex:0,context:t,footer:""}),"";case v:return e=[o.createElement(i.type,a({ref:e.ref},e.props))],this.stack.push({type:null,domNamespace:n,children:e,childIndex:0,context:t,footer:""}),"";case d:return n={type:e,domNamespace:n,children:i=de(e.props.children),childIndex:0,context:t,footer:""},this.pushProvider(e),this.stack.push(n),"";case p:i=e.type,O=e.props;var C=this.threadID;return N(i,C),i=de(O.children(i[C])),this.stack.push({type:e,domNamespace:n,children:i,childIndex:0,context:t,footer:""}),"";case j:throw Error(r(338));case g:switch(function(e){if(-1===e._status){e._status=0;var t=e._ctor;t=t(),e._result=t,t.then(function(t){0===e._status&&(t=t.default,e._status=1,e._result=t)},function(t){0===e._status&&(e._status=2,e._result=t)})}}(i=e.type),i._status){case 1:return e=[o.createElement(i._result,a({ref:e.ref},e.props))],this.stack.push({type:null,domNamespace:n,children:e,childIndex:0,context:t,footer:""}),"";case 2:throw i._result;default:throw Error(r(295))}case y:throw Error(r(343))}throw Error(r(130,null==i?i:typeof i,""))},t.renderDOM=function(e,t,n){var i=e.type.toLowerCase();if(n===ae.html&&oe(i),!be.hasOwnProperty(i)){if(!fe.test(i))throw Error(r(65,i));be[i]=!0}var c=e.props;if("input"===i)c=a({type:void 0},c,{defaultChecked:void 0,defaultValue:void 0,value:null!=c.value?c.value:c.defaultValue,checked:null!=c.checked?c.checked:c.defaultChecked});else if("textarea"===i){var s=c.value;if(null==s){s=c.defaultValue;var l=c.children;if(null!=l){if(null!=s)throw Error(r(92));if(Array.isArray(l)){if(!(1>=l.length))throw Error(r(93));l=l[0]}s=""+l}null==s&&(s="")}c=a({},c,{value:void 0,children:""+s})}else if("select"===i)this.currentSelectValue=null!=c.value?c.value:c.defaultValue,c=a({},c,{value:void 0});else if("option"===i){l=this.currentSelectValue;var u=function(e){if(null==e)return e;var t="";return o.Children.forEach(e,function(e){null!=e&&(t+=e)}),t}(c.children);if(null!=l){var d=null!=c.value?c.value+"":u;if(s=!1,Array.isArray(l)){for(var p=0;p<l.length;p++)if(""+l[p]===d){s=!0;break}}else s=""+l===d;c=a({selected:void 0,children:void 0},c,{selected:s,children:u})}}if(s=c){if(ie[i]&&(null!=s.children||null!=s.dangerouslySetInnerHTML))throw Error(r(137,i,""));if(null!=s.dangerouslySetInnerHTML){if(null!=s.children)throw Error(r(60));if(!("object"==typeof s.dangerouslySetInnerHTML&&"__html"in s.dangerouslySetInnerHTML))throw Error(r(61))}if(null!=s.style&&"object"!=typeof s.style)throw Error(r(62,""))}for(j in s=c,l=this.makeStaticMarkup,u=1===this.stack.length,d="<"+e.type,s)if(ve.call(s,j)){var h=s[j];if(null!=h){if("style"===j){p=void 0;var f="",b="";for(p in h)if(h.hasOwnProperty(p)){var m=0===p.indexOf("--"),v=h[p];if(null!=v){if(m)var g=p;else if(g=p,me.hasOwnProperty(g))g=me[g];else{var O=g.replace(le,"-$1").toLowerCase().replace(ue,"-ms-");g=me[g]=O}f+=b+g+":",b=p,f+=m=null==v||"boolean"==typeof v||""===v?"":m||"number"!=typeof v||0===v||ce.hasOwnProperty(b)&&ce[b]?(""+v).trim():v+"px",b=";"}}h=f||null}p=null;e:if(m=i,v=s,-1===m.indexOf("-"))m="string"==typeof v.is;else switch(m){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":m=!1;break e;default:m=!0}m?ge.hasOwnProperty(j)||(p=P(p=j)&&null!=h?p+'="'+B(h)+'"':""):p=D(j,h),p&&(d+=" "+p)}}l||u&&(d+=' data-reactroot=""');var j=d;s="",re.hasOwnProperty(i)?j+="/>":(j+=">",s="</"+e.type+">");e:{if(null!=(l=c.dangerouslySetInnerHTML)){if(null!=l.__html){l=l.__html;break e}}else if("string"==typeof(l=c.children)||"number"==typeof l){l=B(l);break e}l=null}return null!=l?(c=[],he.hasOwnProperty(i)&&"\n"===l.charAt(0)&&(j+="\n"),j+=l):c=de(c.children),e=e.type,n=null==n||"http://www.w3.org/1999/xhtml"===n?oe(e):"http://www.w3.org/2000/svg"===n&&"foreignObject"===e?"http://www.w3.org/1999/xhtml":n,this.stack.push({domNamespace:n,type:i,children:c,childIndex:0,context:t,footer:s}),this.previousWasTextNode=!1,j},e}(),Ce={renderToString:function(e){e=new ye(e,!1);try{return e.read(1/0)}finally{e.destroy()}},renderToStaticMarkup:function(e){e=new ye(e,!0);try{return e.read(1/0)}finally{e.destroy()}},renderToNodeStream:function(){throw Error(r(207))},renderToStaticNodeStream:function(){throw Error(r(208))},version:"16.13.1"};e.exports=Ce.default||Ce},1006:function(e,t,n){},1007:function(e,t,n){},1008:function(e,t,n){},1009:function(e,t,n){"use strict";var a=n(1),o=n.n(a),r=n(202),i=n.n(r),c=(n(1010),n(0));t.a=function(e){var t=e.referenceList,n=e.onClick,a=e.listRef;return Object(c.e)(o.a.Fragment,null,Object(c.e)("h2",null,"参考"),Object(c.e)("ol",{className:"ReferenceList",onClick:n,ref:a},i()(t,"refKey").map(function(e){var n=t.filter(function(t){return t.refKey===e.refKey}),a=n.length>1?Object(c.e)(o.a.Fragment,null,Object(c.e)("span",{className:"ReferenceList-backHint","aria-label":"back"},"^"),n.map(function(e,t){var n="".concat(e.refKey,"_").concat(t);return Object(c.e)("sup",{key:n,className:"ReferenceList-backLink"},Object(c.e)("a",{href:"#".concat(n),"data-reference-link":!0},"abcdefghijklmnopqrstuvwxyz"[t%26]))})):Object(c.e)("a",{className:"ReferenceList-backLink",href:"#".concat(e.refKey,"_0"),"aria-label":"back","data-reference-link":!0},"^");return Object(c.e)("li",{id:e.refKey,key:e.refKey,tabIndex:0},a,e.text&&Object(c.e)("span",null,e.text),e.text&&e.url&&" ",e.url&&Object(c.e)("a",{href:e.url,className:"external",target:"_blank",rel:"noopener noreferrer"},e.url))})))}},1010:function(e,t,n){},1011:function(e,t,n){"use strict";var a=n(1);var o=function(e,t){var n;if(!e.defaultPrevented&&e.target.matches("a[data-reference-link]")){var a=e.target.getAttribute("href"),o=t.querySelector(a);o&&(e.preventDefault(),o.focus({preventScroll:!0}),n=o.getBoundingClientRect().top+window.pageYOffset-Math.max(window.innerHeight/10,100),window.scrollTo({top:n,behavior:"smooth"}),document.documentElement.setAttribute("data-focus-visible",""))}};t.a=function(e){var t=Object(a.useCallback)(function(t){return o(t,e)},[e]);Object(a.useEffect)(function(){if(e)return e.addEventListener("click",t),function(){e.removeEventListener("click",t)}},[e,t])}},1012:function(e,t,n){},1013:function(e,t,n){"use strict";var a=n(26),o=n(1),r=n.n(o),i=n(11),c=n(862),s=n(163),l=n(20),u=n(299),d=n.n(u),p=n(13),h=n.n(p),f=n(857),b=n(835),m=n(62),v=n.n(m),g=n(993),O=n(880),j=(n(1014),n(0));function y(e){return!!Array.isArray(e)&&e.length>0}function C(e){var t=e.meta,n=e.isMobile;if(!t)return null;var a=t.token,o=t.vote,r=(o=void 0===o?{}:o).totalVotes,i=o.ratio,c="/topic/".concat(a),u=function(e){l.a.trackEvent(e.target,{id:6941,action:"OpenUrl"},{module:[{card:{content:[{token:a}]}}],link:{url:c}})};return n?Object(j.e)("a",{className:h()("MetaLinkCard-metaMobile",{"MetaLinkCard-metaMobile--noRatio":!i}),href:c,onClick:u},Object(j.e)("div",{className:h()("MetaLinkCard-metaInfoMobile",{"MetaLinkCard-metaInfoMobile--noRatio":!i})},Boolean(i)&&Object(j.e)("span",{className:"MetaLinkCard-score MetaLinkCard-score--mobile"},i),Object(j.e)("div",{className:"MetaLinkCard-miscInfo"},Boolean(i)&&Object(j.e)("div",{className:"MetaLinkCard-scoreText"},"知乎评分"),Object(j.e)("div",{className:h()("MetaLinkCard-mobileVoteCount",{"MetaLinkCard-mobileVoteCount--hasRatio":Boolean(i)})},r?"".concat(Object(s.cnNiceNumber)(r),"评价"):"评价数据积累中"))),Object(j.e)("span",{className:"MetaLinkCard-mobileMetaButton"},Object(j.e)("span",{className:"MetaLinkCard-metaLinkText"},"相关话题"),Object(j.e)(f.a,{center:!0}))):Object(j.e)("div",{className:"MetaLinkCard-meta"},Object(j.e)("div",{className:"MetaLinkCard-metaInfo"},Boolean(i)&&Object(j.e)("div",{className:"MetaLinkCard-metaScore"},"知乎评分 ",Object(j.e)("span",{className:"MetaLinkCard-score"},i)),Object(j.e)("div",{className:"MetaLinkCard-voteCount"},r?"".concat(Object(s.cnNiceNumber)(r),"位知乎用户评价过此商品"):"评价数据积累中")),Object(j.e)("a",{rel:"noopener noreferrer",target:"_blank",href:c,className:"MetaLinkCard-metaButton",onClick:u},"相关话题"))}var k=function(e){var t=e.id,n=e.source,a=e.url,o=e.isMobile,r=e.onClick;return a?Object(j.e)("span",{className:h()("MetaLinkCard-goToShopping",{" MetaLinkCard-goToShopping--mobile":o})},Object(j.e)("a",{rel:"noopener noreferrer",target:"_blank","data-meta-id":t,"data-meta-source":n,"data-za-not-track-link":!0,onClick:function(e){o&&r(e),l.a.trackEvent(e.target,{id:6726,action:"OpenUrl"},{link:{host:a}})},href:a},"去购买"),Object(j.e)(f.a,{center:!0})):null};t.a=r.a.forwardRef(function(e,t){var n=Object(o.useState)(null),r=Object(a.a)(n,2),s=r[0],u=r[1],p=e.id,f=e.className,m=e.onClick,w=e.onMouseDown,N=e.refetchKey,S=e.onData,x=void 0===S?d.a:S,T=Object(o.useRef)(null);if(Object(o.useEffect)(function(){if(null!==N){var e="https://www.zhihu.com/api/v4/mcn/metalinks/".concat(p);Object(O.a)(e).then(function(e){var t=Object(i.camelizeKeys)(e);u(t),x(t)})}},[p,u,x,N]),Object(o.useEffect)(function(){T.current&&Object(c.onViewedOnce)(T.current.parentNode,function(){var e=s.topicMeta,t=(e=void 0===e?{}:e).token,n=s.url;l.a.setModule(T.current.parentNode,{module:"Content"},{card:{content:{type:"Topic",token:t}}}),l.a.trackCardShow(T.current.parentNode,{id:6725},{button:{text:t?"1":"0"},link:{host:n}})})},[s]),!s)return Object(j.e)("div",{ref:t,className:h()("MetaLinkCard","MetaLinkCard-placeholder",f),"data-draft-node":"block","data-draft-type":"metalink"});var I=s.skuid,E=s.source,L=s.title,P=s.images,A=s.price,M=s.recommendReasons,R=s.ratings,_=s.url,z=s.topicMeta,B=Boolean(v()(navigator.userAgent).Mobile),D=y(M),V=y(R),F=y(P),H=Object(g.a)(P);return Object(j.e)("div",{ref:t,className:h()("MetaLinkCard",f),"data-draft-node":"block","data-draft-type":"metalink","data-meta-id":s.id,"data-meta-skuid":I,"data-meta-source":E,onMouseDown:w},Object(j.e)("div",{className:h()("MetaLinkCard-card",{"MetaLinkCard-card--isMobile":B}),ref:T},Object(j.e)("div",{className:"MetaLinkCard-cardContainer"},Object(j.e)("div",{className:"MetaLinkCard-titleLine"},Object(j.e)("div",{className:"MetaLinkCard-title"},L),!B&&Object(j.e)(k,{id:s.id,source:E,url:_,isMobile:B})),(Boolean(A)||B&&Boolean(_))&&Object(j.e)("div",{className:h()("MetaLinkCard-priceSource",{"MetaLinkCard-priceSource--hasBorderBottom":D||V})},Object(j.e)("span",{className:"MetaLinkCard-priceWrapper"},Object(j.e)("span",{className:"MetaLinkCard-price"},"￥".concat(A)),Object(j.e)("span",{className:"MetaLinkCard-priceText"},"参考价")),B&&Object(j.e)(k,{id:s.id,source:E,url:_,isMobile:B,onClick:m})),D&&Object(j.e)("div",{className:"MetaLinkCard-reasons"},M.map(function(e){return Object(j.e)("span",{key:e,className:"MetaLinkCard-reason"},e)})),V&&Object(j.e)("div",{className:h()("MetaLinkCard-ratings",{"MetaLinkCard-ratings--noReasons":!D})},R.map(function(e){return Object(j.e)("div",{key:e.name,className:"MetaLinkCard-rating"},Object(j.e)("span",{className:"MetaLinkCard-ratingName"},e.name),Object(j.e)("span",{className:"MetaLinkCard-ratingStars"},[1,2,3,4,5].map(function(t){return Object(j.e)("span",{key:t,className:h()("MetaLinkCard-ratingStar",{"MetaLinkCard-ratingStar--rated":t<=e.value})},Object(j.e)(b.a,{size:12}))})))})),F&&Object(j.e)("div",{className:h()("MetaLinkCard-images",{"MetaLinkCard-images--onlyNoRatings":!V&&D})},P.map(function(e){var t=e.token,n=e.url;return Object(j.e)("div",{className:h()("MetaLinkCard-imageWrapper","MetaLinkCard-imageWrapper--".concat(H)),key:t},Object(j.e)("img",{className:"ImageLoader-image origin_image zh-lightbox-thumb",src:n,"data-original":n,"data-actualsrc":n,alt:""}))})),Object(j.e)(C,{meta:z,isMobile:B}))))})},1014:function(e,t,n){},1015:function(e,t,n){},1033:function(e,t,n){"use strict";n.d(t,"b",function(){return S}),n.d(t,"a",function(){return d});var a=n(3),o=n.n(a),r=n(1),i=n(13),c=n.n(i),s=n(168),l=(n(1112),n(0)),u=function(e){var t=e.title,n=e.subtitle,a=e.attrInfo,o=e.coverUrl,r=e.avatarUrl,i=e.avatarFit;return Object(l.e)("div",null,o&&Object(l.e)("div",{className:"HoverCard-coverContainer"},Object(l.e)("img",{className:"HoverCard-cover",src:o,alt:"cover"})),Object(l.e)("div",{className:c()("HoverCard-titleContainer",{"HoverCard-titleContainer--noAvatar":!o})},r&&Object(l.e)(s.a,{size:68,className:"HoverCard-avatar",url:r,imgFit:i}),Object(l.e)("div",{className:"HoverCard-titleText"},Object(l.e)("div",{className:"HoverCard-title"},t),n&&Object(l.e)("div",{className:"HoverCard-subtitle"},n)),a&&Object(l.e)("div",{className:"HoverCard-attrInfo"},a)))};u.propTypes={title:o.a.node,subtitle:o.a.node,attrInfo:o.a.node,coverUrl:o.a.string,avatarUrl:o.a.string,avatarFit:o.a.oneOf(["fill","contain","cover","none","scale-down"])};var d=u,p=n(6),h=n(10),f=n(9),b=n(7),m=n(8),v=n(29),g=n.n(v),O=n(32),j=n.n(O),y=n(81),C=n.n(y),k=n(869),w=n(126),N=(n(1113),function(e){function t(){var e,n;Object(p.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(f.a)(this,(e=Object(b.a)(t)).call.apply(e,[this].concat(o)))).state={opened:!1,placement:null,loaderStyle:null},n.handleOpen=function(e){var t=e.arrowStyle,a=e.placement,o=n.props.onOpen;o&&o(),n.setState({opened:!0,placement:a,loaderStyle:t})},n.handleClose=function(){var e=n.props.onClose;e&&e(),n.setState({opened:!1})},n}return Object(m.a)(t,e),Object(h.a)(t,[{key:"render",value:function(){var e=C()(this.props,["onOpen","onClose"]),t=e.toggler,n=e.children,a=e.isLoading,o=e.onRef,i=e.size,s=j()(e,["toggler","children","isLoading","onRef","size"]),u=this.state,d=u.opened,p=u.loaderStyle;return Object(l.e)(w.a,g()({noLayer:!0,toggler:Object(l.e)("div",null,t),toggleEvent:"hover",targetClassName:"HoverCard-popoverTarget",placement:"bottom-left",onOpen:this.handleOpen,onClose:this.handleClose},s),Object(l.e)("div",{className:c()("HoverCard-container",{"HoverCard-container--large":"large"===i}),ref:o},a&&Object(l.e)("div",{className:"HoverCard-loading",style:p},Object(l.e)(k.a,null)),Object(l.e)("div",{className:c()("HoverCard",{"HoverCard--isLoading":a||!d})},r.Children.map(n,function(e){return e&&("string"==typeof e?Object(l.e)("div",{className:"HoverCard-item"},e):Object(r.cloneElement)(e,{className:c()("HoverCard-item",e.props.className)}))}))))}}]),t}(r.Component));N.propTypes={toggler:o.a.node.isRequired,isLoading:o.a.bool,onOpen:o.a.func,onClose:o.a.func,size:o.a.oneOf(["default","large"])},N.defaultProps={margin:16,align:"left",topExcludedHeight:60,size:"default"};var S=N},1034:function(e,t,n){"use strict";n.d(t,"a",function(){return N});var a=n(6),o=n(10),r=n(9),i=n(7),c=n(8),s=n(29),l=n.n(s),u=n(32),d=n.n(u),p=n(1),h=n(33),f=n(13),b=n.n(f),m=n(1055),v=n.n(m),g=n(81),O=n.n(g),j=(n(1248),n(0)),y=500,C=3e3;function k(e,t,n){var a=new Image;return a.addEventListener("load",t),a.onerror=n,a.src=e,a}var w=function(e){function t(){var e,n;Object(a.a)(this,t);for(var o=arguments.length,c=new Array(o),s=0;s<o;s++)c[s]=arguments[s];return(n=Object(r.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).state={thumbnailLoaded:!1,loaded:!1,vagued:!0,computedWidth:n.props.width,computedHeight:n.props.height},n.wrapperNode=null,n.hasLoaded=!1,n.loadThumbnail=function(){var e=n.props,t=e.onLoadImageFail,a=e.onLoadImageTimeout;n.thumbnail=k(n.props.thumbnail,n.handleThumbnailLoaded,function(){t&&t({type:"thumbnail",url:n.props.thumbnail})}),a&&setTimeout(function(){n.thumbnail&&!n.thumbnail.complete&&a({type:"thumbnail",url:n.props.thumbnail})},C)},n.loadImage=function(){var e=n.props,t=e.onLoadImageFail,a=e.onLoadImageTimeout;n.image=k(n.props.url,n.handleImageLoaded,function(){t&&t({type:"image",url:n.props.url})}),a&&setTimeout(function(){n.image&&!n.image.complete&&a({type:"image",url:n.props.url})},C)},n.handleObserve=function(e){e&&n.hasLoaded||e&&(n.hasLoaded=!0,n.loadThumbnail(),n.loadImage())},n.handleThumbnailLoaded=function(){var e=n.props.onLoadImageSuccess;e&&e({type:"thumbnail",url:n.props.thumbnail});var t=n.state,a=t.computedWidth;if(!t.computedHeight){var o=n.thumbnail,r=o.naturalWidth,i=o.naturalHeight*(Number(a)/r);n.setState({computeHeight:i})}n.setState({thumbnailLoaded:!0})},n.handleImageLoaded=function(){var e=n.props.onLoadImageSuccess;e&&e({type:"image",url:n.props.url}),n.setState({loaded:!0}),n.timeout=window.setTimeout(function(){return n.setState({vagued:!1})},y)},n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){if(this.wrapperNode){var e=Object(h.findDOMNode)(this.wrapperNode),t=this.state,n=t.computedWidth,a=t.computedHeight;this.setState({computeWidth:n||e.offsetWidth,computeHeight:a||e.offsetHeight})}}},{key:"componentWillUnmount",value:function(){clearTimeout(this.timeout),this.thumbnail&&this.thumbnail.removeEventListener("load",this.handleThumbnailLoaded),this.image&&this.image.removeEventListener("load",this.handleImageLoaded)}},{key:"render",value:function(){var e=this,t=O()(this.props,["onLoadImageFail","onLoadImageTimeout","onLoadImageSuccess"]),n=t.className,a=t.url,o=t.alt,r=t.threshold,i=t.thumbnail,c=d()(t,["className","url","alt","threshold","thumbnail"]),s=this.state,u=s.thumbnailLoaded,p=s.loaded,h=s.vagued,f=s.computedWidth,m=s.computedHeight;if(!h)return Object(j.e)("img",l()({className:n,width:f,src:a,alt:o},c));var g=v.a;return Object(j.e)(g,{rootMargin:"".concat(r,"px 0px ").concat(r,"px 0px"),onChange:this.handleObserve,className:b()("VagueImage",n),ref:function(t){e.wrapperNode=t},style:Object.assign({},f&&{width:"".concat(f,"px")},{},m&&{height:"".concat(m,"px")}),"data-src":a},Object(j.e)("div",{className:b()("VagueImage-mask",{"is-active":!p}),style:u?{backgroundImage:"url(".concat(i,")")}:{}}),p&&Object(j.e)("img",{className:"VagueImage-innerLarge",src:a,alt:o}))}}]),t}(p.Component);w.defaultProps={threshold:200};var N=w},1035:function(e,t,n){"use strict";n.d(t,"a",function(){return u});var a=n(0),o=n(1),r=n.n(o),i=n(23),c=n(835),s=n(199),l=function(e){var t=e.className,n=e.onClick,o=e.label,l=e.onRef,u=e.disabled,d=e.showIcon,p=void 0===d||d;return Object(a.e)(r.a.Fragment,null,Object(a.e)(s.c,{keyMap:{BOOKMARK:"s c"},handlers:{BOOKMARK:n}}),Object(a.e)(i.d,{onRef:l,className:t,preset:"plain",onClick:n,icon:p?c.a:null,label:o,disabled:u}))};l.defaultProps={label:"收藏"};var u=l},1036:function(e,t,n){"use strict";n.d(t,"a",function(){return d});var a=n(1),o=n.n(a),r=n(13),i=n.n(r),c=n(163),s=n(991),l=(n(1008),n(0)),u={baidu:"百度网盘"};var d=function(e){var t=e.component,n=void 0===t?"a":t,a=e.className,r=e.href,d=e.type,p=void 0===d?"file":d,h=e.name,f=e.extension,b=e.size,m=e.source,v=e.onRef,g=e.onClick,O=e.onMouseDown,j=Number(b);return Object(l.e)(n,{className:i()("FileLinkCard",a),href:r,target:"_blank",rel:"noopener noreferrer","data-za-detail-view-id":7693,ref:v,onClick:g,onMouseDown:O},Object(l.e)(s.a,{className:"FileLinkCard-icon",isDirectory:"directory"===p,extension:f}),Object(l.e)("div",{className:"FileLinkCard-info"},Object(l.e)("div",{className:"FileLinkCard-name"},h),Object(l.e)("div",{className:"FileLinkCard-meta"},Boolean(j)&&Object(l.e)("div",{className:"FileLinkCard-size"},Object(c.unitPrefix)(j)),Boolean(j)&&m&&Object(l.e)(o.a.Fragment,null," · "),m&&Object(l.e)("div",{className:"FileLinkCard-source"},function(e){return u[e]||e}(m)))))}},1037:function(e,t,n){"use strict";n.d(t,"a",function(){return s});n(1);var a=n(3),o=n.n(a),r=n(77),i=n(0);function c(e){var t=e.id,a=e.parentType,o=e.parentId,c=e.suger,s=e.data,l=e.isEditor,u=void 0!==l&&l,d=Object(r.d)(function(){return n.e(2).then(n.bind(null,3055))},t);return d?Object(i.e)(d,{id:t,parentType:a,urlToken:o,suger:c,data:s,isEditor:u}):null}c.propTypes={id:o.a.string.isRequired,parentType:o.a.oneOf(["answer","article"]),parentId:o.a.string,suger:o.a.object,data:o.a.object,isEditor:o.a.bool};var s=c},1038:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var a=n(2),o=n(5),r=n(22),i=n(18),c=Object(o.a)("user",["UPDATE_FOLLOWERS_PIN"]).UPDATE_FOLLOWERS_PIN;function s(e,t,n){return function(o,s){var l=s(),u=l.entities.users,d=l.currentUser,p=u[e];return o(n?Object(r.h)(i.S.blocked,"red"):{urlToken:d,userUrlToken:e,expect:t,API:{types:c,endpoint:"members/".concat(e,"/followers"),method:t?"POST":"DELETE"},UPDATE:{request:{users:Object(a.a)({},e,{isFollowing:t})},failure:{users:Object(a.a)({},e,p)},success:function(t){return{users:Object(a.a)({},e,t)}}}})}}},1039:function(e,t,n){"use strict";var a=n(981);t.a=function(e){var t,n=null==e?void 0:e.routes[(null==e?void 0:null===(t=e.routes)||void 0===t?void 0:t.length)-1],o=null==n?void 0:n.name;return o&&a.b[o]}},1042:function(e,t,n){"use strict";var a=n(26),o=n(1),r=n(79),i=n.n(r),c=n(198),s=n(20),l=n(940),u=n(931),d=i()(function(){return/Mobile/.test(navigator.userAgent)});function p(e,t){var n={monitor:{type:"Event",imgResourceErrorInfo:{error_description:t,img_url:e,img_from:"web"}}};s.a.trackMonitor({name:t},n)}var h=function(e){var t=e.onLoadStateChange,n=e.enableWebP,a=e.size,o=e.quality;return function(e){var r=e.target,i=function(e){var t=e.image,n=e.enableWebP,a=e.size,o=e.quality,r=void 0===o?80:o,i=t.dataset,s=i.actualsrc,l=i.actualgif;return n&&l&&l.match(/.gif$/i)?s:a?Object(c.imgUrl)(s,{quality:r,size:a}):(a="720w",!d()&&window.devicePixelRatio>=1.5&&(a="1440w"),d()&&window.devicePixelRatio*window.innerWidth>=1080&&(a="1440w"),Object(c.imgUrl)(s,{quality:r,size:a}))}({image:r,enableWebP:n,size:a,quality:o});if(n&&(i=function(e){return e.replace(/\.(jpg|png|jpeg|gif)/,".webp")}(i)),r.src=i,r.complete)r.dataset.lazyStatus="ok";else{t&&r.addEventListener("loadstart",function(){t("loadstart",i)}),r.dataset.lazyStatus="loading";var s=setTimeout(function(){r.complete||p(r.url,"image_web_timeout_image"),t&&t("timeout",i)},15e3);r.addEventListener("load",function(){r.dataset.lazyStatus="ok",clearTimeout(s),p(r.url,"image_web_success_image"),t&&t("load",i)}),r.addEventListener("error",function(){clearTimeout(s),p(r.url,"image_web_fail_image"),t&&t("error",i)})}}};t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.useWebP,r=void 0===n||n,i=t.disabled,c=void 0!==i&&i,s=t.onLoadStateChange,d=t.size,p=t.quality,f=Object(o.useState)([]),b=Object(a.a)(f,2),m=b[0],v=b[1],g=Object(u.a)("lossless");Object(l.a)(m,h({onLoadStateChange:s,enableWebP:g&&r,size:d,quality:p}),{rootMargin:"300px"}),Object(o.useEffect)(function(){if(e&&!c){var t=Array.from(e.querySelectorAll("img.lazy:not([data-thumbnail])"));t.length&&v(t)}},[e,c])}},1043:function(e,t,n){},1045:function(e,t,n){var a=n(951)(!0);e.exports=a},1046:function(e,t,n){},1047:function(e,t,n){},1048:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var a=n(67),o=n(305),r=n(62),i=n.n(r),c={"京东":"jingdong","淘宝":"taobao","知乎":"zhihu","拼多多":"pinduoduo","美团酒旅":"meituanhotel","苏宁":"suning"},s=function(e,t){var n=e.id,r=e.url,s=e.source,l=c[s],u=i()(navigator.userAgent);u.ZhihuHybrid?a.a.supportsAction("mcn/openURL").then(function(e){var t=e;n&&r&&s&&(Object(o.versionControl)(u,{IOS:"6.15",ANDROID:"6.15"})||"taobao"!==l)&&(Object(o.versionControl)(u,{IOS:"6.25",ANDROID:"6.25"})||"zhihu"!==l)&&(Object(o.versionControl)(u,{IOS:"6.28",ANDROID:"6.29"})||"pinduoduo"!==l)&&(Object(o.versionControl)(u,{IOS:"6.37",ANDROID:"6.37"})||"meituanhotel"!==l)&&(Object(o.versionControl)(u,{IOS:"6.51",ANDROID:"6.51"})||"suning"!==l)||(t=!1),t?a.a.dispatch("mcn/openURL",{id:n,url:r,type:l}):a.a.dispatch("base/openURL",{url:r})}):u.Mobile?location.href=r:t?t.location.href=r:window.open(r)}},1052:function(e,t,n){"use strict";n.d(t,"a",function(){return we});var a=n(26),o=n(29),r=n.n(o),i=n(32),c=n.n(i),s=n(3),l=n.n(s),u=n(1),d=n.n(u),p=n(13),h=n.n(p),f=n(1045),b=n.n(f),m=n(4),v=n(1004),g=function(e){var t=Object(v.a)(e.children),n=t[0],a=t.slice(1);return n.apply(void 0,Object(m.a)(a))},O=n(888),j=n(989),y=/([-\w]+)(="([^"]+)"|='([^']+)')?/g,C=function(e){for(var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},a=n.decodeValue,o=void 0!==a&&a,r={};t=y.exec(e);){var i=t[1],c=t[3]||t[4];r[i]=(o?w(c):c)||""}return r},k=function(e){if(!e)return null;try{return JSON.parse(e)}catch(e){return null}};function w(){return(arguments.length>0&&void 0!==arguments[0]?arguments[0]:"").replace(/&amp;/g,"&").replace(/&#39;/g,"'").replace(/&lt;/g,"<").replace(/&gt;/g,">").replace(/&#34;/g,'"').replace(/&#13;/g,"\r")}var N=n(0),S=/<a\b([^>]*data-draft-type="link-card"[^>]*)>(.*?)<\/a>/g,x=function(e){return e?e.replace(S,function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=C(t,{decodeValue:!0}),o=a.target,r=void 0===o?"_blank":o,i=a.href,c=void 0===i?"":i,s=a["data-image"],l=a["data-image-width"],u=a["data-image-height"],d=a["data-entity-type"],p=a["data-entity-data"],h=a["data-size"],f=n.replace(/<[^>]*>/g,"");return f=w(f),c.match(/https:\/\/www.zhihu.com\/zvideo\/(\d+)$/)&&!f&&(f="知乎视频"),Object(O.renderToStaticMarkup)(Object(N.e)(j.a,{text:f,url:c,target:r,image:s,imageWidth:l,imageHeight:u,entityType:d,entityData:k(p),size:h}))}):e},T=n(1036),I=/<a\b([^>]*data-draft-type="file-link-card"[^>]*)>(.*?)<\/a>/g,E=function(e){return e?e.replace(I,function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"",a=C(t,{decodeValue:!0}),o=a.href,r=void 0===o?"":o,i=a["data-file-type"],c=a["data-file-extension"],s=a["data-file-size"],l=a["data-file-source"],u=w(n);return Object(O.renderToStaticMarkup)(Object(N.e)(T.a,{href:r,name:u,type:i,extension:c,size:s,source:l}))}):e},L=/<p><br><\/p>/g,P=function(e){return e?e.replace(L,'<p class="ztext-empty-paragraph"><br /></p>'):e},A=n(1009),M=/<sup\b([^>]*data-draft-type="reference"[^>]*)>(.*?)<\/sup>/g,R=function(e){return function(t){return function(e,t){if(!e)return e;var n=e,a=[];return n=n.replace(M,function(e,n){var o=C(n,{decodeValue:!0}),r=o["data-text"],i=void 0===r?"":r,c=o["data-url"],s=void 0===c?"":c,l=o["data-numero"],u=t?"ref_".concat(t,"_").concat(l):"ref_".concat(l),d=a.filter(function(e){return e.refKey===u}),p="".concat(u,"_").concat(d.length);a.push({refKey:u,text:i,url:s,numero:l});var h=[i,s].filter(Boolean).join(" ");return Object(O.renderToStaticMarkup)(Object(N.e)("sup",{"data-text":i,"data-url":s,"data-numero":l,"data-draft-node":"inline","data-draft-type":"reference","data-tooltip":h,"data-tooltip-preset":"white","data-tooltip-classname":"ztext-referene-tooltip"},Object(N.e)("a",{id:p,href:"#".concat(u),"data-reference-link":!0,"aria-labelledby":u},"[",l,"]")))}),a.length?n=n.concat(Object(O.renderToStaticMarkup)(Object(N.e)(A.a,{referenceList:a}))):n}(t,e)}},_=function(e){Object(u.useEffect)(function(){e&&Array.from(e.querySelectorAll("img[eeimg]")).forEach(function(e){e.setAttribute("data-formula",e.alt),e.alt="[公式]"})},[e])},z=n(1011),B=n(299),D=n.n(B),V=n(33),F=function(e){return function(t,n){var o=Object(u.useState)(null),i=Object(a.a)(o,2),c=i[0],s=i[1],l=e.idAttr,d=e.selector,p=e.component,h=e.targetClassName,f=e.cardDataFilter,b=l&&d&&h&&Object(u.useCallback)(function(e){var t=e.idAttr,n=e.targetClassName;return function(e){var a=e.getAttribute(t),o=document.createElement("div");return o.className=n,e.parentNode.replaceChild(o,e),{data:{id:a},target:o}}}({idAttr:l,targetClassName:h}),[l,h]),m=Object(u.useMemo)(function(){return b?function(e){return Array.from(e.querySelectorAll(d)).map(b)}:D.a},[b,t,d]);return Object(u.useEffect)(function(){if(t||d&&f){var e=(f||m)(t).map(function(e){var t=e.data,a=e.target;return Object(V.createPortal)(Object(N.e)(p,r()({key:t.id,id:t.id},n)),a)});e.length>0&&s(e)}},[t]),c}},H=F({cardDataFilter:function(e){return Array.from(e.getElementsByTagName("a")).map(function(e){var t,n=e.getAttribute("href"),a="link-card"===e.getAttribute("data-draft-type");if(!n||!a)return null;var o=null===(t=n.match(/https:\/\/www.zhihu.com\/zvideo\/(\d+)$/))||void 0===t?void 0:t[1];if(o){var r=document.createElement("div");return r.className="RichText-ZVideoLinkCardContainer",e.parentNode.replaceChild(r,e),{data:{id:o},target:r}}return null}).filter(Boolean)},component:n(992).a}),U=n(20),q=n(222),W=n(11),K=n(880),G=n(356),Q=n(357),Z=n.n(Q),J=n(198),Y=n(163);function X(){var e=Object(G.a)(["","的文章"]);return X=function(){return e},e}var $=function(e){var t=e.authorName,n=e.voteupCount;return Object(N.e)(d.a.Fragment,null,Z()(X(),t),n>=100&&" · ".concat(Object(Y.cnNiceNumber)(n),"赞同"))};function ee(e){var t=e.cardRef,n=e.useOpenArticleButton,a=e.handleClickLink,o=e.title,r=e.excerptText,i=e.imgUrlSrc,c=e.voteupCount,s=e.commentCount;return Object(N.e)("div",{className:"ArticleLinkCard",ref:t},Object(N.e)("span",{className:"ArticleLinkCard-title"},o),Boolean(r)&&Object(N.e)("div",{className:"ArticleLinkCard-excerpt"},r),i&&Object(N.e)("div",{className:"ArticleLinkCard-imageWrapper"},Object(N.e)("img",{src:Object(J.imgUrl)(i,"540x300"),className:"ArticleLinkCard-image",alt:""})),Object(N.e)("div",{className:"ArticleLinkCard-bottom"},Object(N.e)("span",{className:"ArticleLinkCard-hint"},"".concat(Object(Y.cnNiceNumber)(c),"赞同 · ").concat(Object(Y.cnNiceNumber)(s),"评论")),n&&Object(N.e)("span",{onClick:a,className:"ArticleLinkCard-hybridLink"},"查看完整文章")),Object(N.e)("div",{className:"ArticleLinkCard-bottomCardGradient"}))}function te(e){var t=e.cardRef,n=e.useOpenArticleButton,a=e.handleClickLink,o=e.title,r=e.content,i=e.imgUrlSrc,c=e.voteupCount,s=e.authorName,l=e.avatarUrl;return Object(N.e)("div",{className:"ArticleLinkCard AvatarArticleLinkCard",ref:t},Object(N.e)("div",{className:"AvatarArticleLinkCard-info"},Object(N.e)("div",{className:"AvatarArticleLinkCard-hint"},l&&Object(N.e)("img",{className:"AvatarArticleLinkCard-avatar",src:l,alt:""}),Object(N.e)($,{authorName:s,voteupCount:c})),n&&Object(N.e)("span",{onClick:a,className:"AvatarArticleLinkCard-hybridLink"},"查看全文")),Object(N.e)("span",{className:"ArticleLinkCard-title"},o),Object(N.e)("div",{className:h()("ArticleLinkCard-content",{"ArticleLinkCard-content--noImg":!i})},Object(N.e)("div",{dangerouslySetInnerHTML:{__html:r}})),!i&&Object(N.e)("span",{className:"AvatarArticleLinkCard-more"},"更多内容"),i&&Object(N.e)("img",{className:"AvatarArticleLinkCard-image",src:i,alt:""}))}function ne(e){var t=e.cardRef,n=e.useOpenArticleButton,a=e.handleClickLink,o=e.title,r=e.content,i=e.imgUrlSrc,c=e.voteupCount,s=e.authorName;return Object(N.e)("div",{className:"ArticleLinkCard QuoteArticleLinkCard",ref:t},Object(N.e)("span",{className:"ArticleLinkCard-title"},o),Object(N.e)("div",{className:"QuoteArticleLinkCard-hint"},Object(N.e)($,{authorName:s,voteupCount:c})),Object(N.e)("div",{className:h()("ArticleLinkCard-content QuoteArticleLinkCard-content",{"ArticleLinkCard-content--noImg":!i})},Object(N.e)("div",{dangerouslySetInnerHTML:{__html:r}})),!i&&n&&Object(N.e)("div",{onClick:a,className:"QuoteArticleLinkCard-hybridLink"},"查看全文"),i&&Object(N.e)("img",{className:"QuoteArticleLinkCard-image",src:i,alt:""}))}function ae(e){var t=e.article,n=t.title,a=t.excerpt,o=t.content,r=t.imageUrl,i=t.voteupCount,c=t.commentCount,s=t.author,l=void 0===s?{}:s,d=e.styleAbParam,p=e.cardRef,h=e.useOpenArticleButton,f=e.handleClickLink,b=Object(u.useMemo)(function(){var e=document.createElement("div");return e.innerHTML=a,e.textContent},[a]),m=l.name,v=l.avatarUrl;return"1"===d?Object(N.e)(te,{cardRef:p,useOpenArticleButton:h,handleClickLink:f,title:n,content:o,imgUrlSrc:r,voteupCount:i,authorName:m,avatarUrl:v}):"2"===d?Object(N.e)(ne,{cardRef:p,useOpenArticleButton:h,handleClickLink:f,title:n,content:o,imgUrlSrc:r,voteupCount:i,authorName:m}):Object(N.e)(ee,{cardRef:p,useOpenArticleButton:h,handleClickLink:f,title:n,excerptText:b,imgUrlSrc:r,voteupCount:i,commentCount:c})}n(1046);var oe=function(e){var t=e.article.id,n=e.article,a=e.useOpenArticleButton,o=e.enableZa,r=e.styleAbParam,i=Object(u.useRef)(null);Object(u.useEffect)(function(){o&&(U.a.setModule(i.current,{module:"Content"},{card:{content:{type:"Post",token:String(t)}}}),U.a.trackCardShow(i.current,{id:8589,element:"Card"}))},[o,t]);var c="https://zhuanlan.zhihu.com/p/".concat(t),s=Object(u.useCallback)(function(){o&&U.a.trackEvent(i.current,{id:8590,action:"OpenUrl",element:"Card"})},[o]);return Object(N.e)(q.c,{as:"a",shouldTrackShow:!0,shouldTrackClick:!0,zaBlock:"ZTextArticleLinkCard",zaAction:"OpenUrl",zaType:"Button",zaEventType:"Click",extra:{link:{url:c}},href:c,"data-za-not-track-link":!0,onClick:s,rel:"noopener noreferrer",target:"_blank"},Object(N.e)(ae,{styleAbParam:r,cardRef:i,useOpenArticleButton:a,linkUrl:c,handleClickLink:s,article:n}))},re=F({cardDataFilter:function(e){return Array.from(e.getElementsByTagName("a")).map(function(e){var t,n=e.getAttribute("href"),a="link-card"===e.getAttribute("data-draft-type"),o="normal"===e.getAttribute("data-size");if(!n||!a||!o)return null;var r=null===(t=n.match(/https:\/\/zhuanlan.zhihu.com\/p\/(\d+)$/))||void 0===t?void 0:t[1];if(r){var i=document.createElement("div");return i.className="RichText-ArticleLinkCardContainer",e.parentNode.replaceChild(i,e),{data:{id:r},target:i}}return null}).filter(Boolean)},component:function(e){var t=e.id,n=e.useOpenArticleButton,o=e.enableZa,i=e.styleAbParam,s=c()(e,["id","useOpenArticleButton","enableZa","styleAbParam"]),l=Object(u.useState)(null),d=Object(a.a)(l,2),p=d[0],h=d[1],f=Object(u.useState)(null),b=Object(a.a)(f,2),m=b[0],v=b[1],g=i&&["1","2"].includes(i)?"1":"0";return Object(u.useEffect)(function(){var e="https://www.zhihu.com/api/v4/articles/".concat(t,"?is_article_card=").concat(g);Object(K.a)(e).then(function(e){return Object(W.camelizeKeys)(e)}).then(function(e){e.error?v(e.error.message):h(e)}).catch(function(e){v(e.message||"未知错误")})},[t,g]),m?Object(N.e)("div",{className:"ArticleLinkCard-error"},m):p?Object(N.e)(oe,r()({article:p,useOpenArticleButton:n,enableZa:o,styleAbParam:i},s)):Object(N.e)("div",{className:"ArticleLinkCard-loading"},"加载中...")}}),ie=F({idAttr:"data-ad-id",selector:"a[data-ad-id]",targetClassName:"RichText-ADLinkCardContainer",component:n(1037).a}),ce=n(916),se=F({idAttr:"data-mcn-id",selector:"a[data-mcn-id]",targetClassName:"RichText-MCNLinkCardContainer",component:ce.c}),le=F({idAttr:"data-metalink-id",selector:"a[data-metalink-id]",targetClassName:"RichText-MetaLinkCardContainer",component:n(1013).a}),ue=n(862),de=function(e){var t=Object(W.camelizeKeys)(e),n=t.resourceName,a=t.button,o=a.url,r=a.text,i=t.title,c=t.cover,s=t.price,l=t.source,u=void 0===l?"知乎":l;return{url:o,buttonText:r,title:i,imgToken:c,price:s,authorText:t.desc,heatText:t.footer,producer:n,source:u}},pe=F({idAttr:"data-sku-id",selector:"a[data-sku-id]",targetClassName:"RichText-MkSkuLinkCardContainer",component:function(e){var t=e.onClick,n=Object(u.useRef)(!1);return Object(N.e)(ce.c,r()({processResponse:de,getUrl:function(e){return"https://www.zhihu.com/api/v4/market/km_sku_card/".concat(e)},fetcherOptions:{credentials:"same-origin"},onClick:function(e){U.a.trackEvent(e.target,{id:7204,action:"OpenUrl"}),t&&t(e)},disableZa:!0,ref:function(t){t&&!t.classList.contains("MCNLinkCard-placeholder")&&!1===n.current&&(U.a.setModule(t,{module:"Content"},{card:{content:{id:e.id}}}),Object(ue.onViewedOnce)(t,function(){U.a.trackCardShow(t,{id:7203})}),n.current=!0)},zaBlock:"ZTextMkSKuLinkCard"},e))}}),he=n(1042),fe=(n(563),function(e){var t=function(e){if(0!==e.intersectionRatio){var t=e.target;t.dataset.zaDetailViewId=t.cardShowViewId,U.a.trackCardShow(t,{},{link:{url:t.href}}),n.unobserve(t),t.clickViewId&&(t.dataset.zaDetailViewId=t.clickViewId)}},n=new IntersectionObserver(function(e){e.forEach(t)},{threshold:[.1]});return[{cardShowViewId:1042,clickViewId:1043,selector:"a.external, a.internal"},{cardShowViewId:1044,clickViewId:1045,selector:"a.member_mention, a.UserLink-link"},{cardShowViewId:174,clickViewId:175,selector:"a.video-box"},{cardShowViewId:171,clickViewId:172,selector:'a[data-draft-type="link-card"]'},{cardShowViewId:7692,selector:"a.FileLinkCard .FileLinkCard-info"}].forEach(function(t){var a=t.selector,o=t.cardShowViewId,r=t.clickViewId;Array.from(e.querySelectorAll(a)).forEach(function(e){e.cardShowViewId=o,e.clickViewId=r,n.observe(e)})}),function(){n.disconnect()}}),be="function"==typeof queueMicrotask?queueMicrotask:function(e){return Promise.resolve().then(e)},me=function(e){var t=Object(u.useRef)(null);Object(u.useEffect)(function(){if(e)return be(function(){e&&(t.current=fe(e))}),function(){t.current&&t.current()}},[e])},ve=n(226),ge=n(77),Oe=[{selector:"a.external, a.internal",zaBlock:"ZTextLink"},{selector:"a.member_mention, a.UserLink-link",zaBlock:"ZTextMention"},{selector:"a.video-box",zaBlock:"ZTextVideoCard"},{selector:'a[data-draft-type="link-card"]',zaBlock:"ZTextLinkCard"},{selector:"a.FileLinkCard .FileLinkCard-info",zaBlock:"ZTextFileLinkCard"}],je=function(e){var t=e.element,n=e.config,a={elementLocation:{type:"Button"},block:n.zaBlock},o={action:"OpenUrl",elementLocation:{type:"Button"},block:n.zaBlock,eventType:"Click"},r={link:{url:t.href}},i=Object(q.i)().trackEvent,c=Object(q.h)(a,r),s=Object(ge.c)(function(){i(o,r)});return Object(u.useEffect)(function(){return t.addEventListener("click",s),function(){t.removeEventListener("click",s)}},[]),Object(u.useEffect)(function(){return c(t),function(){return c(null)}},[]),null},ye=function(e){var t=Object(u.useState)([]),n=Object(a.a)(t,2),o=n[0],r=n[1];return Object(u.useEffect)(function(){if(e){var t=[];Oe.forEach(function(n){var a=n.selector;Array.from(e.querySelectorAll(a)).forEach(function(e){t.push({el:e,config:n})})}),r(t)}},[e]),Object(N.e)(d.a.Fragment,null,o.map(function(e,t){var n=e.el,a=e.config;return Object(N.e)(je,{key:t,element:n,config:a})}))},Ce=(n(1015),n(565),n(1047),b()([P,R(),x,E])),ke=function(e){var t=e.tag,n=void 0===t?"div":t,o=e.className,i=e.html,s=e.onRef,l=e.zvideoLinkCardProps,p=void 0===l?{}:l,f=e.articleLinkCardProps,b=void 0===f?{}:f,m=e.adLinkCardProps,v=void 0===m?{}:m,O=e.mcnLinkCardProps,j=void 0===O?{}:O,y=e.metaLinkCardProps,C=void 0===y?{}:y,k=e.mkSkuLinkCardProps,w=void 0===k?{}:k,S=e.clearBoth,x=void 0!==S&&S,T=e.lazyLoadImageProps,I=e.shouldUseArticleCard,E=void 0!==I&&I,L=c()(e,["tag","className","html","onRef","zvideoLinkCardProps","articleLinkCardProps","adLinkCardProps","mcnLinkCardProps","metaLinkCardProps","mkSkuLinkCardProps","clearBoth","lazyLoadImageProps","shouldUseArticleCard"]),P=Object(u.useState)(null),A=Object(a.a)(P,2),M=A[0],R=A[1];return _(M),Object(z.a)(M),me(M),Object(he.a)(M,T),Object(N.e)(d.a.Fragment,null,ye(M),H(M,p),E&&Object(N.e)(g,null,[re,M,b]),ie(M,v),se(M,j),le(M,C),pe(M,w),Object(N.e)(n,r()({key:i,ref:Object(u.useCallback)(Object(ve.a)(R,s),[]),className:h()("RichText","ztext",o,{"RichText--clearBoth":x}),dangerouslySetInnerHTML:{__html:Ce(i)}},L)))};ke.propTypes={tag:l.a.string,html:l.a.string.isRequired,clearBoth:l.a.bool,onRef:l.a.oneOfType([l.a.func,l.a.object])};var we=d.a.memo(ke)},1055:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var a=t[n];a.enumerable=a.enumerable||!1,a.configurable=!0,"value"in a&&(a.writable=!0),Object.defineProperty(e,a.key,a)}}return function(t,n,a){return n&&e(t.prototype,n),a&&e(t,a),t}}(),r=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t}(n(1)),i=n(1166);function c(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}var s=function(e){function t(){var e,n,a;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var o=arguments.length,r=Array(o),s=0;s<o;s++)r[s]=arguments[s];return n=a=c(this,(e=t.__proto__||Object.getPrototypeOf(t)).call.apply(e,[this].concat(r))),a.state={inView:!1},a.node=null,a.handleNode=function(e){a.node&&(0,i.unobserve)(a.node),a.node=e,a.observeNode(),a.props.innerRef&&a.props.innerRef(e)},a.handleChange=function(e){a.setState({inView:e}),a.props.onChange&&a.props.onChange(e)},c(a,n)}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,r.Component),o(t,[{key:"componentDidUpdate",value:function(e,t){e.rootMargin===this.props.rootMargin&&e.root===this.props.root&&e.threshold===this.props.threshold||((0,i.unobserve)(this.node),this.observeNode()),t.inView!==this.state.inView&&this.state.inView&&this.props.triggerOnce&&((0,i.unobserve)(this.node),this.node=null)}},{key:"componentWillUnmount",value:function(){this.node&&((0,i.unobserve)(this.node),this.node=null)}},{key:"observeNode",value:function(){if(this.node){var e=this.props,t=e.threshold,n=e.root,a=e.rootMargin,o=e.rootId;(0,i.observe)(this.node,this.handleChange,{threshold:t,root:n,rootMargin:a},o)}}},{key:"render",value:function(){var e=this.props,t=e.children,n=e.render,o=e.tag,i=(e.innerRef,e.triggerOnce,e.threshold,e.root,e.rootId,e.rootMargin,function(e,t){var n={};for(var a in e)t.indexOf(a)>=0||Object.prototype.hasOwnProperty.call(e,a)&&(n[a]=e[a]);return n}(e,["children","render","tag","innerRef","triggerOnce","threshold","root","rootId","rootMargin"])),c=this.state.inView;return r.createElement(o,a({},i,{ref:this.handleNode}),"function"==typeof n?n(c):null,"function"==typeof t?t(c):t)}}]),t}();s.defaultProps={tag:"div",threshold:0,triggerOnce:!1},t.default=s},1057:function(e,t,n){"use strict";var a=n(6),o=n(10),r=n(9),i=n(7),c=n(8),s=n(29),l=n.n(s),u=n(3),d=n.n(u),p=n(1),h=n(882),f=(n(1095),n(0)),b=function(e){function t(){return Object(a.a)(this,t),Object(r.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(o.a)(t,[{key:"renderThumbnail",value:function(){var e=this.props.error;return Object(f.e)("div",{className:"VideoErrorCard-thumbnail"},Object(f.e)("div",{className:"VideoErrorCard-error"},e.message||"错误"))}},{key:"render",value:function(){var e=this.props,t=e.isLens,n=e.id;return Object(f.e)("div",{className:"VideoErrorCard"},Object(f.e)(h.b,l()({},this.props,t&&{playerUrl:"https://www.zhihu.com/video/".concat(n)},{thumbnail:this.renderThumbnail(),showPlayButton:!1,onBeforePlay:function(){return!1}})))}}]),t}(p.Component);b.propTypes={error:d.a.object.isRequired},t.a=b},1087:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var a=n(0),o=(n(1),n(28)),r=n(77),i=["answer","question","article","pin","zvideo","club_post"];var c=Object(o.withRouter)(function(e){var t=e.parent.type,o=i.includes(t),c=Object(r.d)(function(){return n.e(12).then(n.bind(null,3060))},!o),s=Object(r.d)(function(){return n.e(12).then(n.bind(null,3059))},o),l=o?s:c;return l?Object(a.e)(l,e):null})},1088:function(e,t,n){"use strict";n.d(t,"a",function(){return I});var a=n(26),o=n(6),r=n(10),i=n(9),c=n(7),s=n(8),l=n(0),u=n(3),d=n.n(u),p=n(1),h=n.n(p),f=n(13),b=n.n(f),m=n(23),v=n(1503),g=n(1547),O=n(20),j=n(163),y=n(61),C=n(199),k=n(4),w=n(351),N=n(126),S=(n(1429),function(e){function t(){var e,n;Object(o.a)(this,t);for(var a=arguments.length,r=new Array(a),s=0;s<a;s++)r[s]=arguments[s];return(n=Object(i.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(r)))).state={step:0},n.containerRef=h.a.createRef(),n.reasonButtonRefs=[],n.toggleStep=function(){n.setState({step:0===n.state.step?1:0},function(){n.popover.position()})},n.handleKeyDown=function(e){var t=Number(e.key);t&&n.reasonButtonRefs[t-1]&&n.reasonButtonRefs[t-1].focus()},n.handleNeverShowVoteDownReason=function(){n.props.onSetVoteDownReason(!1),n.popover.close()},n.handleSelectReason=function(e){n.props.onSelectVoteDownReason(e),n.popover.close()},n}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentDidUpdate",value:function(){"absolute"===this.props.positionStatus&&this.popover.close()}},{key:"render",value:function(){var e=this,t=this.props,n=t.reasonList,a=t.positionStatus,o=this.state.step,r=Object(k.a)(n).sort(function(e,t){return e.sort-t.sort});return Object(l.e)(N.a,{className:"VoteDownReasonMenu",targetClassName:"VoteDownReasonMenu-target",positionStatus:a,toggler:this.props.toggler,onOpen:function(){e.setState({step:0})},getContainer:function(){return document.querySelector(".ContentItem-actions")},onClick:this.props.onTogglerClick,ref:function(t){e.popover=t,e.props.popoverRef&&e.props.popoverRef(t)},placement:"top",arrowed:!0,preventCloseOnTarget:!0},Object(l.e)("div",{className:"VoteDownReasonMenu-container",onKeyDown:this.handleKeyDown,tabIndex:-1},Object(l.e)("div",{className:"VoteDownReasonMenu-header"},0===o&&"已反对，你觉得",1===o&&"不再显示该反馈功能？"),Object(l.e)("div",{className:"VoteDownReasonMenu-action"},0===o&&Object(l.e)(m.d,{preset:"plain",className:"VoteDownReasonMenu-ignoreButton preventCloseOnTarget",onClick:this.toggleStep},"不再显示"),0===o&&Object(l.e)("div",{className:"VoteDownReasonMenu-spliter"}),Object(l.e)(m.d,{preset:"plain",className:"VoteDownReasonMenu-closeButton",onClick:function(){e.popover.close()},"aria-label":"关闭",tabIndex:1,icon:w.a})),0===o&&Object(l.e)("div",{className:"VoteDownReasonMenu-reasonList"},r.map(function(t,n){return Object(l.e)(m.d,{preset:"plain",className:"VoteDownReasonMenu-reason",key:t.reasonId,onClick:function(){e.handleSelectReason(t)},onRef:function(t){return e.reasonButtonRefs[n]=t}},t.name)})),1===o&&Object(l.e)("div",{className:"VoteDownReasonMenu-disableReason"},Object(l.e)("div",{className:"VoteDownReasonMenu-disableReasonHint"},"你可以在「设置」页面中的「屏蔽」开启。"),Object(l.e)("div",{className:"VoteDownReasonMenu-disableReasonButtonList"},Object(l.e)(m.d,{className:"preventCloseOnTarget",onClick:this.toggleStep},"返回"),Object(l.e)(m.d,{color:"blue",onClick:this.handleNeverShowVoteDownReason},"不再显示")))))}}]),t}(p.Component));S.defaultProps={reasonList:[]};var x=S,T=n(18),I=(n(1201),function(e){function t(){var e,n;Object(o.a)(this,t);for(var r=arguments.length,s=new Array(r),u=0;u<r;u++)s[u]=arguments[u];return(n=Object(i.a)(this,(e=Object(c.a)(t)).call.apply(e,[this].concat(s)))).state={recognizeInfo:{showRecognizeModal:!1,action:"",voteType:"",isRecognized:n.props.isRecognized}},n.voteUpButtonRef=h.a.createRef(),n.voteDownButtonRef=h.a.createRef(),n.shouldShowMenu=function(){var e=n.props,t=e.voting,a=e.voteDownReason,o=e.onLoadVoteDownReason;return!!e.isShowVoteDownMenu&&(-1===t?(n.popover.close(),!1):!!a||(n.isPendingForVoteDownReason=!0,o(),!1))},n.onVote=n.context.authRequired(function(e){n.props.onVote(e)},T.U.vote),n.voteUp=function(e){var t=1===n.props.voting?["UnUpvote","neutral"]:["Upvote","up"],o=Object(a.a)(t,2),r=o[0],i=o[1];n.vote(e,r,i),n.voteUpButtonRef.current.focus()},n._voteDown=function(e){var t=-1===n.props.voting?["UnDownvote","neutral"]:["Downvote","down"],o=Object(a.a)(t,2),r=o[0],i=o[1];n.vote(e,r,i),n.voteDownButtonRef.current.focus()},n.voteDown=function(e){n.shouldShowMenu()&&n.popover.open(),n._voteDown(e)},n.vote=function(e,t,a){var o=n.props,r=o.disableAuth,i=o.handleToggleGuide,c=o.onClick,s=o.type,l=o.zaIds,u=l.voteUp,d=l.voteDown,p=t.includes("Upvote")?u:d;"article"===s&&"down"===a&&O.a.trackEvent(n.voteDownButtonRef.current,{action:"Click",id:2315,name:"反对"}),O.a.trackEvent(t.includes("Upvote")?n.voteUpButtonRef.current:n.voteDownButtonRef.current,Object.assign({action:t,element:"Button"},p&&{id:p})),c?c(e):r?i():n.onVoteWithRecognize(t,a)},n.onVoteWithRecognize=function(e,t){var a=n.props.voting;!n.state.recognizeInfo.isRecognized||1!==a||"UnUpvote"!==e&&"Downvote"!==e?n.onVote(t):n.setState({recognizeInfo:Object.assign({},n.state.recognizeInfo,{showRecognizeModal:!0,action:e,voteType:t})})},n.handleConfirmCancelRecognize=function(){n.onVote(n.state.recognizeInfo.voteType),n.setState({recognizeInfo:Object.assign({},n.state.recognizeInfo,{isRecognized:!1,showRecognizeModal:!1})})},n.handleCloseCancelRecognizeModal=function(){return n.setState({recognizeInfo:Object.assign({},n.state.recognizeInfo,{showRecognizeModal:!1})})},n.handleTogglerClick=function(e){n.shouldShowMenu()||e.preventDefault(),n._voteDown(e)},n.renderVoteUpButton=function(){var e=n.props,t=e.isOwner,a=e.count,o=e.voting,r=e.disabled,i=e.hideDesc,c=1===o?"已赞同":"赞同",s=[c,Object(j.cnNiceNumber)(a)].join(" "),u=[!i&&c,0!==a&&Object(j.cnNiceNumber)(a).trim()].filter(Boolean).join(" ");return Object(l.e)(m.d,{className:b()("VoteButton VoteButton--up",{"is-active":1===o}),disabled:t||r,onClick:n.voteUp,"aria-label":s,onRef:n.voteUpButtonRef},Object(l.e)(v.a,{center:!0,size:10,className:"VoteButton-TriangleUp"}),u)},n.renderVoteDownButton=function(){var e=n.props,t=e.voting,a=e.disabled,o=-1===t?"已反对":"反对";return Object(l.e)(m.d,{className:b()("VoteButton VoteButton--down",{"is-active":-1===t},{"VoteButton--mobileDown":!1}),disabled:a,onClick:n._voteDown,"aria-label":o,onRef:n.voteDownButtonRef},Object(l.e)(g.a,{center:!0,size:10}))},n}return Object(s.a)(t,e),Object(r.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.voteDownReason&&this.isPendingForVoteDownReason&&(this.isPendingForVoteDownReason=!1,this.popover.open())}},{key:"render",value:function(){var e=this,t=this.props,n=t.isOwner,a=t.positionStatus,o=t.isShowVoteDownMenu,r=t.voteDownReason,i=this.state.recognizeInfo,c=i.showRecognizeModal,s="UnUpvote"===i.action,u=o&&!0;return Object(l.e)("span",{ref:this.voteButtonRef},Object(l.e)(C.c,{keyMap:{VOTE_UP:"v",VOTE_DOWN:"d"},handlers:{VOTE_UP:this.voteUp,VOTE_DOWN:this.voteDown}}),this.renderVoteUpButton(),!n&&!u&&this.renderVoteDownButton(),!n&&u&&Object(l.e)(x,{reasonList:r,toggler:this.renderVoteDownButton(),popoverRef:function(t){return e.popover=t},positionStatus:a,onTogglerClick:this.handleTogglerClick,onSelectVoteDownReason:this.props.onSelectVoteDownReason,onSetVoteDownReason:this.props.onSetVoteDownReason}),Object(l.e)(y.b,{title:"确定".concat(s?"取消赞同":"选择反对"),onClose:this.handleCloseCancelRecognizeModal},c&&Object(l.e)("div",null,Object(l.e)("div",null,s?"取消赞同":"选择反对","时，你赠与作者的专业徽章也会收回，并且赠与次数不会返还，是否仍要取消？"),Object(l.e)(y.a,{direction:"horizontal"},Object(l.e)(m.d,{onClick:this.handleCloseCancelRecognizeModal},s?"暂不取消":"暂不选择"),Object(l.e)(m.d,{preset:"primary",color:"blue",onClick:this.handleConfirmCancelRecognize},s?"取消赞同":"选择反对")))))}}]),t}(p.Component));I.contextTypes={authRequired:d.a.func},I.propTypes={voting:d.a.oneOf([-1,0,1]).isRequired,disabled:d.a.bool,type:d.a.string,hideDesc:d.a.bool,zaIds:d.a.shape({voteUp:d.a.number,voteDown:d.a.number}),isRecognized:d.a.bool},I.defaultProps={voting:0,disabled:!1,type:"",hideDesc:!1,zaIds:{}}},1089:function(e,t,n){},1090:function(e,t,n){"use strict";t.__esModule=!0,t.default=void 0;var a=r(n(399)),o=r(n(400));function r(e){return e&&e.__esModule?e:{default:e}}var i=function(e){if(204===e.status)return!1;if("0"===e.headers.get("content-length"))return!1;var t=e.headers.get("content-type");return t&&-1!==t.indexOf("application/json")},c=function(e){return e.ok?i(e)?e.json():e.text():i(e)?e.json().then(function(t){return Promise.reject(Object.assign({},t,{status:e.status}))}):e.text().then(function(t){return Promise.reject(new o.default(e,{text:t}))})},s=(0,a.default)(fetch),l=function(e,t){return s(e,t).then(c)};t.default=l},1091:function(e,t,n){},1092:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(1168);t.TAG_RE_TEMPLATE=a.TAG_RE_TEMPLATE,t.TAG_RE=a.TAG_RE,t.parseAttrs=a.parseAttrs,t.parseTagGroup=a.parseTagGroup,t.parseTag=a.parseTag,t.truncateHTML=a.truncateHTML,t.stripHTML=a.stripHTML},1093:function(e,t,n){"use strict";e.exports=n(1094)},1094:function(e,t,n){"use strict";
/** @license React v16.13.1
 * create-subscription.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var a=n(1);t.createSubscription=function(e){var t=e.getCurrentValue,n=e.subscribe;return function(e){function a(){for(var n=arguments.length,a=Array(n),o=0;o<n;o++)a[o]=arguments[o];return(n=e.call.apply(e,[this].concat(a))||this).state={source:n.props.source,value:null!=n.props.source?t(n.props.source):void 0},n._hasUnmounted=!1,n._unsubscribe=null,n}!function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}(a,e),a.getDerivedStateFromProps=function(e,n){return e.source!==n.source?{source:e.source,value:null!=e.source?t(e.source):void 0}:null};var o=a.prototype;return o.componentDidMount=function(){this.subscribe()},o.componentDidUpdate=function(e,t){this.state.source!==t.source&&(this.unsubscribe(),this.subscribe())},o.componentWillUnmount=function(){this.unsubscribe(),this._hasUnmounted=!0},o.render=function(){return this.props.children(this.state.value)},o.subscribe=function(){var e=this,a=this.state.source;if(null!=a){var o=n(a,function(t){e._hasUnmounted||e.setState(function(e){return t===e.value||a!==e.source?null:{value:t}})});if("function"!=typeof o)throw Error(function(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}(266));this._unsubscribe=o,(o=t(this.props.source))!==this.state.value&&this.setState({value:o})}},o.unsubscribe=function(){"function"==typeof this._unsubscribe&&this._unsubscribe(),this._unsubscribe=null},a}(a.Component)}},1095:function(e,t,n){},1098:function(e,t,n){"use strict";var a=n(16),o=n(24),r=n(0),i=n(1),c=n(13),s=n.n(c),l=n(299),u=n.n(l),d=n(379),p=n.n(d),h=n(39),f=(n(1127),Object(h.isBrowser)()?i.useLayoutEffect:function(){});t.a=function(e){var t=e.onKeyDown,n=void 0===t?u.a:t,c=e.onChange,l=e.value,d=e.large,h=e.className,b=e.autoHeight,m=Object(o.a)(e,["onKeyDown","onChange","value","large","className","autoHeight"]),v=Object(i.useRef)();f(function(){if(!b){var e=d?100:0,t=v.current;t.style.height="1px",t.style.height="".concat(p()(t.scrollHeight,e,230),"px")}},[l,d,b]);var g=Object(i.useCallback)(function(e){d||"Enter"!==e.key||e.preventDefault(),n(e)},[d,n]),O=Object(i.useCallback)(function(e){b&&function(){var e=v.current;if(e){e.style.height="1px";var t=Math.max(e.scrollHeight,25);e.style.height="".concat(t,"px")}}(),c(e)},[c,b]);return Object(r.e)("textarea",Object(a.default)({},m,{ref:v,onKeyDown:g,value:l,onChange:O,className:s()("AutoSizeTextArea",h)}))}},1100:function(e,t,n){"use strict";var a=n(21);t.a=function(){var e=Object(a.useSelector)(function(e){var t,n;return null===(t=e.env)||void 0===t?void 0:null===(n=t.ctx)||void 0===n?void 0:n.path});return Boolean(e.match(/\/club\/\d+\/post\/\d+$/))}},1102:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var a=n(6),o=n(10),r=n(9),i=n(7),c=n(8),s=n(0),l=n(3),u=n.n(l),d=n(1),p=n(102),h=n(224),f=function(e){function t(){var e,n;Object(a.a)(this,t);for(var o=arguments.length,c=new Array(o),s=0;s<o;s++)c[s]=arguments[s];return(n=Object(r.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).state={stickyOffset:n.props.offset},n.check=function(){var e;if(null===(e=n.el)||void 0===e?void 0:e.children){var t=n.props.offset,a=t,o=Array.from(n.el.children).map(function(e){var t=window.getComputedStyle(e);return e.offsetHeight+parseInt(t.marginBottom,10)+parseInt(t.marginTop,10)}),r=n.el&&n.el.clientHeight,i=document.documentElement.clientHeight-t;if(n.sticky&&n.sticky.updateHeight(),r>i){var c=r;o.every(function(e){return!(c<i)&&(c-=e,!0)}),a=t-r+c}n.state.stickyOffset!==a&&n.setState({stickyOffset:a})}},n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.resizeHandler=Object(p.subscribe)("resize",this.check),this.timeout=setTimeout(this.check)}},{key:"componentWillUnmount",value:function(){this.resizeHandler.unsubscribe(),clearTimeout(this.timeout)}},{key:"render",value:function(){var e=this,t=this.props,n=t.children,a=t.className,o=t.onRef;return Object(s.e)("div",{className:a,ref:o},Object(s.e)(h.a,{offset:this.state.stickyOffset,ref:function(t){e.sticky=t}},Object(s.e)("div",{ref:function(t){e.el=t}},n)))}}]),t}(d.Component);f.propTypes={offset:u.a.number,onRef:u.a.func,className:u.a.string},f.defaultProps={offset:0,onRef:function(){},className:""}},1108:function(e,t,n){"use strict";var a=n(16),o=n(24),r=n(6),i=n(10),c=n(9),s=n(7),l=n(8),u=n(0),d=n(3),p=n.n(d),h=n(1),f=n(21),b=n(13),m=n.n(b),v=n(168),g=n(23),O=n(950),j=n(1033),y=n(359),C=n(20),k=n(112),w=n(18),N=n(138);var S=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).load=function(){var e=n.props,t=e.dispatch,a=e.id;t(Object(N.A)(a))},n.track=function(){var e=n.props.topic;n.hoverCardElement&&e&&(C.a.setModule(n.hoverCardElement,{module:"TopicItem"},{card:{content:{type:"Topic",token:e.id,item_num:e.questionsCount,follower_num:e.followersCount}}}),C.a.trackCardShow(n.hoverCardElement))},n.handleFollow=n.context.authRequired(function(){var e=!n.props.topic.isFollowing;C.a.trackEvent(n.hoverCardElement,{action:e?"Follow":"UnFollow",element:"Button"});var t=n.props,a=t.dispatch,o=t.id;a(Object(N.M)(o))},w.U.follow),n.handleOpen=function(){n.load(),n.track()},n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"isTopicReady",value:function(){var e=this.props.topic||{},t=e.questionsCount,n=e.followersCount,a=e.bestAnswersCount;return!(void 0===t&&void 0===n&&void 0===a)}},{key:"render",value:function(){var e=this,t=this.props,n=t.toggler,r=t.topic,i=t.id,c=t.isLoading,s=t.onRef,l=Object(o.a)(t,["toggler","topic","id","isLoading","onRef"]),d=r||{},p=d.name,h=d.introduction,f=d.questionsCount,b=d.followersCount,m=d.bestAnswersCount,v=d.avatarUrl,C=d.isFollowing,w=d.headerCard,N="//www.zhihu.com/topic/".concat(i),S=w&&w.avatarUrl||v;return Object(u.e)(j.b,Object(a.default)({toggler:n,preventCloseOnTarget:!0,isLoading:c,onOpen:this.handleOpen,size:"large"},l,{onRef:function(t){s&&"function"==typeof s&&s(t),e.hoverCardElement=t}}),Object(u.e)(j.a,{title:Object(u.e)("a",{target:"_blank",rel:"noopener noreferrer",href:N},p),avatarUrl:S,avatarFit:"cover"}),h&&Object(u.e)("div",null,Object(u.e)(y.a,{className:"HoverCard-description",html:h})),Object(u.e)("div",null,this.isTopicReady()&&Object(u.e)(O.a,null,Object(u.e)(O.a.Item,{tag:k.a,preset:"plain",a:!0,to:"".concat(N,"/questions"),name:"问题",value:f,target:"_blank"}),Object(u.e)(O.a.Item,{tag:k.a,preset:"plain",a:!0,to:"".concat(N,"/top-answers"),name:"精华",value:m,target:"_blank"}),Object(u.e)(O.a.Item,{tag:k.a,preset:"plain",a:!0,to:"".concat(N,"/followers"),name:"关注者",target:"_blank",value:b})),Object(u.e)("div",{className:"HoverCard-buttons"},r&&Object(u.e)(g.d,{preset:"primary",color:C?"grey":"blue",onClick:this.handleFollow},C?"已关注":"关注话题"))))}}]),t}(h.Component);S.contextTypes={authRequired:p.a.func};var x,T,I,E=Object(f.connect)(function(e,t){var n=t.id,a=e.entities.topics,o=e.loading.local;return{topic:a[n],isLoading:Boolean(o["topic/".concat(n)])}})(S),L=n(46),P=Object(f.connect)(function(e){return{isMobile:Object(L.e)(e,{includeTablet:!0})}})((I=T=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e,t=this.props,n=t.isMobile,r=t.topic,i=r.name,c=r.avatarUrl,s=r.id,l=r.headerCard,d=t.avatar,p=t.avatarProps,h=t.noHoverCard,f=t.noLink,b=t.style,g=t.className,O=t.children,j=(t.dispatch,t.trackEvent,Object(o.a)(t,["isMobile","topic","avatar","avatarProps","noHoverCard","noLink","style","className","children","dispatch","trackEvent"])),y=void 0===h?n:h,C=l&&l.avatarUrl||c;e=d?Object(u.e)(v.a,Object(a.default)({className:"TopicLink-avatar",url:C,alt:i},p)):O||i,f||y||(e=Object(u.e)(E,{toggler:e,id:s}));var k=f?"span":"a";return Object(u.e)(k,Object(a.default)({style:b,className:m()("TopicLink",g),href:"//www.zhihu.com/topic/".concat(s),target:"_blank"},j),e)}}]),t}(h.Component),T.propTypes={topic:p.a.object.isRequired,user:p.a.object,avatar:p.a.bool,avatarProps:p.a.object,noHoverCard:p.a.bool,noLink:p.a.bool,style:p.a.object,className:p.a.string,children:p.a.node},T.defaultProps={avatar:!1,noLink:!1},x=I))||x;t.a=P},1109:function(e,t,n){"use strict";var a=n(0),o=n(1),r=n.n(o),i=n(6),c=n(10),s=n(9),l=n(7),u=n(8),d=n(3),p=n.n(d),h=n(23),f=n(61),b=(n(1150),function(e){function t(){var e,n;Object(i.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(s.a)(this,(e=Object(l.a)(t)).call.apply(e,[this].concat(o)))).state={logoutModalShown:!1},n.handleLogoutModalShow=function(){n.setState({logoutModalShown:!0})},n.handleLogoutModalHide=function(){n.setState({logoutModalShown:!1})},n.handleClick=function(){var e=n.context.currentUser;e&&e.urlToken?n.handleLogoutModalShow():location.href="https://www.zhihu.com/org/signup"},n}return Object(u.a)(t,e),Object(c.a)(t,[{key:"render",value:function(){var e=this.state.logoutModalShown;return Object(a.e)(o.Fragment,null,Object(a.e)(h.d,{className:"OrgCreateButton",onClick:this.handleClick},"申请开通知乎机构号"),e&&Object(a.e)(f.b,{className:"OrgCreateButton-logoutModal",title:"开通提示",onClose:this.handleLogoutModalHide},Object(a.e)("p",null,"若想访问机构号注册页面，请您请先退出当前帐号登录状态"),Object(a.e)(f.a,null,Object(a.e)(h.d,{preset:"primary",color:"blue",onClick:function(){location.href="/logout?next=/org/signup"}},"退出登录"),Object(a.e)(h.d,{onClick:this.handleLogoutModalHide},"我再想想"))))}}]),t}(o.Component));b.contextTypes={currentUser:p.a.object};var m=b;n(1151);t.a=function(e){var t=e.showHelpCenter,n=void 0!==t&&t,o=(new Date).getFullYear();return Object(a.e)("footer",{className:"Footer"},n&&Object(a.e)(r.a.Fragment,null,Object(a.e)("a",{className:"Footer-item",target:"_blank",rel:"noopener noreferrer",href:"/help-center"},"帮助中心"),Object(a.e)("span",{className:"Footer-dot"})),Object(a.e)("a",{className:"Footer-item",target:"_blank",rel:"noopener noreferrer",href:"//liukanshan.zhihu.com/"},"刘看山"),Object(a.e)("span",{className:"Footer-dot"}),Object(a.e)("a",{className:"Footer-item",target:"_blank",rel:"noopener noreferrer",href:"/question/19581624"},"知乎指南"),Object(a.e)("span",{className:"Footer-dot"}),Object(a.e)("a",{className:"Footer-item",target:"_blank",rel:"noopener noreferrer",href:"/term/zhihu-terms"},"知乎协议"),Object(a.e)("span",{className:"Footer-dot"}),Object(a.e)("a",{className:"Footer-item",target:"_blank",rel:"noopener noreferrer",href:"/term/privacy"},"知乎隐私保护指引"),Object(a.e)("br",null),Object(a.e)("a",{className:"Footer-item",target:"_blank",href:"/app"},"应用"),Object(a.e)("span",{className:"Footer-dot"}),Object(a.e)("a",{className:"Footer-item",target:"_blank",rel:"noopener noreferrer",href:"https://app.mokahr.com/apply/zhihu"},"工作"),Object(a.e)("span",{className:"Footer-dot"}),Object(a.e)(m,{className:"Footer-item"}),Object(a.e)("br",null),Object(a.e)("a",{className:"Footer-item",target:"_blank",rel:"noopener noreferrer",href:"https://zhuanlan.zhihu.com/p/28852607"},"侵权举报"),Object(a.e)("span",{className:"Footer-dot"}),Object(a.e)("a",{className:"Footer-item",target:"_blank",rel:"noopener noreferrer",href:"http://www.12377.cn"},"网上有害信息举报专区"),Object(a.e)("br",null),Object(a.e)("a",{className:"Footer-item",target:"_blank",rel:"noopener noreferrer",href:"https://tsm.miit.gov.cn/dxxzsp/"},"京 ICP 证 110745 号"),Object(a.e)("br",null),Object(a.e)("a",{className:"Footer-item",target:"_blank",rel:"noopener noreferrer",href:"https://beian.miit.gov.cn/"},"京 ICP 备 13052560 号 - 1"),Object(a.e)("br",null),Object(a.e)("a",{className:"Footer-item",target:"_blank",rel:"noopener noreferrer",href:"http://www.beian.gov.cn/portal/registerSystemInfo?recordcode=11010802020088"},Object(a.e)("img",{src:"https://pic3.zhimg.com/80/v2-d0289dc0a46fc5b15b3363ffa78cf6c7.png"}),"京公网安备 11010802010035 号"),Object(a.e)("br",null),Object(a.e)("span",{className:"Footer-item"},"互联网药品信息服务资格证书",Object(a.e)("br",null),"（京）- 非经营性 - 2017 - 0067"),Object(a.e)("span",{className:"Footer-item"},"违法和不良信息举报：010-82716601"),Object(a.e)("br",null),Object(a.e)("a",{className:"Footer-item",target:"_blank",href:"/term/child-jubao"},"儿童色情信息举报专区"),Object(a.e)("br",null),Object(a.e)("a",{className:"Footer-item",target:"_blank",href:"/certificates"},"证照中心"),Object(a.e)("br",null),Object(a.e)("a",{className:"Footer-item",target:"_blank",href:"/contact"},"联系我们"),Object(a.e)("span",null," © ",o," 知乎"))}},1112:function(e,t,n){},1113:function(e,t,n){},1114:function(e,t,n){},1115:function(e,t,n){},1117:function(e,t,n){"use strict";var a=n(4),o=["DIV","P","BLOCKQUOTE","PRE","CODE","OL","UL","H1","H2","H3","H4","H5","H6"],r=function(e){return o.includes(e.nodeName)||e.classList&&(e.classList.contains("video-box")||e.classList.contains("link-box")||e.classList.contains("origin_image")||e.classList.contains("content_image"))};t.a=function(e){if("undefined"==typeof window)return e;if(-1!==e.indexOf("<p>"))return e;var t=document,n=t.createElement("div");n.innerHTML=e;var o=Object(a.a)(n.childNodes),i=!0,c=!1,s=void 0;try{for(var l,u=o[Symbol.iterator]();!(i=(l=u.next()).done);i=!0){var d=l.value;if("BR"===d.nodeName&&d.previousSibling&&"BR"!==d.previousSibling.nodeName&&d.nextSibling&&"BR"===d.nextSibling.nodeName){for(var p=t.createElement("p"),h=d.previousSibling;h&&!r(h)&&("BR"!==h.nodeName||h.previousSibling&&"BR"!==h.previousSibling.nodeName&&!r(h.previousSibling));){var f=p.childNodes;f.length>0?p.insertBefore(h,f[0]):p.appendChild(h),h=d.previousSibling}p.childNodes.length>0&&(n.insertBefore(p,d),d.nextSibling.parentNode.removeChild(d.nextSibling),d.parentNode.removeChild(d))}}}catch(e){c=!0,s=e}finally{try{i||null==u.return||u.return()}finally{if(c)throw s}}return n.innerHTML}},1118:function(e,t,n){},1119:function(e,t,n){},1127:function(e,t,n){},1131:function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"e",function(){return l}),n.d(t,"c",function(){return u}),n.d(t,"d",function(){return d}),n.d(t,"b",function(){return p});n(1141);var a=n(67),o=n(309),r=n.n(o),i=(n(305),n(1142)),c=function(e,t){var n,a=t.router,o=((null==a?void 0:null===(n=a.location)||void 0===n?void 0:n.query)||{}).club_source;return Object(i.a)(e,Object.assign({},t,{query:Object.assign({},null==t?void 0:t.query,{club_source:o})}))},s=function(){return r()("zhihu:/".concat(location.pathname))};function l(e,t,n){var a="/club/".concat(e,"/tag/").concat(t);return c(a,n)}function u(e,t,n){var a="/club/".concat(e,"/post/").concat(t);return c(a,n)}function d(e,t,n){var a="/club/".concat(e,"/profile/").concat(t,"/edit");return c(a,n)}function p(e,t){a.a.supportsAction("account/showLoginDialog").then(function(n){n?a.a.dispatch("account/showLoginDialog",Object.assign({},t.iOS&&{next:"zhihu:/".concat(e)})):location.href="https://www.zhihu.com/signin?next=".concat(encodeURIComponent(e))})}},1141:function(e,t,n){e.exports=n(49)(204)},1142:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var a=n(1141),o=n(67),r=n(309),i=n.n(r);function c(e,t){var n=t.router,r=t.ua,c=t.query,s=void 0===c?{}:c,l=t.oia,u=t.isSoft,d=r.ZhihuHybrid,p=r.Zhihu,h=r.Android,f=Object(a.stringify)(s),b="".concat(f?"?".concat(f):""),m="https://www.zhihu.com".concat(e).concat(b);u&&h?n.push({pathname:e,query:s}):d&&p?o.a.dispatch("base/openURL",{url:m}):l?i()(m):n?n.push({pathname:e,query:s}):location.href=m}},1146:function(e,t,n){"use strict";n.d(t,"a",function(){return j});var a=n(6),o=n(10),r=n(9),i=n(7),c=n(8),s=n(0),l=n(3),u=n.n(l),d=n(1),p=n(13),h=n.n(p),f=n(224),b=n(412),m=n(182),v=n(199),g=n(18),O=(n(1167),function(e){function t(){var e,n;Object(a.a)(this,t);for(var o=arguments.length,c=new Array(o),s=0;s<o;s++)c[s]=arguments[s];return(n=Object(r.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).state={enabled:!1,shown:!1},n.handleScrollUp=function(){n.state.shown&&n.canToggle()&&n.setState({shown:!1})},n.handleScrollDown=function(){!n.state.shown&&n.canToggle()&&n.setState({shown:!0})},n.handlePositionStatusChange=function(e){n.canToggle()&&("normal"!==e?n.enable():n.disable())},n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"canToggle",value:function(){return!(this.props.prevent||document.activeElement&&document.activeElement.closest(".SearchBar"))}},{key:"enable",value:function(){this.setState({enabled:!0,shown:!0})}},{key:"disable",value:function(){this.setState({enabled:!1,shown:!1})}},{key:"render",value:function(){var e=this,t=this.props,n=t.offset,a=t.children,o=this.state,r=o.enabled,i=o.shown;return Object(s.e)(d.Fragment,null,Object(s.e)(v.a,{shortcuts:[{key:"/",action:function(){return e.setState({shown:!1})}}]}),Object(s.e)(f.a,{offset:n,onPositionStatusChange:this.handlePositionStatusChange},Object(s.e)("div",null)),r&&Object(s.e)(b.a,{onScrollUp:this.handleScrollUp,onScrollDown:this.handleScrollDown}),Object(s.e)(m.a.Inlet,{shown:i},Object(s.e)("div",{className:h()("PageHeader",{"is-shown":i})},a)))}}]),t}(d.Component));O.propTypes={prevent:u.a.bool,offset:u.a.number},O.defaultProps={prevent:!1,offset:g.i};var j=O},1147:function(e,t,n){"use strict";n.d(t,"a",function(){return m});var a=n(24),o=n(6),r=n(10),i=n(9),c=n(7),s=n(8),l=n(0),u=n(1),d=n(3),p=n.n(d),h=n(929),f=n(199),b=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){var e=this.props,t=e.containerClassName,n=e.selector,o=Object(a.a)(e,["containerClassName","selector"]);return Object(l.e)(f.b,{className:t,selector:n},Object(l.e)(h.b,o))}}]),t}(u.Component);b.propTypes={containerClassName:p.a.string,selector:p.a.string},b.defaultProps={selector:".List-item"};var m=b},1150:function(e,t,n){},1151:function(e,t,n){},1160:function(e,t,n){"use strict";var a=n(1),o=n.n(a),r=n(17),i=function(e){return o.a.createElement(r.a,e,o.a.createElement("path",{d:"M18.376 5.624c-3.498-3.499-9.254-3.499-12.752 0-3.499 3.498-3.499 9.254 0 12.752 3.498 3.499 9.254 3.499 12.752 0 3.499-3.498 3.499-9.14 0-12.752zm-1.693 1.693c2.37 2.37 2.596 6.094.678 8.69l-9.367-9.48c2.708-1.919 6.32-1.58 8.69.79zm-9.48 9.48c-2.37-2.37-2.595-6.095-.676-8.69l9.48 9.48c-2.822 1.918-6.433 1.58-8.803-.79z",fillRule:"evenodd"}))};i.defaultProps={name:"Ban"},t.a=i},1163:function(e,t,n){},1166:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.observe=r,t.unobserve=i,t.destroy=c;var a=new Map,o=new Map;function r(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{threshold:0},r=arguments[3],i=n.root,c=n.rootMargin,l=n.threshold||0;if(e&&t){var u=c?l.toString()+"_"+c:""+l.toString();i&&(u=r?r+"_"+u:null);var d=u?o.get(u):null;d||(d=new IntersectionObserver(s,n),u&&o.set(u,d));var p={callback:t,visible:!1,options:n,observerId:u,observer:u?void 0:d};return a.set(e,p),d.observe(e),p}}function i(e){if(e){var t=a.get(e);if(t){var n=t.observerId,r=t.observer,i=n?o.get(n):r;i&&i.unobserve(e);var c=!1;n&&a.forEach(function(t,a){t&&t.observerId===n&&a!==e&&(c=!0)}),i&&!c&&(i.disconnect(),o.delete(n)),a.delete(e)}}}function c(){o.forEach(function(e){e.disconnect()}),o.clear(),a.clear()}function s(e){e.forEach(function(e){var t=e.isIntersecting,n=e.intersectionRatio,o=e.target,r=a.get(o);if(r&&n>=0){var i=r.options,c=!1;Array.isArray(i.threshold)?c=i.threshold.some(function(e){return r.visible?n>e:n>=e}):void 0!==i.threshold&&(c=r.visible?n>i.threshold:n>=i.threshold),void 0!==t&&(c=c&&t),r.callback&&r.callback(c)}})}t.default={observe:r,unobserve:i,destroy:c}},1167:function(e,t,n){},1168:function(e,t,n){"use strict";var a=n(127);Object.defineProperty(t,"__esModule",{value:!0});var o=["img","br"],r=/([\w|-]+)(?:="([^"]*)")?/;function i(e){var t={};if((e=e.trim()).length)for(var n,o=new RegExp(r.source,"g");n=o.exec(e);){var i=n.slice(1),c=a(i,2),s=c[0],l=c[1];t[s]=l}return t}function c(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=a(e,5),r=n[0],c=n[1],s=n[2],l=n[3],u=n[4],d="open";return"/"===c?d="close":(o.includes(s)||"/"===u)&&(d="self-close"),{tagHTML:r,tagName:s,tagType:d,attrs:t.parseAttrs?i(l):l}}function s(e){var t=e.tagName,n=e.attrs;return"string"==typeof n?t:"invisible"===n.class?"invisible":"video-box"===n.class?"video-box":["link-card","mcn-link-card","metalink"].includes(n["data-draft-type"])?"link-card":t}function l(e){switch(e){case"invalid":return{type:"invalid"};case"noscript":case"figcaption":case"video-box":case"link-card":return{type:"replace",content:" "};case"div":case"br":case"figure":case"img":case"hr":case"h1":case"h2":case"h3":case"h4":case"h5":case"h6":case"p":case"pre":case"code":case"blockquote":case"ul":case"ol":case"li":return{type:"replace-self",content:" "};case"invisible":return{type:"hide"};default:return null}}t.TAG_RE_TEMPLATE=new RegExp(/<(\/?)(#TAG_NAME#)\s*(#TAG_ATTRS#)\s*(\/?)>/.source.replace("#TAG_ATTRS#",/[^>]*/.source)),t.TAG_RE=new RegExp(t.TAG_RE_TEMPLATE.source.replace("#TAG_NAME#",/[\w|-]+/.source)),t.parseAttrs=i,t.parseTagGroup=c,t.parseTag=function(e,n){var a=t.TAG_RE.exec(e);if(a)return c(a,n)},t.getBlockType=s,t.truncateHTML=function(e){for(var n,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1/0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=r.endsWith,u=void 0===i?"…":i,d=r.placeholders,p=void 0===d?{}:d,h=[],f=[],b=[],m={},v={},g=new RegExp(t.TAG_RE.source,"g"),O=0,j=0,y=0,C=0,k=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];h.push(e),t||(O+=e.length),j+=e.length};n=g.exec(e);){var w=c(n,{parseAttrs:!0}),N=w.tagHTML,S=w.tagType,x=w.tagName,T="close"===S&&o.includes(x)?"invalid":s("close"!==S?w:f[f.length-1]),I=p[T]?{type:"replace",content:p[T]}:l(T);"close"!==S&&(m[T]=(m[T]||0)+1);var E=e.slice(j,n.index),L=E.length;if(O+L>=a&&0===y&&0===C){for(k(E.slice(0,a-O));b.length;){var P=b.pop();h.push("</".concat(P.tagName,">"))}break}0===y&&k(E,0!==C),"invalid"!==T&&("open"===S?f.push(w):"close"===S&&f.pop(),I?("replace"===I.type&&(0===y&&"close"!==S&&h.push(I.content),"open"===S?y++:"close"===S&&y--),0===y&&"replace-self"===I.type&&h.push(I.content),0===y&&"hide"===I.type&&("open"===S?C++:"close"===S&&C--,h.push(N))):0===y&&(h.push(N),"open"===S?b.push(w):"close"===S&&b.pop())),"video-box"!==T||v.type||"string"==typeof w.attrs||(v.type="video",v.url=w.attrs["data-poster"],v.id=w.attrs["data-lens-id"]),j=g.lastIndex}O<a&&k(e.slice(j).slice(0,a-O));var A=O>a||O===a&&j<e.length||function(e){return!!(e.h1||e.h2||e.h3||e.h4||e.h5||e.h6||e.blockquote||e.pre||e.img||e["video-box"]||e["link-card"])||(e.br||0)+(e.p||0)+(e.li||0)>1}(m);return{isTruncated:A,thumbnailInfo:v,content:"".concat(h.join("").trim().replace(/\s{2,}/g," ")).concat(A?u:"")}},t.stripHTML=function(e){var t=document.createElement("DIV");return t.innerHTML=e,t.textContent||t.innerText||""}},1169:function(e,t,n){"use strict";var a=n(6),o=n(10),r=n(9),i=n(7),c=n(37),s=n(8),l=n(0),u=n(1),d=n(3),p=n.n(d),h=n(20),f=n(422),b=n(862),m=n(889),v=(n(1250),function(e){function t(){var e,n;Object(a.a)(this,t);for(var o=arguments.length,s=new Array(o),u=0;u<o;u++)s[u]=arguments[u];return(n=Object(r.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(s)))).state={expanded:!0},n.handleTitleClick=function(e){h.a.trackEvent(Object(c.default)(n),{id:6121,action:"OpenUrl",element_name:"Title"}),window.open(e)},n.renderHeader=function(){var e=n.props,t=e.title,a=e.url,o=e.author;return Object(l.e)("div",{className:"AbstractCard-header"},Object(l.e)("div",{className:"AbstractCard-desc"},Object(l.e)("span",{className:"AbstractCard-title",onClick:function(){return n.handleTitleClick(a,t)}},t),Object(l.e)("span",{className:"AbstractCard-source"},n.abstractSourceInfo)),Object(l.e)(m.a,{zaId:6120,className:"AbstractCard-author",author:o,preset:"plain"}))},n.renderContent=function(){var e=n.props,t=e.content,a=e.member.name,o=e.theme;return Object(l.e)("div",{className:"AbstractCard-content"},Object(l.e)("div",{className:"AbstractCard-text AbstractCard-text--".concat(o)},t),Object(l.e)("div",{className:"AbstractCard-tip"},Object(l.e)("span",{className:"AbstractCard-info"},a," 摘录于 ",n.createdFormat)))},n}return Object(s.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){Object(b.onViewedOnce)(this.node,function(){h.a.trackCardShow(null,{id:6118})})}},{key:"render",value:function(){var e=this;return Object(l.e)("div",{className:"AbstractCard",ref:function(t){e.node=t}},this.renderHeader(),this.renderContent())}},{key:"abstractSourceInfo",get:function(){return"answer"===this.props.type?"下的回答内容摘录":"下的内容摘录"}},{key:"createdFormat",get:function(){var e=this.props.created;return Object(f.a)(e?new Date(1e3*e):new Date,"yyyy-MM-dd")}}]),t}(u.Component));v.propTypes={title:p.a.string.isRequired,url:p.a.string.isRequired,author:p.a.object,member:p.a.object,content:p.a.string.isRequired,created:p.a.number,theme:p.a.string.isRequired},t.a=v},1170:function(e,t,n){"use strict";function a(e,t){return!(!e||!t)&&(e.id===t.id&&void 0!==e.id||e.urlToken===t.urlToken&&void 0!==e.urlToken)}n.d(t,"a",function(){return a})},1201:function(e,t,n){},1222:function(e,t,n){"use strict";var a=n(1),o=n.n(a),r=n(17),i=function(e){return o.a.createElement(r.a,e,o.a.createElement("path",{d:"M4.076 16.966a4.19 4.19 0 0 1 1.05-1.76l8.568-8.569a.524.524 0 0 1 .741 0l2.928 2.927a.524.524 0 0 1 0 .74l-8.568 8.57c-.49.49-1.096.852-1.761 1.051l-3.528 1.058a.394.394 0 0 1-.49-.488l1.06-3.53zM20.558 4.83c.59.59.59 1.546 0 2.136l-1.693 1.692a.503.503 0 0 1-.712 0l-2.812-2.812a.504.504 0 0 1 0-.712l1.693-1.693a1.51 1.51 0 0 1 2.135 0l1.389 1.389z"}))};i.defaultProps={name:"Edit"},t.a=i},1224:function(e,t,n){"use strict";var a=n(1),o=n.n(a),r=n(17),i=function(e){return o.a.createElement(r.a,e,o.a.createElement("path",{d:"M19.947 3.129c-.633.136-3.927.639-5.697.385-3.133-.45-4.776-2.54-9.949-.888-.997.413-1.277 1.038-1.277 2.019L3 20.808c0 .3.101.54.304.718a.97.97 0 0 0 .73.304c.275 0 .519-.102.73-.304.202-.179.304-.418.304-.718v-6.58c4.533-1.235 8.047.668 8.562.864 2.343.893 5.542.008 6.774-.657.397-.178.596-.474.596-.887V3.964c0-.599-.42-.972-1.053-.835z",fillRule:"evenodd"}))};i.defaultProps={name:"Report"},t.a=i},1247:function(e,t,n){},1248:function(e,t,n){},1249:function(e,t,n){},1250:function(e,t,n){},1251:function(e,t,n){},1252:function(e,t,n){},1253:function(e,t,n){},1254:function(e,t,n){},1255:function(e,t,n){"use strict";var a=n(1256),o="Copy to clipboard: #{key}, Enter";e.exports=function(e,t){var n,r,i,c,s,l,u=!1;t||(t={}),n=t.debug||!1;try{if(i=a(),c=document.createRange(),s=document.getSelection(),(l=document.createElement("span")).textContent=e,l.style.all="unset",l.style.position="fixed",l.style.top=0,l.style.clip="rect(0, 0, 0, 0)",l.style.whiteSpace="pre",l.style.webkitUserSelect="text",l.style.MozUserSelect="text",l.style.msUserSelect="text",l.style.userSelect="text",document.body.appendChild(l),c.selectNode(l),s.addRange(c),!document.execCommand("copy"))throw new Error("copy command was unsuccessful");u=!0}catch(a){n&&console.error("unable to copy using execCommand: ",a),n&&console.warn("trying IE specific stuff");try{window.clipboardData.setData("text",e),u=!0}catch(a){n&&console.error("unable to copy using clipboardData: ",a),n&&console.error("falling back to prompt"),r=function(e){var t=(/mac os x/i.test(navigator.userAgent)?"⌘":"Ctrl")+"+C";return e.replace(/#{\s*key\s*}/g,t)}("message"in t?t.message:o),window.prompt(r,e)}}finally{s&&("function"==typeof s.removeRange?s.removeRange(c):s.removeAllRanges()),l&&document.body.removeChild(l),i()}return u}},1256:function(e,t){e.exports=function(){var e=document.getSelection();if(!e.rangeCount)return function(){};for(var t=document.activeElement,n=[],a=0;a<e.rangeCount;a++)n.push(e.getRangeAt(a));switch(t.tagName.toUpperCase()){case"INPUT":case"TEXTAREA":t.blur();break;default:t=null}return e.removeAllRanges(),function(){"Caret"===e.type&&e.removeAllRanges(),e.rangeCount||n.forEach(function(t){e.addRange(t)}),t&&t.focus()}}},1257:function(e,t,n){},1368:function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return i});var a=n(26),o=n(1141),r=function(e,t){switch(e){case"answer":return"https://www.zhihu.com/answer/".concat(t);case"book":return"https//www.zhihu.com/pub/book/".concat(t);case"article":return"https://zhuanlan.zhihu.com/p/".concat(t);case"live":return"https://www.zhihu.com/lives/".concat(t);case"remix_album":case"remix":return"https://www.zhihu.com/remix/albums/".concat(t);case"pin":return"https://www.zhihu.com/pin/".concat(t);case"question":return"https://www.zhihu.com/question/".concat(t);default:return""}},i=function(e,t){var n=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];try{if(!e||"string"!=typeof e)return"";if(!t||"object"!=typeof t)return e;var r=e.split("#"),i=Object(a.a)(r,2),c=i[0],s=i[1],l=void 0===s?"":s,u=c.split("?"),d=Object(a.a)(u,2),p=d[0],h=d[1],f=Object(o.parse)(h),b=n?Object.assign({},f,{},t):Object.assign({},t,{},f),m=function(e,t){return t?e+t:""};return p+m("?",Object(o.stringify)(b))+m("#",l)}catch(t){return console.error(t),e}}},1375:function(e,t,n){"use strict";var a=n(1),o=n.n(a),r=n(17),i=function(e){return o.a.createElement(r.a,e,o.a.createElement("path",{d:"M18.453 7.992l-1.833-1.65.964-.978a1.223 1.223 0 0 1 1.73-.012l.005.006a1.24 1.24 0 0 1 .007 1.748l-.873.886zm-1.178 1.194l-5.578 5.66-1.935.697a.393.393 0 0 1-.504-.504l.697-1.935 5.488-5.567 1.832 1.65zM7.58 5.848l5.654.006-1.539 1.991-3.666.012A1.02 1.02 0 0 0 7 8.868v7.993c0 .558.46 1.01 1.029 1.01l7.941-.01c.568 0 1.03-.453 1.03-1.012v-4.061l2-1.442v6.002c0 1.397-1.2 2.501-2.62 2.501H7.574C6.153 19.85 5 18.717 5 17.32V8.35c0-1.397 1.16-2.502 2.58-2.502z"}))};i.defaultProps={name:"EditSurround"},t.a=i},1376:function(e,t,n){"use strict";var a=n(1),o=n.n(a),r=n(17),i=function(e){return o.a.createElement(r.a,e,o.a.createElement("path",{d:"M6 3.956v16.088C6 21.124 6.517 22 7.9 22c.326 0 .533-.087.896-.236L22 13.784c.571-.355 1.143-.87 1.143-1.784S22.57 10.571 22 10.216L8.796 2.236C8.433 2.087 8.226 2 7.9 2 6.514 2 6 2.876 6 3.956z"}))};i.defaultProps={name:"Play"},t.a=i},1378:function(e,t,n){"use strict";var a=n(24),o=n(1),r=n.n(o),i=function e(t){var n=function(e,t){return Object.keys(t).reduce(function(e,n){var a=e[n];if(delete e[n],a){var o=t[n],r="function"==typeof o?o(e):o;return Object.assign({},e,{},r,{},r&&r.style&&{style:Object.assign({},e.style,{},r.style)})}return e},Object.assign({},e))}(t,e.mapProps),o=n.name,i=n.className,c=n.defaultClassName,s=n.size,l=n.center,u=Object(a.a)(n,["name","className","defaultClassName","size","center"]),d=r.a.createElement("svg",Object.assign({className:"".concat(c," ").concat(c,"--").concat(o).concat(i?" ".concat(i):"")},u,s&&{width:s,height:s}));return l?r.a.createElement("span",{style:e.strutStyle},"​",d):d};i.defaultProps={defaultClassName:"Icon",fill:"currentColor"},i.mapProps={text:{size:"1.2em"}},i.strutStyle={display:"inline-flex",alignItems:"center"},t.a=i},1387:function(e,t,n){"use strict";var a=n(1),o=n.n(a),r=n(17),i=function(e){return o.a.createElement(r.a,e,o.a.createElement("path",{d:"M5 14a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm7 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4zm7 0a2 2 0 1 1 0-4 2 2 0 0 1 0 4z",fillRule:"evenodd"}))};i.defaultProps={name:"Dots"},t.a=i},1391:function(e,t,n){"use strict";var a=n(1),o=n.n(a),r=n(17),i=function(e){return o.a.createElement(r.a,e,o.a.createElement("path",{d:"M12 13L8.285 9.218a.758.758 0 0 0-1.064 0 .738.738 0 0 0 0 1.052l4.249 4.512a.758.758 0 0 0 1.064 0l4.246-4.512a.738.738 0 0 0 0-1.052.757.757 0 0 0-1.063 0L12.002 13z",fillRule:"evenodd"}))};i.defaultProps={name:"ArrowDown"},t.a=i},1428:function(e,t,n){"use strict";var a,o,r,i=n(16),c=n(24),s=n(6),l=n(10),u=n(9),d=n(7),p=n(8),h=n(0),f=n(1),b=n(3),m=n.n(b),v=n(21),g=n(81),O=n.n(g),j=n(22),y=n(175),C=n(54),k=n(18),w=n(1088),N=function(e,t){var n=e.entities.questions[t.answer.question.id];return n&&n.voteDownReason},S={loadSwitches:y.b,showNotification:j.h,updateAnswerVote:C.K,getVoteDownReason:C.j,selectVoteDownReason:C.B,setOpposeRightStatus:y.e},x=Object(v.connect)(function(e,t){return{voteDownReason:N(e,t),opposeRightStatusIsOn:Object(y.d)(e)}},S)((r=o=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).handleVote=n.context.authRequired(function(e){var t=n.props,a=t.answer;(0,t.updateAnswerVote)(a.id,e)},k.U.vote),n.handleLoadVoteDownReason=function(){var e=n.props,t=e.answer;(0,e.getVoteDownReason)(t.id,t.question.id)},n.handleSelectVoteDownReason=function(e){var t=n.props,a=t.answer,o=t.selectVoteDownReason,r=t.showNotification;o(a.id,e.reasonId).then(function(e){r(e.payload.message)})},n.handleSetShowVoteDownReason=function(e){(0,n.props.setOpposeRightStatus)(e)},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.loadSwitches;this.shouldShowVoteDownMenu&&e(["opposeRight"])}},{key:"render",value:function(){var e=this.props,t=e.answer,n=e.voteDownReason,a=e.opposeRightStatusIsOn,o=Object(c.a)(e,["answer","voteDownReason","opposeRightStatusIsOn"]);return Object(h.e)(w.a,Object(i.default)({count:t.voteupCount,voting:t.relationship&&t.relationship.voting,isOwner:t.relationship&&t.relationship.isAuthor,isShowVoteDownMenu:this.shouldShowVoteDownMenu&&a,onVote:this.handleVote,voteDownReason:n,onLoadVoteDownReason:this.handleLoadVoteDownReason,onSelectVoteDownReason:this.handleSelectVoteDownReason,onSetVoteDownReason:this.handleSetShowVoteDownReason},O()(o,Object.keys(S))))}},{key:"shouldShowVoteDownMenu",get:function(){return Boolean(!this.props.disabled&&this.context.currentUser)}}]),t}(f.Component),o.contextTypes={currentUser:m.a.object,authRequired:m.a.func},a=r))||a;t.a=x},1429:function(e,t,n){},1432:function(e,t,n){},1433:function(e,t,n){},1434:function(e,t,n){},1435:function(e,t,n){},1436:function(e,t,n){},1437:function(e,t,n){},1438:function(e,t,n){},1439:function(e,t,n){},1441:function(e,t,n){},1444:function(e,t,n){"use strict";var a=n(21);t.a=function(){var e=Object(a.useSelector)(function(e){var t,n;return null===(t=e.env)||void 0===t?void 0:null===(n=t.ctx)||void 0===n?void 0:n.path});return Boolean(e.match(/\/club\/feeds$/))}},1445:function(e,t,n){"use strict";n.d(t,"a",function(){return W}),n.d(t,"b",function(){return se});var a=n(0),o=n(1),r=n.n(o),i=n(21),c=n(6),s=n(10),l=n(9),u=n(7),d=n(37),p=n(8),h=n(3),f=n.n(h),b=n(299),m=n.n(b),v=n(13),g=n.n(v),O=n(857),j=n(862),y=n(198),C=n(20);n(1434);function k(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var w="dark",N="light",S=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o))),k(Object(d.default)(n),"handleClick",function(e,t){var a=n.props.onClick;C.a.trackEvent(n.node,{id:4240,action:"OpenUrl",name:t},{link:{url:e,anchor:t}}),a&&a({target:n.node})}),n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.goodsCard.body.link;Object(j.onViewedOnce)(this.node,function(){C.a.trackCardShow(e.node,{id:4241,name:"课程"},{link:{url:t,anchor:"课程"}})})}},{key:"render",value:function(){var e=this,t=this.props,n=t.theme,a=t.zaInfo,o=t.goodsCard,i=t.className,c=n===w,s=o.header,l=s.title,u=s.subTitle,d=o.body,p=d.title,h=d.cover,f=d.coverLabel,b=d.link,m=d.desc,v=d.label,j=d.vipNote,C=o.catalog;return r.a.createElement(r.a.Fragment,null,r.a.createElement("section",{className:g()("KfeCollection-GoodsCardV2",i),"data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[a]}})},r.a.createElement("h1",{className:"KfeCollection-GoodsCardV2-header"},"".concat(l).concat(u?" · ".concat(u):"")),r.a.createElement("a",{href:b,target:"_blank",rel:"noopener noreferrer",className:"KfeCollection-GoodsCardV2-content",onClick:function(){return e.handleClick(b,p)},ref:function(t){return e.node=t}},r.a.createElement("div",{className:"KfeCollection-GoodsCardV2-cover"},r.a.createElement("img",{className:g()("KfeCollection-GoodsCardV2-cover-img",{"KfeCollection-GoodsCardV2-cover-img--dark":c}),src:Object(y.imgUrl)(h,{size:"200x0"})}),r.a.createElement("div",{className:"KfeCollection-GoodsCardV2-cover-label"},f)),r.a.createElement("div",{className:"KfeCollection-GoodsCardV2-detail"},r.a.createElement("div",null,r.a.createElement("h2",{className:"KfeCollection-GoodsCardV2-detail-title"},p),m&&r.a.createElement("p",{className:"KfeCollection-GoodsCardV2-detail-desc"},m),r.a.createElement("p",{className:"KfeCollection-GoodsCardV2-detail-label"},v)),r.a.createElement("p",{className:"KfeCollection-GoodsCardV2-detail-vipNote",dangerouslySetInnerHTML:{__html:j}}))),C&&C.length>0&&r.a.createElement("div",{className:"KfeCollection-GoodsCardV2-catalog"},"章节目录",r.a.createElement("div",{className:"KfeCollection-GoodsCardV2-catalogSectionList"},C.map(function(e){var t=e.manuscriptUrl,n=e.sectionId,a=e.title;return r.a.createElement("a",{className:"KfeCollection-GoodsCardV2-catalogSectionItem",href:t,key:n,"data-za-detail-view-id":7500,"data-za-extra":JSON.stringify({button:{text:a}})},a,r.a.createElement(O.a,{className:"KfeCollection-GoodsCardV2-catalogSectionItemIcon"}))})))))}}]),t}(r.a.Component);k(S,"propTypes",{theme:f.a.oneOf([w,N]),onClick:f.a.func}),k(S,"defaultProps",{theme:N});var x=S,T=n(23),I=n(17),E=function(e){return r.a.createElement(I.a,e,r.a.createElement("path",{d:"M9 9.185v5.63c0 .378.18.685.665.685.114 0 .187-.03.314-.083l4.621-2.793c.2-.124.4-.304.4-.624s-.2-.5-.4-.624L9.979 8.583c-.127-.053-.2-.083-.314-.083-.485 0-.665.307-.665.685z"}))};E.defaultProps={name:"TriangleArrowRight"};var L=E;n(1433);function P(e){e.hasPurchased;var t=e.header,n=void 0===t?{}:t,a=e.onClick,o=n.title,i=n.subTitle,c=n.link;return r.a.createElement("a",{href:c,target:"_blank",rel:"noopener noreferrer",className:"KfeCollection-GoodsCardV3-header",onClick:a},r.a.createElement("div",{className:"KfeCollection-GoodsCardV3-headerTitle"},o),r.a.createElement("div",{className:"KfeCollection-GoodsCardV3-headerSubTitle"},r.a.createElement("div",null,i),r.a.createElement(L,{className:"KfeCollection-GoodsCardV3-headerIcon"})))}var A=function(e){var t=Object(o.useRef)(),n=e.className,a=e.zaInfo,i=e.goodsCard,c=e.shelvesInfo,s=e.onBookshelfButtonClick,l=void 0===s?m.a:s,u=e.theme,d=void 0===u?"light":u,p=e.hasPurchased,h=e.onClick,f=i.header,b=i.body,v=i.body,k=v.title,w=v.cover,N=v.coverLabel,S=v.link,x=v.desc,I=v.label,E=v.vipNote,L=v.icons,A=v.heatNote;Object(o.useEffect)(function(){Object(j.onViewedOnce)(t.current,function(){C.a.trackCardShow(t.current,{id:8467,name:b.title},{button:{text:f.title}})})},[b,f]);var M=Object(o.useCallback)(function(e){C.a.trackEvent(e.target,{id:8468,action:"OpenUrl",name:b.title},{link:{url:f.link},button:{text:f.title}})},[b,f]),R=Object(o.useCallback)(function(e){C.a.trackEvent(e.target,{id:8469,action:"OpenUrl",name:b.title},{link:{url:b.link},button:{text:f.title}}),h&&h(e)},[b,f]),_=Object(o.useCallback)(function(e){var t=(null==c?void 0:c.whetherInShelf)?"去书架查看":"加入书架";C.a.trackEvent(e.target,{id:8294,action:"OpenUrl",name:b.title},{link:{url:b.link},button:{text:t}}),l(e)},[b,l,c]);return r.a.createElement("section",{className:g()("KfeCollection-GoodsCardV3",n),"data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[a]}})},r.a.createElement(P,{header:f,hasPurchased:p,onClick:M}),r.a.createElement("a",{href:S,target:"_blank",rel:"noopener noreferrer",className:g()("KfeCollection-GoodsCardV3-content","KfeCollection-GoodsCardV3-content--topHeader"),onClick:R,ref:t},r.a.createElement("div",{className:"KfeCollection-GoodsCardV3-cover"},r.a.createElement("img",{className:"KfeCollection-GoodsCardV3-coverVip",src:"light"===d?null==L?void 0:L.leftTopDayIcon:null==L?void 0:L.leftTopNightIcon,alt:""}),r.a.createElement("img",{className:g()("KfeCollection-GoodsCardV3-coverImage"),src:Object(y.imgUrl)(w,{size:"200x0"})}),r.a.createElement("div",{className:"KfeCollection-GoodsCardV3-coverLabel"},N)),r.a.createElement("div",{className:"KfeCollection-GoodsCardV3-detail"},k&&r.a.createElement("h2",{className:"KfeCollection-GoodsCardV3-detailTitle"},k),x&&r.a.createElement("p",{className:"KfeCollection-GoodsCardV3-detailDescription"},x),I&&r.a.createElement("p",{className:"KfeCollection-GoodsCardV3-detailLabel"},I),A?r.a.createElement("p",{className:"KfeCollection-GoodsCardV3-detailHeatNote"},A):E&&r.a.createElement("p",{className:"KfeCollection-GoodsCardV3-detailVipNote",dangerouslySetInnerHTML:{__html:E}}),c&&r.a.createElement(T.d,{className:"KfeCollection-GoodsCardV3-bookshelfButton",preset:"plain",color:"grey",onClick:_},c.whetherInShelf?"去书架查看":"加入书架",r.a.createElement(O.a,{text:!0,center:!0})))))};function M(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var R=function(e){function t(){var e,n;Object(c.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(o))),M(Object(d.default)(n),"renderCard",function(){var e=n.props,t=e.hasPurchased,a=e.result,o=void 0===a?{}:a,i=e.theme,c=e.onBookshelfButtonClick,s=void 0===c?m.a:c,l=e.onClick,u=e.className,d=(o.abCtx,o.goodsCard),p=(o.btnInfo,o.shelvesInfo),h=(o.progressInfo,o.zaInfo);return t?r.a.createElement(A,{goodsCard:d,zaInfo:h,hasPurchased:t,shelvesInfo:t?p:null,onBookshelfButtonClick:s,onClick:l,theme:i,className:u}):r.a.createElement(x,{goodsCard:d,zaInfo:h,onClick:l,className:u})}),n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){return this.renderCard()}}]),t}(r.a.Component);M(R,"propTypes",{result:f.a.object.isRequired,theme:f.a.string,hasPurchased:f.a.bool,onBookshelfButtonClick:f.a.func}),M(R,"defaultProps",{result:{goodsCard:{},btnInfo:{},progressInfo:{},zaInfo:{}}});var _=R,z=n(67);n(1432);var B=function(e){function t(){var e,n,a,o,r;Object(c.a)(this,t);for(var i=arguments.length,s=new Array(i),p=0;p<i;p++)s[p]=arguments[p];return n=Object(l.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(s))),a=Object(d.default)(n),r=function(e,t){var a=n.props.onClick;C.a.trackEvent(n.node,{id:4240,action:"OpenUrl",name:t},{link:{url:e,anchor:t}}),"function"==typeof a&&a(n.node)},(o="handleClick")in a?Object.defineProperty(a,o,{value:r,enumerable:!0,configurable:!0,writable:!0}):a[o]=r,n}return Object(p.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.btnInfo,n=t.btnText,a=t.link;z.a.dispatch("vip/preloadVIPHybridPopup",{url:a}),Object(j.onViewedOnce)(this.node,function(){C.a.trackCardShow(e.node,{id:4241,name:n},{link:{url:a,anchor:n}})})}},{key:"render",value:function(){var e=this,t=this.props,n=t.btnInfo,a=t.zaInfo,o=void 0===a?{}:a,i=t.className,c=n.btnText,s=n.link;return r.a.createElement("div",{className:g()("KfeCollection-PurchaseBtn",i)},r.a.createElement("div",{className:"KfeCollection-PurchaseBtn-mask"}),r.a.createElement("a",{className:"KfeCollection-PurchaseBtn-HybridLink",href:s,target:"_blank",rel:"noopener noreferrer",onClick:function(){return e.handleClick(s,c)},ref:function(t){return e.node=t},"data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[o]}})},r.a.createElement("span",{className:"KfeCollection-PurchaseBtn-text"},c)," ",r.a.createElement(O.a,{className:"KfeCollection-PurchaseBtn-ArrowRight"})))}}]),t}(r.a.Component),D=n(223),V=n(54),F=n(33);function H(e){var t=e.id,n=e.children,a=Object(o.useRef)(),c=Object(i.useDispatch)();return Object(o.useEffect)(function(){var e=a.current;if(t&&e){var n=e instanceof Element?e:Object(F.findDOMNode)(e);n&&Object(j.onViewedOnce)(n,function(){return c(Object(V.x)(t))})}},[c,t]),r.a.cloneElement(n,{ref:a})}H.propTypes={id:f.a.oneOfType([f.a.number,f.a.string]).isRequired};var U=Object(D.a)(null)(H);function q(e){var t,n=e.answer,o=(Object(i.useSelector)(function(e){return Object(V.y)(e,null==n?void 0:n.id)})||{}).result;if(!o)return null;var c=null==n?void 0:null===(t=n.paidInfo)||void 0===t?void 0:t.hasPurchased,s=o.btnInfo,l=o.zaInfo;return Object(a.e)(r.a.Fragment,null,Object(a.e)(U,{id:n.id},Object(a.e)("div",null)),!c&&s&&Object(a.e)(B,{btnInfo:s,zaInfo:l}),Object(a.e)(_,{className:"AnswerItem-GoodsCard",result:o,hasPurchased:c}))}var W=Object(D.a)(null)(function(e){var t=e.answer;return"paid"===(null==t?void 0:t.answerType)?Object(a.e)(q,{answer:t}):null}),K=n(26),G=function(e){return function(e){if(!window)return null;try{var t=document.createElement("div");t.innerHTML=e;var n=Array.from(t.childNodes),a=Object(K.a)(n,3),o=a[0].nodeValue,r=a[1],i=r.innerText,c=r.attributes,s=a[2].nodeValue,l={},u=!0,d=!1,p=void 0;try{for(var h,f=c[Symbol.iterator]();!(u=(h=f.next()).done);u=!0){var b=h.value;l[b.name]=b.value}}catch(e){d=!0,p=e}finally{try{u||null==f.return||f.return()}finally{if(d)throw p}}return o&&i&&s?{prefixText:o,content:i,status:s,linkInfo:{name:"a",attr:l}}:null}catch(e){return null}}(e)},Q=(n(1439),function(e){var t=e.content;t=void 0===t?[]:t;var n=Object(K.a)(t,2),a=n[0],o=n[1],i=e.className,c=e.onClick;return r.a.createElement("div",{className:g()("KfeCollection-CertainEndEllipsis",i),onClick:c},r.a.createElement("div",{className:"KfeCollection-CertainEndEllipsis-start"},a),r.a.createElement("div",{className:"KfeCollection-CertainEndEllipsis-end"},o))}),Z=function(e){var t=e.contentName,n=e.fallbackContent,a=e.onClick,i=Object(o.useMemo)(function(){return G(t)},[t]);if(null===i)return n;var c=i.prefixText,s=i.content,l=i.status,u=i.linkInfo,d=u.name,p=r.a.createElement(r.a.Fragment,null,c,r.a.createElement(d,u.attr,s.slice(0,-1))),h=r.a.createElement(r.a.Fragment,null,r.a.createElement(d,u.attr,s.slice(-1)),l);return r.a.createElement(Q,{onClick:a,content:[p,h],className:"KfeCollection-PaidContentNameCertainEndEllipsis"})},J=(n(1438),function(e,t){var n=e.target,a=e.target,o=a.text,r=a.href;"A"===a.tagName&&C.a.trackEvent(n,{id:t,action:"OpenUrl"},{button:{text:o},link:{url:r}})});var Y=function(e){var t=e.introCard,n=e.RichTextComponent,a=e.className,o=e.zaInfo,i=t.statement,c=t.description,s=t.contentName,l=t.authorDesc;return r.a.createElement("section",{className:g()("KfeCollection-IntroCard",a),"data-za-module":"Content","data-za-extra-module":JSON.stringify({card:{content:[o]}})},!!i&&r.a.createElement("p",null,i),!!c&&r.a.createElement("p",null,c),(!!i||!!c)&&r.a.createElement("p",{className:"KfeCollection-IntroCard-spacing"}),r.a.createElement(Z,{contentName:s,onClick:function(e){return J(e,5326)},fallbackContent:r.a.createElement("p",{onClick:function(e){return J(e,5326)},className:"KfeCollection-IntroCard-contentName",dangerouslySetInnerHTML:{__html:s}})}),n?r.a.createElement(n,{className:"KfeCollection-IntroCard-authorDesc",html:l,onClick:function(e){return J(e,5325)}}):r.a.createElement("p",{onClick:function(e){return J(e,5325)},className:"KfeCollection-IntroCard-authorDesc",dangerouslySetInnerHTML:{__html:l}}))},X=n(1663),$=n(1378),ee=function(e){return r.a.createElement($.a,Object.assign({viewBox:"0 0 140 43"},e),r.a.createElement("defs",null,r.a.createElement("rect",{id:"zhimg_ic_primelabel_01@2x-a",width:"70",height:"30",x:"0",y:"0"})),r.a.createElement("g",{fillRule:"evenodd",transform:"translate(0 -6)"},r.a.createElement("path",{fillRule:"nonzero",d:"M80.0023638,2.63706979 L129.732029,30.638653 C135.976314,34.154746 139.822785,40.6523917 139.822785,47.6843672 L139.822785,103.687744 C139.822785,110.719509 135.976314,117.217365 129.732029,120.733248 L80.0023638,148.734831 C73.758079,152.250924 66.0649216,152.250924 59.8206368,148.734831 L10.0909714,120.733248 C3.84668657,117.217365 -7.10542736e-14,110.719509 -7.10542736e-14,103.687744 L-7.10542736e-14,47.6843672 C-7.10542736e-14,40.6523917 3.84668657,34.154746 10.0909714,30.638653 L59.8206368,2.63706979 C66.0649216,-0.879023264 73.758079,-0.879023264 80.0023638,2.63706979 Z M62.8214584,21.9369801 L62.4917192,22.1167713 L25.9257887,42.6512656 C21.4364336,45.1724346 18.6325361,49.7839786 18.5101354,54.8082708 L18.5059568,55.1514561 L18.5059568,96.2205991 C18.5059568,101.262635 21.2100909,105.930346 25.6223198,108.545528 L25.9257887,108.720635 L62.4917192,129.25513 C66.9737863,131.772206 72.4710741,131.832136 77.0014851,129.434921 L77.3312243,129.25513 L113.897155,108.720635 C118.38651,106.199617 121.190256,101.587929 121.31265,96.5637746 L121.316828,96.2205991 L121.316828,55.1514561 C121.316828,50.1092692 118.612846,45.4417025 114.200623,42.826383 L113.897155,42.6512656 L77.3312243,22.1167713 C72.8491571,19.5996952 67.3518694,19.5397648 62.8214584,21.9369801 Z M69.2442049,35.8512397 L88.2394468,68.1217272 L103.868354,54.7872625 L103.868354,94.6758324 C103.868354,97.7547043 101.333778,100.250689 98.2071383,100.250689 L40.2839921,100.24974 C37.1573717,100.249699 34.6227848,97.7537776 34.6227848,94.674925 L34.6227848,54.7872625 L50.2512033,68.1217272 L69.2442049,35.8512397 Z",mask:"url(#zhimg_ic_primelabel_01@2x-b)",opacity:".54"})))};ee.defaultProps={name:"PrivilegeLabel"};var te=ee,ne=(n(1437),function(e){var t=e.data,n=e.className,a=t||{},o=a.vipText,i=a.worthText,c=a.cardColor;return 0===(void 0===c?0:c)?null:r.a.createElement("div",{className:g()("KfeCollection-Privilege",n)},r.a.createElement(X.a,{className:"KfeCollection-Privilege-vipIcon"}),r.a.createElement("div",{className:"KfeCollection-Privilege-content"},r.a.createElement("span",{className:"KfeCollection-Privilege-vipText"},o),r.a.createElement("span",null," ".concat(i))),r.a.createElement(te,{className:"KfeCollection-Privilege-label"}))}),ae=(n(1436),function(e){var t=e.data,n=e.className,a=t||{},o=a.worthText,i=a.cardColor;return 2!==(void 0===i?0:i)?null:r.a.createElement("div",{className:g()("KfeCollection-OrdinaryLabel",n)},r.a.createElement("div",{className:"KfeCollection-OrdinaryLabel-content"},o))});n(1435);function oe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var re=function(e){function t(){return Object(c.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(s.a)(t,[{key:"render",value:function(){var e=this.props.result,t=e.introCard,n=e.vipWorthInfo,a=(n||{}).cardColor;return r.a.createElement("div",{className:"KfeCollection-AnswerTopCard-Container"},2===a?r.a.createElement(ae,{data:n}):r.a.createElement(ne,{data:n,className:"KfeCollection-AnswerTopCard-Privilege"}),t?r.a.createElement(Y,{introCard:t}):null)}}]),t}(r.a.Component);oe(re,"propTypes",{className:f.a.string,result:f.a.object.isRequired}),oe(re,"defaultProps",{result:{articleDesc:{},vipWorthInfo:{},goodsCard:{},btnInfo:{},progressInfo:{},zaInfo:{}},extra:{ua:{}}});var ie=re,ce=function(e){var t=e.answer,n=Object(i.useSelector)(function(e){return Object(V.y)(e,null==t?void 0:t.id)})||{},r=n.isRequesting,c=n.error,s=n.result,l=Boolean(!r&&!c&&!s),u=Object(i.useDispatch)();return Object(o.useEffect)(function(){l&&u(Object(V.u)(t.id))},[l,u,t.id]),Object(a.e)(ie,{result:s})},se=Object(D.a)(null)(function(e){var t=e.answer;return"paid"===(null==t?void 0:t.answerType)?Object(a.e)(ce,{answer:t}):null})},1458:function(e,t,n){"use strict";n.d(t,"a",function(){return b}),n.d(t,"b",function(){return m});var a=n(6),o=n(10),r=n(9),i=n(7),c=n(8),s=n(0),l=n(1),u=n(67),d=n(299),p=n.n(d),h=n(1527),f=n(1131),b=Object(l.createContext)({}),m=function(e){function t(){var e,n;Object(a.a)(this,t);for(var o=arguments.length,c=new Array(o),s=0;s<o;s++)c[s]=arguments[s];return(n=Object(r.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).handleNotLogin=function(e,t){Object(f.b)(n.props.router.location.pathname,t),e()},n.handleIsSilenced=function(e){return u.a.dispatch("ui/showToast",{icon:"fail",text:"已在该圈子被禁言，无法进行该操作"}).then(e,e)},n.handleIsReset=function(e){var t=n.props,a=t.loginMask,o=(a=void 0===a?{}:a).id,r=t.router,i=t.ua,c=r.params.id,s=r.location.pathname;return Object(h.b)({title:"提示",content:"圈子帐号存在异常，请修改圈子内的个人信息",affirm:"去修改",dismiss:"取消"}).then(function(t){if(t){var n=!s.match(/\/club\/\d+\/post\/\d+$/);Object(f.d)(c,o,{router:r,ua:i,isSoft:n})}e()},e)},n.handleToAuthenticatePage=function(e){var t=n.props.ua;return Object(h.b)({title:"提示",content:"你的知乎帐号未实名认证，暂时无法进行该操作",affirm:"去实名认证",dismiss:"取消"}).then(function(n){if(n){var a="https://www.zhihu.com/authenticate/select";t.ZhihuHybrid?u.a.dispatch("base/openURL",{url:a}):location.href=a}e()},e)},n.handleNotNormal=function(e){u.a.dispatch("ui/showToast",{icon:"fail",text:"知乎帐号存在异常，无法进行该操作"}).then(e,e)},n.authRequired=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:p.a,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:p.a,a=arguments.length>2?arguments[2]:void 0;return function(){var o=n.props,r=o.currentUser,i=(r=void 0===r?{}:r).userType,c=r.accountStatus,s=void 0===c?[]:c,l=r.isRealname,u=o.loginMask,d=(u=void 0===u?{}:u).maskStatus,p=o.ua,h=d||{},f=h.isSilenced,b=h.isReset;i&&"guest"!==i?f&&!a?n.handleIsSilenced(t):b&&!a?n.handleIsReset(t):s.length>0?n.handleNotNormal(t):l?e.apply(void 0,arguments):n.handleToAuthenticatePage(t):n.handleNotLogin(t,p)}},n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.currentUser,n=e.loginMask,a=function(e){var t=e||{},n=t.accountStatus,a=void 0===n?[]:n,o=t.isRealname;return e&&"guest"!==e.userType&&0===a.length&&o}(t),o=function(e){var t=(e||{}).maskStatus,n=(t=void 0===t?{}:t).isSilenced,a=t.isReset;return!n&&!a}(n),r=Boolean(null==t?void 0:t.urlToken);return Object(s.e)(b.Provider,{value:{authRequired:this.authRequired,isUserAllowed:a,isMaskAllowed:o,isCurrentUserLoaded:r}},this.props.children)}}]),t}(l.Component)},1464:function(e,t,n){"use strict";n.d(t,"a",function(){return S}),n.d(t,"b",function(){return I});var a=n(24),o=n(26),r=n(0),i=n(1),c=n(21),s=n(299),l=n.n(s),u=n(67),d=n(1131),p=n(13),h=n.n(p),f=n(20),b=n(351),m=n(61),v=n(222),g=n(1098),O=n(1100),j=(n(1679),function(e){var t=e.handleCloseModal,n=e.clubApplicationModalShown,a=e.verifyQuestion,s=e.desc,l=e.handleSubmit,u=e.placeholder,d=void 0===u?"请输入验证回答答案":u,p=e.buttonText,j=void 0===p?"提交":p,y=e.title,C=void 0===y?"申请加入":y,k=e.clubId,w=Object(O.a)(),N=Object(i.useState)(""),S=Object(o.a)(N,2),x=S[0],T=S[1],I=Object(i.useRef)([0,0]),E=Object(c.useSelector)(function(e){return e.env.userAgent.ZhihuHybrid});Object(i.useEffect)(function(){n&&k&&f.a.trackCardShow(null,{id:8115,name:a},{module:[{card:{content:[{id:k}]}}]})},[n,k,a]);var L=Object(i.useCallback)(function(){k&&f.a.trackEvent(null,{id:8116,action:"Click",name:a},{module:[{card:{content:[{id:k}]}}]}),l(x)},[a,k,l,x]),P=Object(i.useCallback)(function(e){return T(e.currentTarget.value)},[T]),A=Object(i.useCallback)(function(){I.current=[window.scrollX,window.scrollY]},[]),M=Object(i.useCallback)(function(){if(E){var e=Object(o.a)(I.current,2),t=e[0],n=e[1];window.scrollTo(t,n)}},[E]);return Object(r.e)(m.b,{className:h()("ClubApplicationModal-modal",{"ClubApplicationModal-modalWithDetailPage":w}),onClose:t,closeButton:Object(r.e)(b.a,{size:24,className:"ClubApplicationModal-modalCloseButton",onClick:t})},n&&Object(r.e)(v.e,{zaType:"Popup",zaBlock:"ClubApplication",className:"ClubApplicationModal-modalWrapper",onClick:function(e){e.stopPropagation()}},Object(r.e)("p",{className:"ClubApplicationModal-title"},C),Object(r.e)("p",{className:"ClubApplicationModal-desc",dangerouslySetInnerHTML:{__html:a?"验证问题：".concat(a):s}}),Object(r.e)(g.a,{className:"ClubApplicationModal-answer",placeholder:d,value:x,onChange:P,onFocus:A,onBlur:M,large:!0,maxLength:100,autoFocus:!0}),Object(r.e)("p",{className:"ClubApplicationModal-count"},x.length,"/100"),Object(r.e)(v.a,{as:"button",zaType:"Button",zaBlock:"SubmitClubApplication",zaText:!0,className:h()("ClubApplicationModal-button",{"ClubApplicationModal-buttonWithSave":x}),disabled:!x,onClick:L},j)))}),y=n(1444),C=n(1549),k=n(1458),w=n(1680).default,N=Object(i.createContext)({}),S=function(e){var t,n=e.theme,a=e.isJoined,c=e.handleJoinClub,s=e.children,d=e.joinType,p=e.verifyQuestion,h=e.requestJoinClub,f=e.showApplicationModal,b=e.clubId,m=e.onSubmitSuccess,v=Object(O.a)(),g=Object(y.a)(),C=Object(i.useState)(!1),k=Object(o.a)(C,2),S=k[0],x=k[1],T=(t=Object(i.useRef)(l.a),[Object(i.useCallback)(function(){t.current(),t.current=l.a},[]),Object(i.useCallback)(function(e){t.current=e},[])]),I=Object(o.a)(T,2),E=I[0],L=I[1],P=Object(i.useCallback)(function(){g||x(!0)},[g]),A=Object(i.useState)("true"===f),M=Object(o.a)(A,2),R=M[0],_=M[1],z=Object(i.useCallback)(function(){return x(!1)},[]),B=Object(i.useCallback)(function(e){e.stopPropagation(),_(!1)},[_]),D=Object(i.useCallback)(function(){"all"===d?c().then(function(){z(),E()}):(z(),_(!0))},[z,E,c,d,_]),V=Object(i.useCallback)(function(e){h(e).then(function(){_(!1),u.a.dispatch("ui/showToast",{icon:"success",text:"提交成功"}),m&&m(e)})},[m,h]),F=Object(i.useCallback)(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.isReaction,o=t.isJoinButton;return function(){for(var t=arguments.length,r=new Array(t),i=0;i<t;i++)r[i]=arguments[i];a?e.apply(void 0,r):o?"verify"===d?_(!0):e.apply(void 0,r):n?"verify"===d?P():e.apply(void 0,r):"verify"===d?P():(L(function(){return e.apply(void 0,r)}),P())}},[a,d,P,L,_]);return Object(r.e)(N.Provider,{value:{joinRequired:F,isJoined:a,openModal:P}},s,Object(r.e)(w,{handleCloseModal:z,maskBackground:"dark"===n?"https://zhstatic.zhihu.com/heifetz/club/images/zhimg_circle_ic_dialog_normal_night.png":"https://zhstatic.zhihu.com/heifetz/club/images/zhimg_circle_ic_dialog_normal.png",title:"加入圈子",content:"all"===d?"加入圈子才能和圈内好友互动和发帖":"该圈子设置了验证问题，需要申请才可加入",handleRead:D,buttonContent:"all"===d?"加入":"申请加入圈子",isPostDetail:v,maskModalShown:S}),Object(r.e)(j,{isPostDetail:v,clubApplicationModalShown:R,verifyQuestion:p,handleSubmit:V,handleCloseModal:B,clubId:b}))},x=function(e){return e.env.userAgent.Zhihu},T=function(e){return function(){return e.apply(void 0,arguments)}},I=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.oia,o=void 0===n||n,r=Object(a.a)(t,["oia"]),s=Object(c.useSelector)(x),l=Object(C.a)(),u=Object(i.useContext)(k.a),p=u.authRequired,h=Object(i.useContext)(N),f=h.joinRequired;return!s&&o?d.a:l?T(e):p(f(e,r))}},1468:function(e,t,n){"use strict";var a=n(1),o=n.n(a),r=n(17),i=function(e){return o.a.createElement(r.a,e,o.a.createElement("path",{d:"M2.224 21.667s4.24-1.825 4.788-2.056C15.029 23.141 22 17.714 22 11.898 22 6.984 17.523 3 12 3S2 6.984 2 11.898c0 1.86.64 3.585 1.737 5.013-.274.833-1.513 4.756-1.513 4.756zm5.943-9.707c.69 0 1.25-.569 1.25-1.271a1.26 1.26 0 0 0-1.25-1.271c-.69 0-1.25.569-1.25 1.27 0 .703.56 1.272 1.25 1.272zm7.583 0c.69 0 1.25-.569 1.25-1.271a1.26 1.26 0 0 0-1.25-1.271c-.69 0-1.25.569-1.25 1.27 0 .703.56 1.272 1.25 1.272z",fillRule:"evenodd"}))};i.defaultProps={name:"WeChat"},t.a=i},1469:function(e,t,n){"use strict";var a=n(1),o=n.n(a),r=n(17),i=function(e){return o.a.createElement(r.a,e,o.a.createElement("path",{fill:"#FB6622",d:"M15.518 3.06c8.834-.854 7.395 7.732 7.394 7.731-.625 1.439-1.673.309-1.673.309.596-7.519-5.692-6.329-5.692-6.329-.898-1.067-.029-1.711-.029-1.711zm4.131 6.985c-.661 1.01-1.377.126-1.376.126.205-3.179-2.396-2.598-2.396-2.598-.719-.765-.091-1.346-.091-1.346 4.882-.551 3.863 3.818 3.863 3.818zM5.317 7.519s4.615-3.86 6.443-1.328c0 0 .662 1.08-.111 2.797.003-.003 3.723-1.96 5.408.159 0 0 .848 1.095-.191 2.649 0 0 2.918-.099 2.918 2.715 0 2.811-4.104 6.44-9.315 6.44-5.214 0-8.026-2.092-8.596-3.102 0 0-3.475-4.495 3.444-10.33zm10.448 7.792s.232-4.411-5.71-4.207c-6.652.231-6.579 4.654-6.579 4.654.021.39.097 3.713 5.842 3.713 5.98 0 6.447-4.16 6.447-4.16zm-9.882.86s-.059-3.632 3.804-3.561c3.412.06 3.206 3.165 3.206 3.165s-.026 2.979-3.684 2.979c-3.288 0-3.326-2.583-3.326-2.583zm2.528 1.037c.672 0 1.212-.447 1.212-.998 0-.551-.543-.998-1.212-.998-.672 0-1.215.447-1.215.998 0 .551.546.998 1.215.998z",fillRule:"evenodd"}))};i.defaultProps={name:"Weibo"},t.a=i},1503:function(e,t,n){"use strict";var a=n(1),o=n.n(a),r=n(17),i=function(e){return o.a.createElement(r.a,e,o.a.createElement("path",{d:"M2 18.242c0-.326.088-.532.237-.896l7.98-13.203C10.572 3.57 11.086 3 12 3c.915 0 1.429.571 1.784 1.143l7.98 13.203c.15.364.236.57.236.896 0 1.386-.875 1.9-1.955 1.9H3.955c-1.08 0-1.955-.517-1.955-1.9z",fillRule:"evenodd"}))};i.defaultProps={name:"TriangleUp"},t.a=i},1522:function(e,t,n){},1527:function(e,t,n){"use strict";n.d(t,"b",function(){return o}),n.d(t,"a",function(){return r});var a=n(67),o=(n(299),function(e){var t=e.title,n=e.affirm,o=void 0===n?"确定":n,r=e.dismiss,i=e.content,c=i?{content:i}:{};return a.a.supportsAction("ui/showAlert").then(function(e){return e?a.a.dispatch("ui/showAlert",Object.assign({title:t,affirm:o,dismiss:r},c)):Promise.reject()}).then(function(e){return"AFFIRM"===e.result}).catch(function(){var e=i?t+"\n"+i:t;return r?window.confirm(e):(window.alert(e),!0)})}),r=function(e){var t="string"==typeof e?{images:[e],index:0}:e;return a.a.supportsAction("base/openImage").then(function(e){return e?Promise.resolve():Promise.reject()}).then(function(){return a.a.dispatch("base/openImage",t)})}},1547:function(e,t,n){"use strict";var a=n(1),o=n.n(a),r=n(17),i=function(e){return o.a.createElement(r.a,e,o.a.createElement("path",{d:"M20.044 3H3.956C2.876 3 2 3.517 2 4.9c0 .326.087.533.236.896L10.216 19c.355.571.87 1.143 1.784 1.143s1.429-.572 1.784-1.143l7.98-13.204c.149-.363.236-.57.236-.896 0-1.386-.876-1.9-1.956-1.9z",fillRule:"evenodd"}))};i.defaultProps={name:"TriangleDown"},t.a=i},1549:function(e,t,n){"use strict";var a=n(21);t.a=function(){var e=Object(a.useSelector)(function(e){var t,n;return null===(t=e.env)||void 0===t?void 0:null===(n=t.ctx)||void 0===n?void 0:n.path});return Boolean(e.match(/\/pin-test\/\d+$/))}},1575:function(e,t,n){"use strict";var a=n(16),o=n(24),r=n(6),i=n(10),c=n(9),s=n(7),l=n(8),u=n(0),d=n(3),p=n.n(d),h=n(1),f=n(21),b=n(950),m=n(1033),v=n(1608),g=n(167),O=n(20),j=n(112),y=n(883),C=n(18),k=n(302);var w=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).load=function(){var e=n.props,t=e.dispatch,a=e.id;t(Object(k.b)(a))},n.track=function(){var e,t=n.props.column;n.hoverCardElement&&t&&(O.a.setModule(n.hoverCardElement,{module:"ColumnItem"},{card:{content:{type:"Column",token:t.id,item_num:t.articlesCount,follower_num:t.followers,publish_timestamp:1e3*t.updated,author_member_hash_id:null===(e=t.author)||void 0===e?void 0:e.id}}}),O.a.trackCardShow(n.hoverCardElement))},n.handleOpen=function(){n.load(),n.track()},n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.toggler,r=t.column,i=t.id,c=t.isLoading,s=t.onRef,l=Object(o.a)(t,["toggler","column","id","isLoading","onRef"]),d=this.context.currentUser,p=r||{},h=p.title,f=p.intro,O=p.articlesCount,k=p.followers,w=p.imageUrl,N=p.lastArticle,S=p.isFollowing,x=p.author,T=(x=void 0===x?{}:x).urlToken,I=N||{},E=I.title,L=I.created,P="".concat(C.E,"/column/").concat(i),A=d&&T&&d.urlToken===T;return Object(u.e)(m.b,Object(a.default)({toggler:n,preventCloseOnTarget:!0,isLoading:c,onOpen:this.handleOpen,size:"large"},l,{onRef:function(t){s&&"function"==typeof s&&s(t),e.hoverCardElement=t}}),Object(u.e)(m.a,{title:Object(u.e)("a",{target:"_black",href:P},h),avatarUrl:w}),f,N&&Object(u.e)("div",null,Object(u.e)(v.a,{text:!0,center:!0})," 最后更新",Object(u.e)("span",{className:"HoverCard-separate"}," | "),E,Object(u.e)("span",null,"（",Object(g.toRelativeString)(L),"）")),Object(u.e)("div",null,Object(u.e)(b.a,null,Object(u.e)(b.a.Item,{tag:j.a,preset:"plain",a:!0,to:P,name:"文章",value:O}),Object(u.e)(b.a.Item,{tag:j.a,preset:"plain",a:!0,to:"".concat(P,"/followers"),name:"关注者",value:k})),!A&&Object(u.e)("div",{className:"HoverCard-buttons"},Object(u.e)(y.a,{preset:y.a.PRESETS.primary,id:i,type:"column",isFollowing:S}))))}}]),t}(h.Component);w.contextTypes={currentUser:p.a.object},t.a=Object(f.connect)(function(e,t){var n=t.id,a=e.entities.columns,o=e.loading.local;return{column:a[n],isLoading:Boolean(o["column/".concat(n)])}})(w)},1578:function(e,t,n){"use strict";var a=n(1),o=n.n(a),r=n(17),i=function(e){return o.a.createElement(r.a,e,o.a.createElement("path",{d:"M10.241 19.313a.97.97 0 0 0-.77.2 7.908 7.908 0 0 1-3.772 1.482.409.409 0 0 1-.38-.637 5.825 5.825 0 0 0 1.11-2.237.605.605 0 0 0-.227-.59A7.935 7.935 0 0 1 3 11.25C3 6.7 7.03 3 12 3s9 3.7 9 8.25-4.373 9.108-10.759 8.063z",fillRule:"evenodd"}))};i.defaultProps={name:"Comment"},t.a=i},1581:function(e,t,n){"use strict";var a=n(1),o=n.n(a),r=n(17),i=function(e){return o.a.createElement(r.a,e,o.a.createElement("path",{d:"M14.445 9h5.387s2.997.154 1.95 3.669c-.168.51-2.346 6.911-2.346 6.911s-.763 1.416-2.86 1.416H8.989c-1.498 0-2.005-.896-1.989-2v-7.998c0-.987.336-2.032 1.114-2.639 4.45-3.773 3.436-4.597 4.45-5.83.985-1.13 3.2-.5 3.037 2.362C15.201 7.397 14.445 9 14.445 9zM3 9h2a1 1 0 0 1 1 1v10a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V10a1 1 0 0 1 1-1z",fillRule:"evenodd"}))};i.defaultProps={name:"Like"},t.a=i},1586:function(e,t,n){"use strict";var a,o,r,i=n(16),c=n(24),s=n(6),l=n(10),u=n(9),d=n(7),p=n(8),h=n(0),f=n(3),b=n.n(f),m=n(1),v=n(13),g=n.n(v),O=n(21),j=n(168),y=n(81),C=n.n(y),k=n(1575),w=n(46),N=n(18),S=Object(O.connect)(function(e){return{isMobile:Object(w.e)(e,{includeTablet:!0})}})((r=o=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e,t=this.props,n=t.isMobile,a=t.column,o=a.title,r=a.imageUrl,s=a.id,l=t.avatar,u=t.avatarProps,d=t.noHoverCard,p=t.style,f=t.className,b=t.children,m=Object(c.a)(t,["isMobile","column","avatar","avatarProps","noHoverCard","style","className","children"]),v=void 0===d?n:d;return e=l?Object(h.e)(j.a,Object(i.default)({url:r,alt:o},u)):b||o,v||(e=Object(h.e)(k.a,{toggler:e,id:s})),Object(h.e)("a",Object(i.default)({style:p,className:g()("ColumnLink",f),href:"".concat(N.E,"/column/").concat(s)},C()(m,["dispatch"])),e)}}]),t}(m.Component),o.propTypes={column:b.a.object.isRequired,avatar:b.a.bool,avatarProps:b.a.object,noHoverCard:b.a.bool,style:b.a.object,className:b.a.string,children:b.a.node},o.defaultProps={avatar:!1},a=r))||a;t.a=S},1608:function(e,t,n){"use strict";var a=n(1),o=n.n(a),r=n(17),i=function(e){return o.a.createElement(r.a,e,o.a.createElement("path",{d:"M12 2C6.478 2 2 6.498 2 12.013 2 17.527 6.478 22 12 22s10-4.473 10-9.987C22.025 6.498 17.547 2 12 2zm3.575 14.693s-3.677-2.45-4.135-2.8c-.458-.349-.458-.813-.458-.813l.005-5.66c0-.56.458-1.017 1.018-1.017s1.017.457 1.017 1.017l-.004 5.152 3.727 2.495c.458.305.62.99.27 1.44-.35.45-1.004.487-1.44.186z",fillRule:"evenodd"}))};i.defaultProps={name:"Time"},t.a=i},1618:function(e,t,n){"use strict";var a=n(1),o=n.n(a),r=n(17),i=function(e){return o.a.createElement(r.a,e,o.a.createElement("path",{d:"M2 8.437C2 5.505 4.294 3.094 7.207 3 9.243 3 11.092 4.19 12 6c.823-1.758 2.649-3 4.651-3C19.545 3 22 5.507 22 8.432 22 16.24 13.842 21 12 21 10.158 21 2 16.24 2 8.437z",fillRule:"evenodd"}))};i.defaultProps={name:"Heart"},t.a=i},1619:function(e,t,n){},1620:function(e,t,n){"use strict";var a=n(0),o=(n(1),n(13)),r=n.n(o);t.a=function(e){var t=e.className;return Object(a.e)("span",{className:r()("Bull",t)}," · ")}},1657:function(e,t,n){},1663:function(e,t,n){"use strict";var a=n(1),o=n.n(a),r=n(17),i=function(e){return o.a.createElement(r.a,e,o.a.createElement("defs",null,o.a.createElement("linearGradient",{id:"id-3811055512-a",x1:"11.015%",x2:"87.655%",y1:"18.594%",y2:"96.14%"},o.a.createElement("stop",{offset:"0%",stopColor:"#F2D9B6"}),o.a.createElement("stop",{offset:"100%",stopColor:"#BF8B43"}))),o.a.createElement("path",{fill:"url(#id-3811055512-a)",d:"M21.351 4.858A3.115 3.115 0 0 1 22.93 7.56v8.88a3.115 3.115 0 0 1-1.578 2.702l-7.774 4.44a3.185 3.185 0 0 1-3.154 0l-7.774-4.44A3.115 3.115 0 0 1 1.07 16.44V7.56c0-1.115.602-2.145 1.578-2.702l7.774-4.44a3.185 3.185 0 0 1 3.154 0l7.774 4.44zm-2.475 1.904L13.16 3.507a2.347 2.347 0 0 0-2.32 0L5.124 6.762a2.283 2.283 0 0 0-1.16 1.982v6.512c0 .817.442 1.573 1.16 1.982l5.716 3.255a2.347 2.347 0 0 0 2.32 0l5.716-3.255a2.283 2.283 0 0 0 1.16-1.982V8.744c0-.817-.442-1.573-1.16-1.982zm-9.874 4.13L12 5.76l2.998 5.131 2.466-2.12v6.343c0 .49-.4.886-.893.886H7.429a.89.89 0 0 1-.893-.887V8.771l2.466 2.12z"}))};i.defaultProps={name:"VIP"},t.a=i},1678:function(e,t,n){"use strict";var a=n(0),o=n(1),r=n(21),i=n(28),c=n(27),s=n(863),l=n(1458),u=n(1464),d=n(987);t.a=Object(i.withRouter)(function(e){var t=e.clubId,n=e.router,i=e.children,p=e.location.query.showApplicationModal,h=e.onSubmitSuccess,f=Object(r.useSelector)(function(e){return e.env.theme}),b=Object(r.useSelector)(c.b),m=Object(s.a)(),v=Object(r.useSelector)(function(e){return e.entities.clubs[t]})||{},g=v.joinType,O=v.verifyQuestion,j=v.isJoined,y=v.loginMask,C=Object(r.useDispatch)(),k=Object(o.useCallback)(function(){return C(Object(d.b)(t))},[t,C]),w=Object(o.useCallback)(function(e){return C(Object(d.d)(t,e))},[t,C]);return Object(a.e)(l.b,{currentUser:b,loginMask:y,router:n,ua:m},Object(a.e)(u.a,{showApplicationModal:p,handleJoinClub:k,isJoined:j,theme:f,joinType:g,verifyQuestion:O,requestJoinClub:w,clubId:t,onSubmitSuccess:h},i))})},1679:function(e,t,n){},1680:function(e,t,n){"use strict";n.r(t);var a=n(0),o=(n(1),n(61)),r=n(23),i={name:"8atqhb",styles:"width:100%;"};t.default=function(e){var t=e.handleCloseModal,n=e.maskModalShown,c=e.handleRead,s=e.buttonContent,l=e.content,u=e.title;return Object(a.e)(o.b,{title:u,onClose:t,subtitle:l,className:"ClubModal"},n&&Object(a.e)(r.d,{preset:"primary",color:"blue",onClick:c,css:i},s))}},1705:function(e,t,n){"use strict";function a(e){try{return JSON.parse(e)}catch(e){return null}}n.d(t,"a",function(){return a})},1780:function(e,t,n){"use strict";var a=n(16),o=n(24),r=n(0),i=(n(1),n(21)),c=n(20),s=n(222),l=n(67),u=n(849),d=n(30),p=n.n(d),h=n(987),f=n(1464),b=(n(1781),n(13)),m=n.n(b),v=n(1527);t.a=function(e){var t=e.clubId,n=e.className,d=e.handleJoinClubBefore,b=e.handleJoinClubAfter,g=e.clickId,O=e.viewProps,j=void 0===O?{}:O,y=e.zaExtra,C=void 0===y?{}:y,k=e.oia,w=void 0===k||k,N=e.plus,S=e.joinText,x=Object(o.a)(e,["clubId","className","handleJoinClubBefore","handleJoinClubAfter","clickId","viewProps","zaExtra","oia","plus","joinText"]),T=Object(i.useDispatch)(),I=Object(i.useSelector)(function(e){return e.entities.clubs[t]}),E=I.joinType,L=I.isJoined,P=Object(f.b)(function(e){g&&c.a.trackEvent(e.currentTarget,Object.assign({action:"Click",id:g},j),C),"all"===E&&T(Object(h.b)(t)).then(function(){l.a.dispatch("ui/showToast",{icon:"success",text:"加入成功"}),b&&b(),p.a.get("club:disablePushModal")||l.a.dispatch("base/getNotificationConfig").then(function(e){e.enabled||p.a.set("club:firstJoinClub",!0)})})},{isJoinButton:!0,oia:w}),A=!L&&"verify"===E;return Object(r.e)(s.a,Object(a.default)({zaText:!0,zaType:"Button",as:"button",zaAction:L?"UnFollow":"Follow",className:m()(n,{Joined:L,needVerify:A}),onClick:function(e){d&&d(e),e.stopPropagation(),e.preventDefault(),L?(g&&c.a.trackEvent(e.currentTarget,Object.assign({action:"Cancel",id:g},j),C),Object(v.b)({title:"退出圈子即取消管理员资格，并且无法参与互动和收到相关消息，是否退出？",affirm:"确认",dismiss:"取消"}).then(function(e){e&&T(Object(h.c)(t))})):P(e)}},x),L&&"已",A&&"申请",N&&!L&&"verify"!==E&&Object(r.e)(u.a,{className:"JoinButton-Icon",center:!0,text:!0}),S||"加入")}},1781:function(e,t,n){},1851:function(e,t,n){"use strict";var a=n(1),o=n.n(a),r=n(17),i=function(e){return o.a.createElement(r.a,e,o.a.createElement("g",{fill:"none",fillRule:"evenodd"},o.a.createElement("path",{fill:"#0F88EB",d:"M2.64 13.39c1.068.895 1.808 2.733 1.66 4.113l.022-.196c-.147 1.384.856 2.4 2.24 2.278l-.198.016c1.387-.122 3.21.655 4.083 1.734l-.125-.154c.876 1.084 2.304 1.092 3.195.027l-.127.152c.895-1.068 2.733-1.808 4.113-1.66l-.198-.022c1.386.147 2.402-.856 2.279-2.238l.017.197c-.122-1.388.655-3.212 1.734-4.084l-.154.125c1.083-.876 1.092-2.304.027-3.195l.152.127c-1.068-.895-1.808-2.732-1.66-4.113l-.022.198c.147-1.386-.856-2.4-2.24-2.279l.198-.017c-1.387.123-3.21-.654-4.083-1.733l.125.153c-.876-1.083-2.304-1.092-3.195-.027l.127-.152c-.895 1.068-2.733 1.808-4.113 1.662l.198.02c-1.386-.147-2.4.857-2.279 2.24L4.4 6.363c.122 1.387-.655 3.21-1.734 4.084l.154-.126c-1.083.878-1.092 2.304-.027 3.195l-.152-.127z"}),o.a.createElement("path",{fill:"#FFF",d:"M9.78 15.728l-2.633-2.999s-.458-.705.242-1.362c.7-.657 1.328-.219 1.328-.219l1.953 2.132 4.696-4.931s.663-.348 1.299.198c.636.545.27 1.382.27 1.382s-3.466 3.858-5.376 5.782c-.98.93-1.778.017-1.778.017z"})))};i.defaultProps={name:"BadgeCert"},t.a=i},1888:function(e,t,n){},2309:function(e,t,n){e.exports=n.p+"assets/icons-hot-spot.6568b4bd.png"},2310:function(e,t,n){e.exports=n.p+"assets/mobile_icons-hot-spot.8181ad56.png"},2311:function(e,t,n){e.exports=n.p+"assets/HotChoice.a7580612.png"},2312:function(e,t,n){},2313:function(e,t,n){},2314:function(e,t,n){},2315:function(e,t,n){},2316:function(e,t,n){},2317:function(e,t,n){},2318:function(e,t,n){},2319:function(e,t,n){},2320:function(e,t,n){},2321:function(e,t,n){},2322:function(e,t,n){},2323:function(e,t,n){},2324:function(e,t,n){e.exports=n.p+"assets/time.0431db00.png"},2325:function(e,t,n){},2326:function(e,t,n){},2327:function(e,t,n){},2328:function(e,t,n){"use strict";var a={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r=Object.defineProperty,i=Object.getOwnPropertyNames,c=Object.getOwnPropertySymbols,s=Object.getOwnPropertyDescriptor,l=Object.getPrototypeOf,u=l&&l(Object);e.exports=function e(t,n,d){if("string"!=typeof n){if(u){var p=l(n);p&&p!==u&&e(t,p,d)}var h=i(n);c&&(h=h.concat(c(n)));for(var f=0;f<h.length;++f){var b=h[f];if(!(a[b]||o[b]||d&&d[b])){var m=s(n,b);try{r(t,b,m)}catch(e){}}}return t}return t}},2329:function(e,t,n){},2330:function(e,t,n){},2331:function(e,t,n){},2332:function(e,t,n){},2333:function(e,t,n){"use strict";var a=n(58);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(1)),r=a(n(137)),i=function(e){return o.default.createElement(r.default,Object.assign({width:"150",height:"120",viewBox:"0 0 150 120"},e),o.default.createElement("g",{fill:"none",fillRule:"evenodd"},o.default.createElement("path",{fill:"#EBEEF5",d:"M107.221 83.6l8.886 8.885a1.5 1.5 0 0 1-2.122 2.122l-8.924-8.925A18.922 18.922 0 0 1 93 90c-10.493 0-19-8.507-19-19s8.507-19 19-19 19 8.507 19 19c0 4.834-1.805 9.247-4.779 12.6zM70 89.085a1.5 1.5 0 0 1 0 2.83V92H46.003A6.003 6.003 0 0 1 40 85.995v-55.99A6.005 6.005 0 0 1 46.003 24h53.994A6.003 6.003 0 0 1 106 30.005V48h-.085a1.5 1.5 0 0 1-2.83 0H103V30.005A3.003 3.003 0 0 0 99.997 27H46.003A3.005 3.005 0 0 0 43 30.005v55.99A3.003 3.003 0 0 0 46.003 89H70v.085zM93 87c8.837 0 16-7.163 16-16s-7.163-16-16-16-16 7.163-16 16 7.163 16 16 16z",fillRule:"nonzero"}),o.default.createElement("path",{fill:"#F7F8FA",d:"M49 39.5c0-.828.677-1.5 1.495-1.5h39.01c.826 0 1.495.666 1.495 1.5 0 .828-.677 1.5-1.495 1.5h-39.01A1.494 1.494 0 0 1 49 39.5zm0 9c0-.828.667-1.5 1.501-1.5H71.5c.829 0 1.501.666 1.501 1.5 0 .828-.667 1.5-1.501 1.5H50.5C49.672 50 49 49.334 49 48.5zm0 9c0-.828.675-1.5 1.498-1.5h11.004c.827 0 1.498.666 1.498 1.5 0 .828-.675 1.5-1.498 1.5H50.498A1.495 1.495 0 0 1 49 57.5z"})))};t.default=i},2334:function(e,t,n){},2335:function(e,t,n){"use strict";var a=n(58);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(1)),r=a(n(137)),i=function(e){return o.default.createElement(r.default,Object.assign({width:"24",height:"24",viewBox:"0 0 24 24"},e),o.default.createElement("path",{d:"M12 2c5.523 0 10 4.477 10 10 0 1.49-.326 2.902-.91 4.172v4.464a.455.455 0 0 1-.454.455h-4.464A9.963 9.963 0 0 1 12 22C6.477 22 2 17.523 2 12S6.477 2 12 2zm0 1.818a8.182 8.182 0 1 0 3.753 15.454h3.52v-3.52A8.182 8.182 0 0 0 12 3.819zm0 4.546a3.636 3.636 0 1 1 0 7.272 3.636 3.636 0 0 1 0-7.272z",fillRule:"evenodd"}))};t.default=i},2336:function(e,t,n){"use strict";var a=n(58);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(1)),r=a(n(137)),i=function(e){return o.default.createElement(r.default,Object.assign({width:"36",height:"36",viewBox:"0 0 36 36"},e),o.default.createElement("g",{fill:"none",fillRule:"evenodd"},o.default.createElement("path",{d:"M0 0h36v36H0z"}),o.default.createElement("path",{fill:"currentcolor",d:"M6.282 12h3.436c.446 0 .607.046.77.134.163.087.291.215.378.378.088.163.134.324.134.77v13.436c0 .446-.046.607-.134.77a.909.909 0 0 1-.378.378c-.163.088-.324.134-.77.134H6.282c-.446 0-.607-.046-.77-.134a.909.909 0 0 1-.378-.378c-.088-.163-.134-.324-.134-.77V13.282c0-.446.046-.607.134-.77a.909.909 0 0 1 .378-.378c.163-.088.324-.134.77-.134zm20 4h3.436c.446 0 .607.046.77.134.163.087.291.215.378.378.088.163.134.324.134.77v9.436c0 .446-.046.607-.134.77a.909.909 0 0 1-.378.378c-.163.088-.324.134-.77.134h-3.436c-.446 0-.607-.046-.77-.134a.909.909 0 0 1-.378-.378c-.088-.163-.134-.324-.134-.77v-9.436c0-.446.046-.607.134-.77a.909.909 0 0 1 .378-.378c.163-.088.324-.134.77-.134z"}),o.default.createElement("rect",{width:"28",height:"2",x:"4",y:"31",fill:"currentcolor",rx:"1"}),o.default.createElement("path",{fill:"currentcolor",d:"M16.282 3h3.436c.446 0 .607.046.77.134.163.087.291.215.378.378.088.163.134.324.134.77v22.436c0 .446-.046.607-.134.77a.909.909 0 0 1-.378.378c-.163.088-.324.134-.77.134h-3.436c-.446 0-.607-.046-.77-.134a.909.909 0 0 1-.378-.378c-.088-.163-.134-.324-.134-.77V4.282c0-.446.046-.607.134-.77a.909.909 0 0 1 .378-.378c.163-.088.324-.134.77-.134z"})))};t.default=i},2337:function(e,t,n){"use strict";var a=n(58);Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var o=a(n(1)),r=a(n(137)),i=function(e){return o.default.createElement(r.default,Object.assign({width:"24",height:"24",viewBox:"0 0 24 24"},e),o.default.createElement("g",{fillRule:"nonzero"},o.default.createElement("path",{d:"M24 8.993v6.014c0 2.205-1.658 3.34-3.719 2.529L16 15.85v-7.7l4.281-1.686C22.335 5.656 24 6.787 24 8.994zm-2 0c0-.748-.216-.938-.86-.715l-.126.047L18 9.511v4.977l3.014 1.187c.705.277.958.147.984-.54l.002-.128V8.993z"}),o.default.createElement("path",{d:"M16.005 4C17.107 4 18 4.895 18 5.994v12.012A1.994 1.994 0 0 1 16.005 20H1.995A1.996 1.996 0 0 1 0 18.006V5.994C0 4.893.893 4 1.995 4h14.01zM16 6H2v12h14V6z"})))};t.default=i},2338:function(e,t,n){},2339:function(e,t,n){},2340:function(e,t,n){},2341:function(e,t,n){},2342:function(e,t,n){},2343:function(e,t,n){},2344:function(e,t,n){},2345:function(e,t,n){},3041:function(e,t,n){"use strict";n.r(t);var a=n(0),o=n(1),r=n.n(o),i=n(28),c=n(24),s=n(6),l=n(10),u=n(9),d=n(7),p=n(8),h=n(3),f=n.n(h),b=n(21),m=n(95),v=n.n(m),g=n(36),O=n(178),j=n(88),y=n(2),C=n(354),k=n(13),w=n.n(k),N=n(37),S=n(20),x=n(4),T=n(33),I=n(79),E=n.n(I),L=n(407),P=n.n(L),A=n(2328),M=n.n(A);var R=function(e,t){return function(n){var a=t(n);return M()(a,n),a.displayName="".concat(e,"(").concat(function(e){return e.displayName||e.name||"Component"}(n),")"),a}};function _(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var z=E()(function(){var e=new IntersectionObserver(function(t){t.forEach(function(t){if(0!==t.intersectionRatio){var n=t.target;e.unobserve(n),n.handleChange&&(n.handleChange(),n.handleChange=null)}})},{threshold:[.1]});return e}),B=function(e,t,n,a){return R("track",function(i){return function(o){function c(){var e,t;Object(s.a)(this,c);for(var n=arguments.length,a=new Array(n),o=0;o<n;o++)a[o]=arguments[o];return t=Object(u.a)(this,(e=Object(d.a)(c)).call.apply(e,[this].concat(a))),_(Object(N.default)(t),"values_",{}),_(Object(N.default)(t),"trackCardShow",function(){var e=t.values,n=e.viewInfo,a=e.extraInfo;S.a.trackCardShow(t.element,n,a)}),t}return Object(p.a)(c,o),Object(l.a)(c,[{key:"parseValues",value:function(){var o,r=this,i=function(e){return"function"==typeof e?e(r.props):e};this.values={viewLocation:e,moduleInfo:(o=i(t),o?o.type||o.sub_type?{card:{card_type:"Content",content:o}}:o:null),viewInfo:i(n),extraInfo:i(a)}}},{key:"setModule",value:function(){var e=this.values,t=e.viewLocation,n=e.moduleInfo;S.a.setModule(this.element,t,n)}},{key:"componentDidMount",value:function(){this.element=Object(T.findDOMNode)(this),this.parseValues(),this.values.viewInfo&&(this.element.handleChange=this.trackCardShow,z().observe(this.element))}},{key:"componentDidUpdate",value:function(){this.parseValues()}},{key:"componentWillUnmount",value:function(){this.values.viewInfo&&(z().unobserve(this.element),this.element.handleChange=null),this.element=null}},{key:"render",value:function(){return r.a.createElement(i,this.props)}},{key:"values",get:function(){return this.values_},set:function(e){P()(e,this.values_)||(this.values_=e,this.setModule())}}]),c}(o.Component)})},D=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o))),_(Object(N.default)(n),"Component",B.apply(void 0,Object(x.a)(n.props.options))(function(){return n.props.children})),n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){return"undefined"!=typeof window&&window.IntersectionObserver?r.a.createElement(this.Component,null):this.props.children}}]),t}(o.Component);_(D,"propTypes",{children:f.a.element.isRequired,options:f.a.array.isRequired});var V=D,F=n(857),H=n(1391);var U=n(1378),q=function(e){return r.a.createElement(U.a,Object.assign({viewBox:"0 0 80 80"},e),r.a.createElement("path",{d:"M41.323 43.102c0-.02-.155-4.459-1.547-4.98h-9.7c.323-4.571.408-9.175.408-12.951h9.485c0-.335.365-4.576-1.59-4.982H21.97c.647-2.01 1.46-4.557 2.432-7.189 0 0-4.462 0-5.983 4.057-.628 1.675-2.448 8.109-5.69 14.683 1.092-.119 4.703-.22 6.83-4.174.391-1.103.466-1.251.952-2.395h5.35c0 1.637-.22 12.236-.31 12.95h-9.694c-2.177.522-2.885 4.96-2.885 4.981h12.16C24.32 52.452 19.943 60.345 12 66.59c3.799 1.098 7.584-.176 9.456-1.862 0 0 4.26-3.925 6.596-13.016l10.005 12.206s2.773-3.88-.23-7.516c-1.405-1.678-5.202-6.213-6.82-7.859l-2.712 2.182c.81-2.626 1.296-5.178 1.46-7.623h11.568zm1.974-22.913v40.845h4.759l1.433 4.781 7.812-4.78H66V20.188H43.297zm18.685 36.86h-5.211l-5.577 2.99-.576-2.99h-3.372V24.175h14.806l-.07 32.876z"}))};q.defaultProps={name:"Zhi"};var W=q;n(2330);function K(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var G=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o))),K(Object(N.default)(n),"state",{loaded:!1}),n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props.src;(function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(n,a){var o=new Image;Object.keys(t).forEach(function(e){o[e]=t[e]}),o.onload=function(){return n(o)},o.onerror=a,o.src=e})})(t).then(function(n){n.dataset.thumbnail=t,e.setState({loaded:!0})}).catch()}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.src,a=e.alt,o=e.showIcon;return this.state.loaded?r.a.createElement("img",{src:n,className:t,alt:a}):r.a.createElement("div",{className:"KfeCollection-PlaceHolder ".concat(t)},o&&r.a.createElement(W,{className:"KfeCollection-PlaceHolder-Icon",size:40}))}}]),t}(r.a.Component);K(G,"propTypes",{src:f.a.string.isRequired,alt:f.a.string,className:f.a.string,style:f.a.shape({width:f.a.number,height:f.a.number}),showIcon:f.a.bool}),K(G,"defaultProps",{alt:"",className:"",showIcon:!0});var Q=G;n(2329);function Z(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var J=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.src,n=e.className,a=e.width,o=e.height,i=e.withMask;return r.a.createElement("div",{className:w()("KfeCollection-Image-Wrapper ".concat(n),{"KfeCollection-Image-Mask":i}),style:a||o?{width:a,height:o}:{}},r.a.createElement(Q,{className:"KfeCollection-Image",src:t}))}}]),t}(r.a.Component);Z(J,"propTypes",{className:f.a.string,width:f.a.number,height:f.a.number,src:f.a.string.isRequired,withMask:f.a.bool}),Z(J,"defaultProps",{className:"",src:"",withMask:!0});var Y=n(17),X=function(e){return r.a.createElement(Y.a,e,r.a.createElement("g",{fill:"none",fillRule:"evenodd"},r.a.createElement("path",{fill:"#0F88EB",d:"M12.055 3.172c.21-.165.397-.344.555-.532l-.127.152c.891-1.065 2.319-1.056 3.195.027l-.125-.153c.872 1.08 2.696 1.856 4.083 1.733l-.197.017c1.383-.122 2.386.893 2.239 2.279l.021-.198c-.147 1.381.593 3.218 1.661 4.113l-.152-.127c1.065.891 1.056 2.319-.027 3.195l.154-.125c-1.08.872-1.856 2.696-1.734 4.084l-.017-.197c.123 1.382-.893 2.385-2.279 2.238l.198.021c-1.38-.147-3.218.593-4.113 1.661l.127-.152c-.891 1.065-2.319 1.057-3.195-.027l.125.154a3.716 3.716 0 0 0-.503-.506c.975-.77 2.422-1.25 3.559-1.13l-.198-.021c1.386.147 2.402-.856 2.279-2.238l.017.197c-.122-1.388.655-3.212 1.734-4.084l-.154.125c1.083-.876 1.092-2.304.027-3.195l.152.127c-1.068-.895-1.808-2.732-1.66-4.113l-.022.198c.147-1.386-.856-2.4-2.24-2.279l.198-.017c-1.159.103-2.622-.422-3.58-1.227z"}),r.a.createElement("path",{fill:"#FF9500",d:"M19.21 10.483l.151.127c-1.069-.895-1.809-2.732-1.662-4.113l-.02.197c.146-1.386-.857-2.4-2.24-2.278l.197-.018c-1.387.124-3.21-.653-4.083-1.732l.125.153c-.876-1.083-2.304-1.092-3.195-.028l.127-.152c-.894 1.068-2.733 1.808-4.113 1.663l.198.02c-1.386-.147-2.4.857-2.279 2.24L2.4 6.363c.122 1.387-.655 3.21-1.734 4.084l.154-.126c-1.083.877-1.092 2.304-.027 3.194L.64 13.39c1.068.894 1.808 2.733 1.661 4.112l.021-.196c-.147 1.385.856 2.401 2.24 2.28l-.198.015c1.387-.122 3.211.655 4.083 1.734l-.124-.154c.184.228.396.397.62.53a1.89 1.89 0 0 0 1.972 0c.215-.127.421-.287.602-.503l-.127.152c.895-1.068 2.733-1.808 4.113-1.66l-.198-.022c1.387.147 2.402-.856 2.28-2.238l.016.197c-.122-1.389.655-3.212 1.734-4.084l-.154.124c1.083-.876 1.092-2.303.028-3.194"}),r.a.createElement("path",{fill:"#FFF",d:"M14.946 11.082l-2.362 2.024.721 3.025c.128.534-.144.738-.617.45l-2.654-1.623L7.38 16.58c-.468.286-.746.09-.617-.449l.721-3.025-2.362-2.024c-.417-.357-.317-.68.236-.726l3.101-.248 1.194-2.872c.211-.507.55-.512.763 0l1.195 2.872 3.1.248c.547.044.657.365.236.726"})))};X.defaultProps={name:"BadgeCG"};var $=X,ee=function(e){return r.a.createElement(Y.a,e,r.a.createElement("g",{fill:"none",fillRule:"evenodd"},r.a.createElement("path",{fill:"#FF9500",d:"M2.64 13.39c1.068.895 1.808 2.733 1.66 4.113l.022-.196c-.147 1.384.856 2.4 2.24 2.278l-.198.016c1.387-.122 3.21.655 4.083 1.734l-.125-.154c.876 1.084 2.304 1.092 3.195.027l-.127.152c.895-1.068 2.733-1.808 4.113-1.66l-.198-.022c1.386.147 2.402-.856 2.279-2.238l.017.197c-.122-1.388.655-3.212 1.734-4.084l-.154.125c1.083-.876 1.092-2.304.027-3.195l.152.127c-1.068-.895-1.808-2.732-1.66-4.113l-.022.198c.147-1.386-.856-2.4-2.24-2.279l.198-.017c-1.387.123-3.21-.654-4.083-1.733l.125.153c-.876-1.083-2.304-1.092-3.195-.027l.127-.152c-.895 1.068-2.733 1.808-4.113 1.662l.198.02c-1.386-.147-2.4.857-2.279 2.24L4.4 6.363c.122 1.387-.655 3.21-1.734 4.084l.154-.126c-1.083.878-1.092 2.304-.027 3.195l-.152-.127z"}),r.a.createElement("path",{fill:"#FFF",d:"M12.034 14.959L9.379 16.58c-.468.286-.746.09-.617-.449l.721-3.025-2.362-2.024c-.417-.357-.317-.681.236-.725l3.1-.249 1.195-2.872c.21-.507.55-.512.763 0l1.195 2.872 3.1.249c.547.043.657.365.236.725l-2.362 2.024.721 3.025c.128.534-.144.738-.617.449l-2.654-1.621z"})))};ee.defaultProps={name:"BadgeGlorious"};var te=ee,ne=n(1851);function ae(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var oe=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.style,n=t.className,a=void 0===n?"":n,o=t.size,i=void 0===o?16:o,c=t.center,s=void 0===c||c,l=e.badge;if(!l)return null;var u=l.identity,d=l.bestAnswerer;return d&&u?r.a.createElement($,{className:a,size:i,center:s}):d?r.a.createElement(te,{className:a,size:i,center:s}):u?r.a.createElement(ne.a,{className:a,size:i,center:s}):null}}]),t}(r.a.Component);ae(oe,"propTypes",{badge:f.a.object,style:f.a.object.isRequired}),ae(oe,"defaultProps",{style:{}});n(2331);var re=n(1376),ie=function(e){var t=e.data;return r.a.createElement("a",{href:t.url,className:"KfeCollection-PcCollegeCard-buttonWrapper"},r.a.createElement("button",{className:"KfeCollection-PcCollegeCard-button"},r.a.createElement(re.a,{className:"KfeCollection-PcCollegeCard-button--svg",width:14,height:14}),t.text))};var ce={general:"general",live:"live",publication:"publication",album:"album",special:"special",manga:"manga"},se=(Object.assign({},ce,{album_chapter:ce.album,album_video_chapter:ce.album,album_paid_column:ce.album,paid_column_chapter:ce.album,training:ce.album,training_bundle:ce.album,training_chapter:ce.album,web_literature:ce.publication,instabook:ce.publication,ebook_audio:ce.publication,publication_chapter:ce.publication,publication_paid_magazine:ce.publication,magazine_section:ce.publication,paid_answer:ce.album}),{live:"Live 讲座",album:"盐选专栏",album_paid_column:"盐选专栏",album_chapter:"盐选专栏",album_video_chapter:"盐选专栏",paid_column_chapter:"盐选专栏",publication:"电子书",publication_chapter:"电子书章节",instabook:"讲书",ebook_audio:"有声书",publication_paid_magazine:"盐选杂志",special:"专题",training:"训练营",training_bundle:"训练营",training_chapter:"训练营",web_literature:"网络文学",magazine_section:"杂志文章",manga:"漫画"}),le={live:"Live 讲座",album:"盐选专栏",album_chapter:"盐选专栏",album_video_chapter:"盐选专栏",album_paid_column:"盐选专栏",paid_column_chapter:"盐选专栏",training:"盐选专栏",training_bundle:"盐选专栏",training_chapter:"盐选专栏",publication:"电子书",publication_chapter:"电子书",instabook:"电子书",ebook_audio:"电子书",publication_paid_magazine:"电子书",special:"电子书",web_literature:"电子书",magazine_section:"电子书",manga:"电子书"},ue={live:ce.live,album:ce.album,album_chapter:ce.album,album_paid_column:ce.album,album_video_chapter:ce.album,training:ce.album,training_bundle:ce.album,training_chapter:ce.album,paid_column_chapter:ce.album,publication:ce.publication,publication_chapter:ce.publication,instabook:ce.publication,ebook_audio:ce.publication,publication_paid_magazine:ce.publication,special:ce.publication,web_literature:ce.publication,magazine_section:ce.publication,manga:ce.publication},de=["live","album","album_chapter","album_video_chapter","paid_column_chapter","publication_chapter","magazine_section","album_paid_column","special"];n(2327);function pe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var he={showId:4514,clickId:4515},fe=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o))),pe(Object(N.default)(n),"handleClick",function(e){n.props.useDefaultZa&&S.a.trackEvent(e.target,{id:he.clickId,action:"OpenUrl"}),n.props.onTitleClick(e)}),pe(Object(N.default)(n),"handleSearchMore",function(e){var t=n.props.zaInfo;S.a.trackEvent(e.target,{id:8209,action:"OpenUrl"},{search:t})}),pe(Object(N.default)(n),"handleBottomMoreClick",function(e){var t=n.props,a=t.zaInfo,o=t.result.object,r=(o=void 0===o?{}:o).commodityType;S.a.trackEvent(e.target,{id:8260,action:"OpenUrl",name:"查看更多"},{search:a,button:{text:"查看更多「".concat(le[r],"」搜索结果")}})}),pe(Object(N.default)(n),"renderHeader",function(){var e=n.props.result,t=(void 0===e?{}:e).object,a=(t=void 0===t?{}:t).commodityType,o=t.header,i=o.cardTitle?o.cardTitle:le[a];return r.a.createElement("div",{className:"KfeCollection-PcCollegeCard-Header"},r.a.createElement("div",{className:"KfeCollection-PcCollegeCard-Header-content"},i))}),pe(Object(N.default)(n),"renderMoreBottom",function(){var e=n.props,t=e.result,a=void 0===t?{}:t,o=e.query,i=void 0===o?{}:o,c=e.zaInfo,s=a.object,l=(s=void 0===s?{}:s).commodityType,u=s.attachedInfoBytes;return r.a.createElement(V,{options:[{module:"Content"},{attached_info_bytes:u},{id:8261},{search:c,button:{text:"查看更多「".concat(le[l],"」搜索结果")}}]},r.a.createElement("div",{className:"KfeCollection-PcCollegeCard-moreBottom",onClick:n.handleBottomMoreClick},r.a.createElement("a",{href:"http://www.zhihu.com/search?q=".concat(i.content,"&type=").concat(ue[l])},"查看更多「",le[l],"」搜索结果"),r.a.createElement(F.a,{className:"KfeCollection-PcCollegeCard-moreIcon",size:20,center:!0})))}),pe(Object(N.default)(n),"renderPcCollegeCard",function(){var e,t,a,o=n.props,i=o.className,c=o.result,s=void 0===c?{}:c,l=o.compact,u=o.query,d=void 0===u?{}:u,p=o.showBottomLink,h=s.object,f=(h=void 0===h?{}:h).body,b=void 0===f?{}:f,m=h.commodityType,v=h.source,g=h.url,O=h.footer,j=h.header,y=void 0===j?{}:j,C=h.splitLabel,k=h.cardVersion,w=h.tabType,N=y.cardTitle,S=void 0===N?"":N,x=y.noMore,T=b.images,I=void 0===T?[]:T,E=b.title,L=b.description,P=b.authors,A=void 0===P?[]:P,M=b.canTry,R=b.button,_=void 0===R?{}:R,z=!!I.length&&!!I[0],B=A[0]||{},D=(e=B.badge)&&0!==e.length?(e.forEach(function(e){"identity"===e.type&&(t?t.push(e):t=[e]),"best_answerer"===e.type&&(a=e)}),{bestAnswerer:a,identity:t}):null,V=-1!==de.indexOf(m)||"ADSENSE"===v,F=!D&&!B.name&&!O,U=S||se[m],q=l&&1==+C,W="zhihu_km_general"===w&&1!=+C&&["album_chapter","album_video_chapter","paid_column_chapter","publication_chapter","magazine_section"].includes(m);return r.a.createElement("div",{className:"\n        KfeCollection-PcCollegeCard-wrapper\n        ".concat(q?"KfeCollection-PcCollegeCard-marginTop":"","\n      ")},q&&n.renderHeader(),W&&r.a.createElement("div",{className:"KfeCollection-PcCollegeCard-DividingLine"}),r.a.createElement("div",{className:"\n          KfeCollection-PcCollegeCard-root\n          ".concat(i,"\n          ").concat(5==+k?"KfeCollection-PcCollegeCard-root-abPadding":"","\n        ")},r.a.createElement("div",{className:"KfeCollection-PcCollegeCard"},z&&r.a.createElement("div",{className:"KfeCollection-PcCollegeCard-image"},r.a.createElement(J,{src:I[0],width:60,height:V?60:80})),r.a.createElement("div",{className:"KfeCollection-PcCollegeCard-top"},r.a.createElement("div",{className:"KfeCollection-PcCollegeCard-title"},r.a.createElement("a",{onClick:n.handleClick,href:g,className:"KfeCollection-PcCollegeCard-link"},r.a.createElement("span",{dangerouslySetInnerHTML:{__html:E}})),!l&&r.a.createElement("span",{className:"KfeCollection-PcCollegeCard-type"},U)),r.a.createElement("div",{className:"KfeCollection-PcCollegeCard-meta"},r.a.createElement("div",{className:"KfeCollection-PcCollegeCard-description ".concat(F?"KfeCollection-PcCollegeCard-moreDescription":""),dangerouslySetInnerHTML:{__html:L}}),r.a.createElement("div",{className:"KfeCollection-PcCollegeCard-status"},r.a.createElement("span",{className:D?"KfeCollection-PcCollegeCard-author":"",dangerouslySetInnerHTML:{__html:B.name}}),D&&r.a.createElement(oe,{badge:D,style:{size:16}}),!!B.name&&!!O&&r.a.createElement("span",{className:"KfeCollection-PcCollegeCard-point"},"·"),r.a.createElement("span",null,O)),!l&&"special"!==m&&p&&!x&&r.a.createElement("div",{className:"KfeCollection-PcCollegeCard-searchMore",onClick:n.handleSearchMore},r.a.createElement("a",{href:"http://www.zhihu.com/search?q=".concat(d.content,"&type=").concat(ue[m])},"查看更多「",le[m],"」搜索结果"),r.a.createElement(H.a,{className:"KfeCollection-PcCollegeCard-moreIcon",size:20,center:!0})))),M&&r.a.createElement("div",{className:"KfeCollection-PcCollegeCard-extra"},r.a.createElement(ie,{data:_})))),l&&2==+C&&n.renderMoreBottom())}),n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.zaInfo,n=e.result,a=void 0===n?{}:n,o=e.useDefaultZa,i=a.object,c=(i=void 0===i?{}:i).attachedInfoBytes;return o?r.a.createElement(V,{options:[{module:"Content",is_ad:!0},{attached_info_bytes:c},{id:he.showId},{search:t}]},this.renderPcCollegeCard()):this.renderPcCollegeCard()}}]),t}(r.a.Component);pe(fe,"propTypes",{className:f.a.string,result:f.a.object.isRequired,compact:f.a.bool.isRequired,onTitleClick:f.a.func,zaInfo:f.a.object,onRef:f.a.func,showBottomLink:f.a.bool,useDefaultZa:f.a.bool}),pe(fe,"defaultProps",{className:"",result:{highlight:{},object:{}},compact:!1,zaInfo:{},onTitleClick:function(){},onRef:function(){},showBottomLink:!0,useDefaultZa:!0});var be=fe,me=n(1147),ve=n(176),ge=n(1663),Oe=(n(2332),n(145)),je=n.n(Oe);function ye(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var Ce=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o))),ye(Object(N.default)(n),"handleClick",function(e){var t=n.props.zaExtra;S.a.trackEvent(e.target,{id:4623,action:"OpenUrl"},Object.assign({},t))}),ye(Object(N.default)(n),"handleClickMore",function(e){var t=n.props,a=t.zaExtra,o=t.result,r=je()(o,"object.attachedInfoBytes","");S.a.setModule(e.target,{module:"Content"},{attached_info_bytes:r}),S.a.trackEvent(e.target,{id:4874,action:"OpenUrl"},Object.assign({},a))}),n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.result,o=t.zaExtra,i=a.object,c=(void 0===i?{}:i).card,s=(c=void 0===c?{}:c).skuItems,l=c.saltPickMeta,u=je()(l,"title",""),d=je()(l,"url","");return r.a.createElement("div",{className:"KfeCollection-PcSaltBrandCard ".concat(n)},r.a.createElement("div",{className:"KfeCollection-PcSaltBrandCard-header"},r.a.createElement(ge.a,{className:"KfeCollection-PcSaltBrandCard-vip"}),r.a.createElement("div",{className:"KfeCollection-PcSaltBrandCard-title",dangerouslySetInnerHTML:{__html:u}})),r.a.createElement("div",{className:"KfeCollection-PcSaltBrandCard-body"},s.map(function(t,n){var a=je()(t,"attachedInfoBytes",""),i=o.search,c=void 0===i?{}:i,s={object:Object.assign({},je()(t,"card",{}),{attachedInfoBytes:a})};return r.a.createElement(V,{key:n,options:[{module:"Content"},{attached_info_bytes:a},{id:4622},Object.assign({},o)]},r.a.createElement(be,{className:"KfeCollection-PcSaltBrandCard-item",key:n,result:s,zaInfo:c,showBottomLink:!1,useDefaultZa:!1,onTitleClick:e.handleClick}))})),!!d&&r.a.createElement("div",{className:"KfeCollection-PcSaltBrandCard-bottom",onClick:this.handleClickMore},r.a.createElement("a",{href:d,className:"KfeCollection-PcSaltBrandCard-more"},"查看全部"),r.a.createElement(H.a,{className:"KfeCollection-PcSaltBrandCard-arrowDown"})))}}]),t}(r.a.Component);ye(Ce,"propTypes",{className:f.a.string,result:f.a.object.isRequired,zaExtra:f.a.object}),ye(Ce,"defaultProps",{className:"",result:{},zaExtra:{}});var ke=Ce,we=n(16),Ne=n(124),Se=n(1222),xe=n(165),Te=n(39),Ie=function(e){return e.replace(/<em>|<\/em>/g,"")},Ee=function(e){return e.replace(/<b>|<\/b>/g,"")},Le=function(e,t,n){var a=/[\s\S]+?(?=<em>)/,o=/[\s\S]+?<\/em>/g,r="",i="",c=0,s=o.exec(e);if(null===s)return c="<b></b>".length,e.substring(0,c+t);for(;null!==s;){var l=Ie(Ee(s[0])),u=i+l,d=r+s[0];if(u.length>t){var p=a.exec(s[0])[0];return i.length+p.length>t?r+=p.substring(0,t-i.length-1):u.length>n?r+=p+"<em>".concat(l.substring(Ee(p).length,n-i.length),"</em>"):r=d,r}i=u,r=d,c=o.lastIndex,s=o.exec(e)}return r+e.substring(c,c+t-i.length)},Pe=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:70,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"...",a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:80;try{var o=Le(e,t,a),r=Ie(e).length;return"".concat(o).concat(r>t?n:"")}catch(t){return Object(Te.isBrowser)()&&(t.message="excerpt error(it is known and probably caused by backend highlight bug)",window.Raven&&window.Raven.captureException(t,{extra:{originHtml:e}})),""}},Ae=n(352),Me=n(163),Re=n(914),_e=n(873),ze=n(927),Be=n(112),De=n(883);function Ve(e){var t=e.url,n=e.title,o=e.clickId;return Object(a.e)(i.Link,{to:t,target:"_blank","data-za-detail-view-id":o||3942},n)}var Fe,He=n(312),Ue=(n(1657),n(1619),{placeholders:{img:" [图片] ",video:" [视频] "}}),qe={name:"4g6ai3",styles:"cursor:pointer;"},We=Object(Ae.b)(function(e){var t=e.question.object,n=e.zaInfo,a=(n=void 0===n?{}:n).cardShowId;return{view:{id:void 0===a?3950:a},module:"QuestionItem",attachedInfoBytes:t.attachedInfoBytes,index:e.index.toString(),content:{type:"Question",token:t.id},trackCardShow:!0}})(Fe=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={isContentExpended:!1},n.onToggleExpend=function(e){n.setState({isContentExpended:e})},n.createClickButtonHandler=function(e){S.a.trackEvent(e.target,{id:8877,action:"Answer"});var t=n.props.question.object.id,a="/question/".concat(t,"?#write");window.open(a)},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.question,t=e.highlight,n=(t=void 0===t?{}:t).title,o=t.description,i=e.object,c=e.object,s=c.id,l=c.title,u=c.description,d=c.type,p=c.answerCount,h=c.relationship,f=void 0===h?{}:h,b=c.updatedTime,m=c.visitsCount,v=c.followerCount,g=this.state.isContentExpended,O="/question/".concat(s),j={id:s,type:d,isFollowing:f.isFollowing},y=Object(a.e)("span",{className:"Highlight",dangerouslySetInnerHTML:{__html:n||l}}),k=o?"问题描述：".concat(o):o,N={};return Object(a.e)(C.d,{className:"SearchResult-Card"},Object(a.e)(Re.a,null,Object(a.e)(_e.e,Object(we.default)({data:i,link:O,title:Object(a.e)("div",{className:"QuestionItem-title"},Object(a.e)(Ve,{url:O,title:y}))},N),Object(a.e)(r.a.Fragment,null,0===p&&Object(a.e)(ze.b,Object(we.default)({css:Object(Ne.a)({".CopyrightRichText-richText":Object.assign({height:"auto"},!1)},""),className:w()({Highlight:!g}),excerpt:Pe(k,ve.c)||k,truncateDisabled:!0,truncateHTMLOptions:Ue,html:u,onToggleExpend:this.onToggleExpend,expanded:g},N),Object(a.e)(De.a,Object(we.default)({className:"QuestionFollowButton Search-questionFollowButton",zaId:8876},j)),Object(a.e)("a",{className:"Search-questionNavItem",target:"_blank",rel:"noopener noreferrer",title:"回答",css:qe,onClick:this.createClickButtonHandler},Object(a.e)(Se.a,{className:"Search-questionNavIcon",size:14}),Object(a.e)("div",{className:"Search-questionNavTitle"}," 写回答")),Object(a.e)("div",{className:"Search-questionNavItem"},Object(a.e)("span",{className:"Search-questionNavTitle"},Object(Me.cnNiceNumber)(m)," 浏览")),Object(a.e)("div",{className:"Search-questionNavItem"},Object(a.e)("span",{className:"Search-questionNavTitle"},Object(Me.cnNiceNumber)(v)," 关注"))),0!==p&&Object(a.e)(_e.a,null,Object(a.e)(De.a,Object(we.default)({className:"QuestionFollowButton Search-questionFollowButton"},j)),Object(a.e)(Be.a,{preset:"plain",to:O,target:"_blank"},p," 个回答"),Object(a.e)("span",{className:"SearchItem-time QuestionItem-time"},Object(He.c)(b)))))))}}]),t}(o.Component))||Fe,Ke=n(23),Ge=n(59),Qe=n(1387),Ze=n(198),Je=n(54),Ye=n(68),Xe=n(1445),$e=n(904),et=n(899),tt=n(879),nt=n(954),at=n(1428),ot=n(1035),rt=n(889),it=n(903),ct=n(18),st=n(1618);function lt(e){var t=e.className,n=e.onClick,o=e.isThanked;return Object(a.e)(Ke.d,{className:t,preset:"plain",onClick:n,icon:st.a,label:o?"取消喜欢":"喜欢"})}lt.propTypes={onClick:f.a.func.isRequired,isThanked:f.a.bool};var ut=n(60),dt=n.n(ut),pt=n(26),ht=n(1090),ft=n.n(ht),bt=n(360),mt=n(1705),vt=[0,.3],gt=[".ContentItem-title a"],Ot=function(e){e&&(Array.isArray(e)||(e=[e]),e.forEach(ft.a))};var jt=function(e){var t=e.children,n=e.onClick,r=e.extra,i=Object(o.useRef)(),c=Object(o.useRef)([]),s=Object(o.useMemo)(function(){return Object(mt.a)(r)},[r]),l=Object(o.useCallback)(function(){Ot(s.impression_tracks)},[s]),u=Object(o.useCallback)(E()(function(){Ot(s.view_tracks)}),[s]),d=Object(o.useCallback)(E()(function(){Ot(s.view_x_tracks)}),[s]),p=Object(o.useCallback)(function(){Ot(s.click_tracks)},[s]);Object(o.useEffect)(function(){c.current=gt.map(function(e){return i.current.querySelector(e)})},[]),Object(o.useEffect)(function(){l()},[l]);var h=Object(o.useCallback)(function(e){c.current.some(function(t){return null==t?void 0:t.contains(e.target)})&&p(),null==n||n(e)},[p,c,n]),f=Object(o.useCallback)(function(e){var t=Object(pt.a)(e,1)[0];t.isIntersecting&&(u(),t.intersectionRatio>=.3&&d())},[u,d]);return Object(a.e)(bt.a,{threshold:vt,onObserve:f},Object(a.e)("div",{ref:i,onClick:h,style:{marginBottom:12}},t))},yt=n(1368),Ct=["click_tracks","view_tracks","view_x_tracks","impression_tracks","conversion_tracks"];var kt,wt,Nt,St=function(e,t){var n=Object(mt.a)(e)||{};return Ct.map(function(e){e in n&&(n[e]=n[e].map(function(e){return Object(yt.a)(e,{poi:t})}))}),JSON.stringify(n)},xt=function(e){return function(t){return dt()(function(n){var r=n[e],i=(r=void 0===r?{}:r).object,c=i.isZhiPlus,s=i.extra,l=n.index,u=Object(o.useMemo)(function(){return c?St(s,l):{}},[s,l,c]);return c?Object(a.e)(jt,{extra:u,index:l},Object(a.e)(t,n)):Object(a.e)(t,n)},t)}};n(1441);var Tt,It,Et,Lt,Pt,At,Mt,Rt,_t,zt,Bt=xt("answer")(kt=Object(b.connect)(function(e,t){var n,a=Object.assign({cardShowId:3950,clickId:3942,expandId:3937},t.zaInfo),o=t.answer,r=o.object.answerObj?Object.assign({},Object(Je.c)(e,{id:o.object.answerObj}),{},{attachedInfoBytes:(n=o.object).attachedInfoBytes,answerType:"paid",paidInfo:{content:n.body&&n.body.content,hasPurchased:n.label&&"svip"===n.label.commodityType}}):o.object,i=Object.assign({},r,{},r.question&&{question:Object.assign({},r.question,{},Object(Ye.Z)(e,r.question))});return{zaInfo:a,answer:Object.assign({},o,{object:i}),switches:e.switches}},{updateAnswerVote:Je.K,updateAnswerThank:Je.I,updateAnswerUnhelpful:Je.J,updateAnswerReshipmentSettings:Je.F,updateAnswerCommentPermission:Je.E,updateAnswerCollapsed:Je.D,updateAnswerStick:Je.H,deleteAnswer:Je.h,restoreAnswer:Je.z,updateAnswer:Je.C,loadAnswerForSettings:Je.s,updateAnswerReward:Je.G})(kt=Object(Ae.b)(function(e){var t=e.answer.object;return{view:{id:e.zaInfo.cardShowId},module:"AnswerItem",attachedInfoBytes:t.attachedInfoBytes,index:e.index.toString(),content:{type:"Answer",token:t.id},trackCardShow:!0}})((Nt=wt=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={pureTitle:null,commentsShown:!1,commentsAutoFocus:!0,reportModalShown:!1,deleteModalShown:!1,favlistsShown:!1,commentPattern:"fixed",isContentExpended:!1},n.onToggleExpend=function(e){n.setState({isContentExpended:e})},n.toggleCommentButton=function(e,t){n.setState(Object.assign({},t))},n.closeCommentContainer=function(){n.setState({commentsShown:!1});var e=n.props.onCloseComment;"function"==typeof e&&e()},n.handlePositionStatusChange=function(e){n.setState({positionStatus:e})},n.handleReportOpen=function(){n.context.authRequired(function(){n.setState({reportModalShown:!0}),S.a.trackEvent(n.menuNode,{id:3946,action:"Report",element:"Button",is_intent:!0})},ct.U.report)()},n.handleReportHide=function(){n.setState({reportModalShown:!1})},n.handleFavlistsShown=function(){S.a.trackEvent(n.favButtonRef,{id:3944,action:"Collect",element:"Button",is_intent:!0}),n.context.authRequired(function(){return n.setState({favlistsShown:!0})},ct.U.favlists)()},n.handleFavlistHide=function(){n.setState({favlistsShown:!1})},n.handleLogMoreClick=function(){S.a.trackEvent(n.logMoreRef,{action:"Click",element_name:"MoreAction"})},n.handleUpdateThanked=n.context.authRequired(function(e){var t=n.props,a=t.answer.object,o=a.id,r=a.relationship.isThanked,i=t.updateAnswerThank,c=!r;S.a.trackEvent(e.target,{action:c?"Thank":"UnThank",element:"Button"}),i(o,c)},ct.U.thank),n.handleUpdateUnhelpful=n.context.authRequired(function(){var e=n.props,t=e.answer.object,a=t.id,o=t.relationship.isNothelp;(0,e.updateAnswerUnhelpful)(a,!o)},ct.U.unhelpful),n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"renderOptions",value:function(){var e=this,t=this.props.answer.object.relationship,n=(t=void 0===t?{}:t).isNothelp,o=t.isAuthor,r={toggler:Object(a.e)(Ke.d,{onRef:function(t){return e.logMoreRef=t},preset:"plain",style:{padding:"0 1px"},icon:Qe.a}),onOpen:this.handleLogMoreClick,reversed:!0,menuClassName:"AnswerItem-selfMenu",itemClassName:"AnswerItem-selfMenuItem"};return o?null:Object(a.e)(Ge.c,Object(we.default)({ref:function(t){return e.menuNode=t}},r),Object(a.e)(Ge.b,{onClick:this.handleUpdateUnhelpful},n?"撤销没有帮助":"没有帮助"),Object(a.e)(Ge.b,{onClick:this.handleReportOpen},"举报"))}},{key:"render",value:function(){var e=this,t=this.props.zaInfo,n=this.props.answer,r=n.highlight,i=(r=void 0===r?{}:r).title,c=n.object,s=n.object,l=s.author,u=s.id,d=s.question,p=d.name,h=d.id,f=s.excerpt,b=s.content,m=s.commentCount,v=s.adminClosedComment,g=void 0!==v&&v,O=s.createdTime,j=s.updatedTime,y=s.relationship,k=(y=void 0===y?{}:y).isThanked,N=y.isAuthor,S=s.thumbnailInfo,x=((S=void 0===S?{}:S).thumbnails,n.byComment),T=n.itemProp,I=void 0===T?"answer":T,E="/question/".concat(h,"/answer/").concat(u),L=this.state,P=L.pureTitle,A=L.reportModalShown,M=L.favlistsShown,R=L.commentsShown,_=L.commentsAutoFocus,z=L.commentPattern,B=L.positionStatus,D=L.isContentExpended,V="".concat(l.name?"<b>".concat(l.name,"</b>："):"").concat(f),F=l.name&&l.name.replace(/<\/?em>/g,""),H=Object.assign({},l,{name:F}),U=Object(a.e)("span",{className:"Highlight",ref:function(t){t&&null===P&&e.setState({pureTitle:t.textContent})},dangerouslySetInnerHTML:{__html:i||p}}),q={},W=("paid"===c.answerType?c.paidInfo&&c.paidInfo.content:b)||f||"";return Object(a.e)(C.d,{className:w()("SearchResult-Card",{"SearchResult-CardWithImage":!1})},Object(a.e)(Re.a,null,Object(a.e)(_e.e,{className:"AnswerItem",data:c,link:E,name:u,itemProp:I,itemType:"http://schema.org/Answer",title:Object(a.e)("div",{itemProp:"zhihu:question",itemType:"http://schema.org/Question",itemScope:!0},Object(a.e)("meta",{itemProp:"url",content:"https://www.zhihu.com/question/".concat(h)}),Object(a.e)("meta",{itemProp:"name",content:P||""}),Object(a.e)(Ve,{clickId:t.clickId,url:E,title:U})),itemScope:!0},Object(a.e)(ze.b,Object(we.default)({className:w()({Highlight:!D}),excerpt:Pe(V,ve.c)||V,onPositionStatusChange:this.handlePositionStatusChange,html:W,data:c,onToggleExpend:this.onToggleExpend,truncateDisabled:!0,expanded:D,hasVideo:!0,zaIds:{expand:t.expandId},before:Object(a.e)(o.Fragment,null,Object(a.e)("div",{className:"SearchItem-meta SearchItem-authorInfo"},Object(a.e)(rt.a,{preset:"plain",author:H,extra:!this.context.currentUser})),Object(a.e)(Xe.b,{answer:c})),after:Object(a.e)("div",null,Object(a.e)(Xe.a,{answer:c}),Object(a.e)(ze.a,{created:O,updated:j,href:E}))},q),Object(a.e)(at.a,{answer:c,positionStatus:B,zaIds:{voteUp:3938,voteDown:3940}}),Object(a.e)($e.a,{onClick:this.toggleCommentButton,commentsShown:R,commentClosed:g,count:m,positionStatus:B,zaInfos:{toggleComment:3943}}),!D&&Object(a.e)("span",{className:"SearchItem-time"},Object(He.c)(j)),D&&Object(a.e)(it.a,{id:u,type:"answer",title:P||"",authorName:l&&l.name,href:E,positionStatus:B,zaShareId:3945}),D&&Object(a.e)(ot.a,{onRef:function(t){return e.favButtonRef=t},onClick:this.handleFavlistsShown,label:"收藏"}),D&&!N&&Object(a.e)(lt,{onClick:this.handleUpdateThanked,isThanked:k}),D&&this.renderOptions()),Object(a.e)(et.a,{shown:R,autoFocus:_,parent:c,byComment:x,commentPattern:z,onClose:this.closeCommentContainer,zaInfo:{zaSubmitCommentId:3952},needLoadCommentPermission:!0}),!1,Object(a.e)(tt.a,{type:"answer",urlToken:u,shown:A,onClose:this.handleReportHide,zaEnabled:!0}),Object(a.e)(nt.a,{id:u,type:"answer",shown:M,onClose:this.handleFavlistHide,zaEnabled:!0}))))}}]),t}(o.Component),wt.contextTypes={currentUser:f.a.object,authRequired:f.a.func},kt=Nt))||kt)||kt)||kt,Dt=n(1088),Vt=n(884),Ft=n(375),Ht=(n(1522),xt("article")(Tt=Object(Ae.b)(function(e){var t=e.article.object,n=e.zaInfo,a=(n=void 0===n?{}:n).cardShowId;return{view:{id:void 0===a?3950:a},module:"article"===t.type?"PostItem":"PromotionItem",attachedInfoBytes:t.attachedInfoBytes,index:e.index.toString(),content:{type:"Post",token:t.id.toString()},trackCardShow:!0}})(Tt=Object(b.connect)(null,{updateArticleVote:Ft.e})((Et=It=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={pureTitle:null,commentsShown:!1,commentsAutoFocus:!0,favlistsShown:!1,commentPattern:"fixed",isContentExpended:!1},n.onToggleExpend=function(e){n.setState({isContentExpended:e})},n.handleCommentsShown=function(e,t){n.setState(t)},n.handlePositionStatusChange=function(e){n.setState({positionStatus:e})},n.handleCommentsHide=function(){n.setState({commentsShown:!1})},n.handleFavlistsShown=n.context.authRequired(function(){S.a.trackEvent(n.favButtonRef,{id:3944,action:"Collect",element:"Button",is_intent:!0}),n.setState({favlistsShown:!0})},ct.U.favlists),n.handleFavlistHide=function(){n.setState({favlistsShown:!1})},n.handleVote=function(e){var t=n.props,a=t.article.object.id;(0,t.updateArticleVote)(a,e)},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.article,n=t.highlight,o=(n=void 0===n?{}:n).title,r=t.object,i=t.object,c=i.title,s=i.commentCount,l=i.id,u=i.voteupCount,d=i.author,p=i.excerpt,h=i.content,f=i.type,b=i.voting,m=i.createdTime,v=i.updatedTime,g=i.thumbnailInfo,O=((g=void 0===g?{}:g).thumbnails,this.state),j=O.pureTitle,y=O.positionStatus,k=O.favlistsShown,N=O.commentsShown,S=O.commentsAutoFocus,x=O.commentPattern,T=O.isContentExpended,I=this.context.currentUser===d.urlToken,E="article"===f?"".concat(ct.m,"/p/").concat(l):"".concat(ct.L,"/p/").concat(l),L=Object(a.e)("span",{className:"Highlight",ref:function(t){t&&null===j&&e.setState({pureTitle:t.textContent})},dangerouslySetInnerHTML:{__html:o||c}}),P="".concat(d.name?"<b>".concat(d.name,"</b>："):"").concat(p),A=d.name&&d.name.replace(/<\/?em>/g,""),M=Object.assign({},d,{name:A}),R={};return Object(a.e)(C.d,{className:w()("SearchResult-Card",{"SearchResult-CardWithImage":!1})},Object(a.e)(Re.a,null,Object(a.e)(_e.e,{className:"ArticleItem",data:r,link:E,title:Object(a.e)(Ve,{url:E,title:L}),itemProp:"article"},Object(a.e)(ze.b,Object(we.default)({className:w()({Highlight:!T,"SearchItem-promotion":"promotion"===f}),itemProp:"articleBody",data:r,excerpt:Pe(P,ve.c)||P,onPositionStatusChange:this.handlePositionStatusChange,truncateDisabled:!0,html:h||p||"",onToggleExpend:this.onToggleExpend,expanded:T,zaIds:{expand:3937},before:Object(a.e)("div",{className:"SearchItem-meta SearchItem-authorInfo"},"article"===f?Object(a.e)(rt.a,{preset:"plain",author:M,extra:!this.context.currentUser}):Object(a.e)("span",{className:"SearchItem-authorName"},d.name)),after:"article"===f&&Object(a.e)(ze.a,{created:m,updated:v,href:E})},R),Object(a.e)(Dt.a,{type:f,count:u,onVote:this.handleVote,voting:b,isOwner:I,zaIds:{voteUp:3938,voteDown:3940}}),Object(a.e)($e.a,{onClick:this.handleCommentsShown,commentsShown:N,commentClosed:!1,count:s,positionStatus:y,zaInfos:{toggleComment:3943}}),!T&&Object(a.e)("span",{className:"SearchItem-time"},Object(He.c)(v)),T&&Object(a.e)(ot.a,{onRef:function(t){return e.favButtonRef=t},onClick:this.handleFavlistsShown,label:"收藏"}),T&&Object(a.e)(it.a,{id:l,type:"article",url:E,title:j||"",authorName:d&&d.name,positionStatus:y,zaShareId:3945}),T&&!I&&Object(a.e)(Vt.a,{id:l,type:f,zaReportId:3946})),Object(a.e)(nt.a,{id:l,type:"article",shown:k,onClose:this.handleFavlistHide,zaEnabled:!0}),Object(a.e)(et.a,{parent:r,commentPattern:x,shown:N,autoFocus:S,onClose:this.handleCommentsHide,zaInfo:{zaSubmitCommentId:3952},needLoadCommentPermission:!0}),!1)))}}]),t}(o.Component),It.contextTypes={currentUser:f.a.object,authRequired:f.a.func},Tt=Et))||Tt)||Tt)||Tt),Ut=n(359),qt=n(1620),Wt=n(1586),Kt=n(871),Gt=Object(Ae.b)(function(e){var t=e.column.object,n=e.zaInfo,a=(n=void 0===n?{}:n).cardShowId;return{view:{id:void 0===a?3950:a},module:"ColumnItem",attachedInfoBytes:t.attachedInfoBytes,index:e.index.toString(),content:{type:"Column",token:t.id},trackCardShow:!0}})((At=Pt=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).handleFollowButtonClick=function(e){var t=n.props.column.object.isFollowing;return S.a.trackEvent(e.target,Object(ve.k)(t)),!0},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.column,t=e.highlight,n=(t=void 0===t?{}:t).title,o=t.description,r=e.object,c=e.object,s=c.id,l=c.type,u=c.articlesCount,d=c.description,p=c.title,h=c.followers,f=c.author,b=void 0===f?{}:f,m=c.isFollowing,v=this.props,g=v.query,O=v.showMore,j=!(void 0===h||void 0===u||void 0===b),y=this.context.currentUser,k=Object(a.e)("span",{className:"Highlight",dangerouslySetInnerHTML:{__html:n||p||""}}),w=o||d,N="".concat(ct.E,"/column/").concat(s),S=y&&y.urlToken===b.urlToken,x={};return Object(a.e)(C.d,{className:"SearchResult-Card"},Object(a.e)(Re.a,null,Object(a.e)(_e.e,Object(we.default)({data:r,link:N,image:Object(a.e)("div",{className:"SearchItem-avatarWrapper"},Object(a.e)(Wt.a,{avatar:!0,target:"_blank",column:r,avatarProps:{large:!0,alt:"打开专栏主页"}})),title:Object(a.e)("div",null,Object(a.e)(Wt.a,{column:r,target:"_blank","data-za-detail-view-id":3942},k),O&&Object(a.e)("span",{className:"SearchItem-type"},"专栏")),meta:Object(a.e)("div",null,Object(a.e)(Ut.a,{className:"SearchItem-meta Highlight",html:w}),j&&Object(a.e)("div",{className:"ContentItem-status"},Object(a.e)("span",{className:"Search-statusLink"},"创建者：",Object(a.e)(Kt.a,{target:"_blank",user:b})),Object(a.e)(qt.a,null),Object(a.e)(i.Link,{className:"Search-statusLink",target:"_blank",to:"".concat(N,"/followers")},"".concat(Object(Me.formatNumber)(h)," 关注")),Object(a.e)(qt.a,null),Object(a.e)(i.Link,{className:"Search-statusLink",target:"_blank",to:N},"".concat(Object(Me.formatNumber)(u)," 文章"))),O&&Object(a.e)("div",{className:"Search-more"},Object(a.e)(i.Link,{target:"_blank",to:"/search?q=".concat(g,"&type=column"),"data-za-detail-view-element_name":"ViewAll"},"查看更多「专栏」搜索结果"),Object(a.e)(F.a,{size:20,fill:"#175199"}))),extra:!S&&Object(a.e)(De.a,{onClick:this.handleFollowButtonClick,id:s,type:l,isFollowing:m,preset:"primary",useCustomZa:!0})},x))))}}]),t}(o.Component),Pt.contextTypes={currentUser:f.a.object},Lt=At))||Lt,Qt=n(1108),Zt=Object(Ae.b)(function(e){var t=e.topic.object,n=void 0===t?{}:t,a=e.zaInfo,o=(a=void 0===a?{}:a).cardShowId;return{view:{id:void 0===o?3950:o},module:"TopicItem",attachedInfoBytes:n.attachedInfoBytes,index:e.index.toString(),content:{type:"Topic",token:n.id},trackCardShow:!0}})(Mt=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).handleFollowButtonClick=function(e){var t=n.props.topic.object.isFollowing;return S.a.trackEvent(e.target,Object(ve.k)(t)),!0},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.topic,t=e.highlight,n=(t=void 0===t?{}:t).title,o=t.description,r=e.object,c=e.object,s=c.type,l=c.id,u=c.name,d=c.description,p=c.questionsCount,h=c.topAnswerCount,f=c.followersCount,b=c.isFollowing,m=this.props,v=m.query,g=m.showMore,O=!(void 0===f||void 0===p||void 0===h),j=Object(a.e)("span",{className:"Highlight",dangerouslySetInnerHTML:{__html:n||u}}),y=o||d,k="//www.zhihu.com/topic/".concat(l),w={};return Object(a.e)(C.d,{className:"SearchResult-Card"},Object(a.e)(Re.a,null,Object(a.e)(_e.e,Object(we.default)({image:Object(a.e)("div",{className:"SearchItem-avatarWrapper"},Object(a.e)(Qt.a,{avatar:!0,avatarProps:{large:!0,alt:"打开话题页"},topic:r,target:"_blank"})),data:r.object,link:k,title:Object(a.e)("div",null,Object(a.e)(Qt.a,{target:"_blank",topic:r,"data-za-detail-view-id":3942},j),g&&Object(a.e)("span",{className:"SearchItem-type"},"话题")),meta:Object(a.e)("div",null,Object(a.e)(Ut.a,{className:"SearchItem-meta Highlight",html:y||""}),O&&Object(a.e)("div",{className:"ContentItem-status"},Object(a.e)(i.Link,{className:"Search-statusLink",to:"/topic/".concat(l,"/followers"),target:"_blank"},"".concat(Object(Me.formatNumber)(f)," 关注")),Object(a.e)(qt.a,null),Object(a.e)(i.Link,{className:"Search-statusLink",to:"/topic/".concat(l,"/questions"),target:"_blank"},"".concat(Object(Me.formatNumber)(p)," 问题")),Object(a.e)(qt.a,null),Object(a.e)(i.Link,{className:"Search-statusLink",to:"/topic/".concat(l,"/top-answers"),target:"_blank"},"".concat(Object(Me.formatNumber)(h)," 精华内容"))),g&&Object(a.e)("div",{className:"Search-more"},Object(a.e)(i.Link,{target:"_blank",to:"/search?q=".concat(v,"&type=topic"),"data-za-detail-view-element_name":"ViewAll"},"查看更多「话题」搜索结果"),Object(a.e)(F.a,{size:20,fill:"#175199"}))),extra:Object(a.e)(De.a,{onClick:this.handleFollowButtonClick,id:l,type:s,isFollowing:b,preset:"primary",useCustomZa:!0})},w))))}}]),t}(o.Component))||Mt,Jt=(n(1247),Object(Ae.b)(function(e){var t=e.user.object,n=(t=void 0===t?{}:t).id,a=t.attachedInfoBytes,o=e.zaInfo,r=(o=void 0===o?{}:o).cardShowId;return{view:{id:void 0===r?3950:r},module:"UserItem",attachedInfoBytes:a,index:e.index.toString(),content:{type:"User",member_hash_id:n},trackCardShow:!0}})((zt=_t=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).handleFollowButtonClick=function(e){var t=n.props.user.object.isFollowing;return S.a.trackEvent(e.target,Object(ve.k)(t)),!0},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.user,t=e.highlight,n=(t=void 0===t?{}:t).title,o=t.description,r=e.object,c=e.object,s=(c=void 0===c?{}:c).name,l=c.headline,u=c.type,d=c.urlToken,p=c.articlesCount,h=c.answerCount,f=c.followerCount,b=c.isFollowing,m=c.userType,v=c.gender,g=this.props,O=g.query,j=g.showMore,y=Object(a.e)("span",{className:"Highlight",dangerouslySetInnerHTML:{__html:n||s}}),k=o||l,w=!(void 0===f||void 0===p||void 0===h),N="organization"===m,S=Object.assign({},r,{isOrg:N}),x="/".concat(N?"org":"people","/").concat(d),T=this.context.currentUser,I={};return Object(a.e)(C.d,{className:"SearchResult-Card"},Object(a.e)(Re.a,null,Object(a.e)(_e.e,Object(we.default)({image:Object(a.e)("div",{className:"SearchItem-avatarWrapper"},Object(a.e)(Kt.a,{avatar:!0,avatarProps:{large:!0,alt:"打开用户主页"},user:S,target:"_blank"})),data:S,link:x,title:Object(a.e)("div",{className:"SearchItem-userTitleWrapper"},Object(a.e)(Kt.a,{target:"_blank",className:"SearchItem-userTitle",user:S,"data-za-detail-view-id":3942},y),j&&Object(a.e)("span",{className:"SearchItem-type"},"用户")),meta:Object(a.e)("div",null,Object(a.e)(Ut.a,{className:"SearchItem-meta Highlight",html:k||""}),w&&Object(a.e)("div",{className:"ContentItem-status"},Object(a.e)(i.Link,{className:"Search-statusLink",to:"".concat(x,"/answers"),target:"_blank"},"".concat(Object(Me.formatNumber)(h)," 回答")),Object(a.e)(qt.a,null),Object(a.e)(i.Link,{className:"Search-statusLink",to:"".concat(x,"/posts"),target:"_blank"},"".concat(Object(Me.formatNumber)(p)," 文章")),Object(a.e)(qt.a,null),Object(a.e)(i.Link,{className:"Search-statusLink",to:"".concat(x,"/followers"),target:"_blank"},"".concat(Object(Me.formatNumber)(f)," 关注者"))),j&&Object(a.e)("div",{className:"Search-more"},Object(a.e)(i.Link,{target:"_blank",to:"/search?q=".concat(O,"&type=people"),"data-za-detail-view-element_name":"ViewAll"},"查看更多「用户」搜索结果"),Object(a.e)(F.a,{size:20,fill:"#175199"}))),extra:!(T&&T.urlToken===d)&&Object(a.e)(De.a,{onClick:this.handleFollowButtonClick,id:d,type:u,isFollowing:b,gender:v,preset:"primary",useCustomZa:!0})},I))))}}]),t}(o.Component),_t.contextTypes={currentUser:f.a.object},Rt=zt))||Rt),Yt=function(e){return r.a.createElement(Y.a,e,r.a.createElement("path",{d:"M13.37 12.042V17h5.57v-5.164h-2.86c0-1.798 1.64-3.42 2.92-3.743V6c-2.174.354-5.63 2.417-5.63 6.042zm-8.37 0V17h5.57v-5.164H7.71c0-1.798 1.639-3.42 2.92-3.743V6C8.455 6.354 5 8.417 5 12.042z",fillRule:"evenodd"}))};Yt.defaultProps={name:"DoubleQuotationLeft"};var Xt=Yt,$t=function(e){return r.a.createElement(Y.a,e,r.a.createElement("path",{d:"M10.63 10.958V6H5.06v5.164h2.86c0 1.798-1.64 3.42-2.92 3.743V17c2.174-.354 5.63-2.417 5.63-6.042zm8.37 0V6h-5.57v5.164h2.86c0 1.798-1.639 3.42-2.92 3.743V17c2.175-.354 5.63-2.417 5.63-6.042z",fillRule:"evenodd"}))};$t.defaultProps={name:"DoubleQuotationRight"};var en,tn,nn,an,on,rn,cn=$t,sn=function(e){function t(){var e,n;Object(s.a)(this,t);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).renderContent=function(e,t){switch(e.type){case"answer":return Object(a.e)(Bt,{index:t,answer:{type:"answer",object:e},zaInfo:{cardShowId:3949}});case"article":return Object(a.e)(Ht,{index:t,article:{type:"article",object:e},zaInfo:{cardShowId:3949}});case"question":return Object(a.e)(We,{preset:"plain",index:t,question:{type:"question",object:e},zaInfo:{cardShowId:3949}});default:return null}},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.items,o=t.className;return Object(a.e)("div",{className:w()("".concat("MinorHotSpot","-ContentList"),o)},n.map(function(t,n){return t?Object(a.e)("div",{key:"".concat(t.type,"-").concat(t.id),className:"".concat("MinorHotSpot","-ContentContainer")},e.renderContent(t,n)):null}))}}]),t}(o.Component),ln=Object(b.connect)(function(e,t){var n=e.entities;return{items:t.contentList.map(function(e){var t=e.id,a=e.schema;return(n["".concat(a,"s")]||{})[t]})}})(sn),un=n(2309),dn=n.n(un),pn=(n(2310),n(2311)),hn=n.n(pn),fn=(n(2312),function(e){var t=e.description;return Object(a.e)("div",{className:"".concat("MinorHotSpot","-Description")},Object(a.e)(Xt,{className:w()("".concat("MinorHotSpot","-Quote"),"".concat("MinorHotSpot","-Quote--left"))}),Object(a.e)("span",{className:"".concat("MinorHotSpot","-DescriptionText")},t),Object(a.e)(cn,{className:w()("".concat("MinorHotSpot","-Quote"),"".concat("MinorHotSpot","-Quote--right"))}))}),bn=function(e){function t(e){var n;Object(s.a)(this,t),n=Object(u.a)(this,Object(d.a)(t).call(this,e));var a=e.item.object,o=a.contentList,r=void 0===o?[]:o,i=a.cardType;return n.MAX_DISPLAY_COUNT="detailed"===i?3:2,n.state={showCertainContents:r.length>n.MAX_DISPLAY_COUNT},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.item.object,n=t.description,o=t.title,r=t.contentList,i=t.cardType,c=t.type,s=this.state.showCertainContents,l="detailed"===i;return Object(a.e)(C.d,{className:"SearchResult-Card"},Object(a.e)(Re.a,null,Object(a.e)("div",{className:"MinorHotSpot"},Object(a.e)("div",{className:w()("".concat("MinorHotSpot","-TitleLine"),Object(y.a)({},"".concat("MinorHotSpot","-TitleLine--hasPaddingBottom"),!l))},c===ve.f.minorHotSpot&&!1,c===ve.f.minorHotSpot&&Object(a.e)("img",{src:dn.a,alt:""}),c!==ve.f.minorHotSpot&&Object(a.e)("img",{src:hn.a,alt:""}),Object(a.e)("h1",{dangerouslySetInnerHTML:{__html:o}})),n&&l&&Object(a.e)(fn,{description:n}),s?Object(a.e)(ln,{className:"".concat("MinorHotSpot","-ContentList--hasPaddingBottom"),contentList:r.slice(0,this.MAX_DISPLAY_COUNT)}):Object(a.e)(ln,{contentList:r}),s&&Object(a.e)("div",{className:"".concat("MinorHotSpot","-ShowAll"),onClick:function(){e.setState({showCertainContents:!1})}},"展开更多 ".concat(r.length-this.MAX_DISPLAY_COUNT," 个内容"),Object(a.e)(H.a,{size:24,center:!0})))))}}]),t}(o.Component),mn=n(199),vn=n(1581),gn=(n(2313),"SearchTopicReview"),On=Object(b.connect)(function(e,t){return{updatedStatus:e.search.topicReview[t.id]}},{likeTopic:O.k,dislikeTopic:O.e,cancelLikeTopic:O.c,cancelDislikeTopic:O.b})((nn=tn=function(e){function t(){var e,n;Object(s.a)(this,t);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).handleStatusClick=n.context.authRequired(function(e,t){var a=n.props,o=a.topicVote.totalVotes,r=a.updatedStatus,i=(r=void 0===r?{}:r).totalVotes,c=a.likeTopic,s=a.dislikeTopic,l=a.cancelLikeTopic,u=a.cancelDislikeTopic,d=a.id,p=i||o;switch(e){case"Upvote":c(d,p,t);break;case"UnUpvote":l(d,p);break;case"Downvote":s(d,p,t);break;case"UnDownvote":u(d)}}),n.renderMyReviewStatus=function(){var e,t,o=n.props,r=o.topicVote.status,i=o.updatedStatus,c=(i=void 0===i?{}:i).status||r;return Object(a.e)("div",{className:"".concat(gn,"-MyStatus")},Object(a.e)("span",{className:"recommendStatus"},Object(a.e)("span",{className:w()("".concat(gn,"-Icon"),(e={},Object(y.a)(e,"".concat(gn,"-Icon--like"),"like"!==c),Object(y.a)(e,"".concat(gn,"-Icon--liked"),"like"===c),e)),onClick:function(){return n.handleStatusClick("like"===c?"UnUpvote":"Upvote",c)}},Object(a.e)(vn.a,{size:14,center:!0})),Object(a.e)("span",{className:w()("".concat(gn,"-Icon"),(t={},Object(y.a)(t,"".concat(gn,"-Icon--dislike"),"dislike"!==c),Object(y.a)(t,"".concat(gn,"-Icon--disliked"),"dislike"===c),t)),onClick:function(){return n.handleStatusClick("dislike"===c?"UnDownvote":"Downvote",c)}},Object(a.e)(vn.a,{size:14,center:!0}))))},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.topicVote,n=t.ratio,r=t.ratioStatus,i=t.totalVotes,c=e.updatedStatus,s=(c=void 0===c?{}:c).totalVotes,l=e.className,u=s||i;return Object(a.e)("div",{className:w()(gn,l)},"normal"===r?Object(a.e)(o.Fragment,null,Object(a.e)("div",{className:"".concat(gn,"-Score")},Object(a.e)("span",{className:"".concat(gn,"-ScoreText")},"".concat((100*n).toFixed(0),"%"))),Object(a.e)("div",{className:"".concat(gn,"-Text")},"知友推荐"),Object(a.e)("div",{className:"".concat(gn,"-SubText ").concat(gn,"-RecommendText")},Object(Me.cnNiceNumber)(u),"评价")):Object(a.e)(o.Fragment,null,Object(a.e)("div",{className:"".concat(gn,"-Text ").concat(gn,"-BigText")},"你推荐吗？"),Object(a.e)("div",{className:"".concat(gn,"-SubText")},"评价人数不足"),Object(a.e)("div",{className:"".concat(gn,"-SubText ").concat(gn,"-LackReviewText")},"数据积累中")),this.renderMyReviewStatus())}}]),t}(o.Component),tn.contextTypes={authRequired:f.a.func},en=nn))||en,jn=(n(2314),function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.id,n=e.discussionCount;return Object(a.e)(i.Link,{target:"_blank",className:"SearchTopicHeaderLink",to:"/topic/".concat(t,"/hot"),"data-za-detail-view-id":4358},"查看全部 ",Object(Me.cnNiceNumber)(n),"个讨论",Object(a.e)(F.a,{text:!0,center:!0}))}}]),t}(o.Component)),yn=(n(2315),"SearchTopicHeader"),Cn={TALL:0,SQUARE:1},kn=function(e){function t(){var e,n;Object(s.a)(this,t);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).state={showMoreAtCorner:!1},n.onAccessContent=function(e,t){t===document.activeElement&&window.open("/topic/".concat(n.props.id))},n.renderDescriptions=function(){var e=n.props.meta,t=void 0===e?{}:e,o=t.scores,r=void 0===o?[]:o,i=t.wikiDescription,c=void 0===i?[]:i,s=t.template,l=(void 0===s?{}:s).avatarType===Cn.SQUARE||r[0]?1:2;return c.map(function(e,t){if(!(t>=l)&&e){var n=e.split(":"),o=Object(pt.a)(n,2),r=o[0],i=o[1];return Object(a.e)("div",{className:"".concat(yn,"-Meta"),key:e},Object(a.e)("span",{className:"".concat(yn,"-MetaKey")},"".concat(r,"：")),Object(a.e)("span",{className:"".concat(yn,"-MetaValue")},i))}})},n.getIntroLineCount=function(){var e=n.props.meta,t=void 0===e?{}:e,a=t.scores,o=void 0===a?[]:a,r=t.wikiDescription,i=void 0===r?[]:r,c=t.template,s=void 0===c?{}:c,l=4;return s.avatarType!==Cn.TALL&&(l-=1),o[0]&&(l-=1),i[0]&&(l-=1),s.avatarType===Cn.TALL&&!o[0]&&i.length>1&&(l=2),l},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){if(this.introRef){var e=this.introRef.querySelector(".".concat(yn,"-IntroTail"));if(e){var t=e.getBoundingClientRect().top,n=this.introRef.getBoundingClientRect();t>=n.height+n.top&&this.setState({showMoreAtCorner:!0})}}}},{key:"render",value:function(){var e=this,t=this.props,n=t.id,o=t.meta,r=void 0===o?{}:o,c=t.name,s=t.avatarUrl,l=t.attachedInfoBytes,u=t.introduction,d=t.topicVote,p=t.showDiscussionLink,h=t.discussionCount,f=t.pubInfo,b=this.state.showMoreAtCorner,m=r.avatarUrl,v=r.title,g=r.template,O=void 0===g?{}:g,j=d||{},C=j.ratio,k=j.totalVotes,N=1===f.status||2===f.status;return Object(a.e)(Ae.a,{module:"ContentList",attachedInfoBytes:l},Object(a.e)("div",{className:yn},Object(a.e)(mn.c,{keyMap:{ACCESS:"enter"},handlers:{ACCESS:this.onAccessContent}}),Object(a.e)(i.Link,{target:"_blank",className:w()("".concat(yn,"-ImageWrapper"),Object(y.a)({},"".concat(yn,"-ImageWrapper--tall"),O.avatarType===Cn.TALL)),to:"/topic/".concat(n),"data-za-detail-view-id":4361},Object(a.e)("img",{src:m||Object(Ze.imgUrl)(s,"xl"),className:"".concat(yn,"-Image"),alt:"打开话题页"})),Object(a.e)("div",{className:"".concat(yn,"-Info")},Object(a.e)("div",{className:"".concat(yn,"-TitleWrapper")},Object(a.e)("h2",{className:"".concat(yn,"-Title")},Object(a.e)(i.Link,{target:"_blank",to:"/topic/".concat(n),dangerouslySetInnerHTML:{__html:v||c},"data-za-detail-view-id":3942})),Object(a.e)("span",{className:"SearchItem-type"},"话题")),d&&k>=25&&Object(a.e)("div",{className:"".concat(yn,"-Meta")},Object(a.e)("span",{className:"".concat(yn,"-MetaKey")},"知乎评分："),Object(a.e)("span",{className:"".concat(yn,"-MetaValue")},(10*C).toFixed(1))),this.renderDescriptions(),u&&Object(a.e)("div",{className:"".concat(yn,"-IntroductionWrapper"),ref:function(t){return e.introRef=t},style:{WebkitLineClamp:this.getIntroLineCount(),maxHeight:22*this.getIntroLineCount()}},Object(a.e)("span",{className:"".concat(yn,"-MetaKey")},"简介："),Object(a.e)("div",{className:"".concat(yn,"-Introduction"),dangerouslySetInnerHTML:{__html:u}}),Object(a.e)(i.Link,{target:"_blank",to:"/topic/".concat(n,"/intro"),className:"".concat(yn,"-IntroTail"),"data-za-detail-view-id":4359},"更多"),b&&Object(a.e)(i.Link,{target:"_blank",to:"/topic/".concat(n,"/intro"),className:w()("".concat(yn,"-IntroTail"),"".concat(yn,"-CornerTail")),"data-za-detail-view-id":4359},"更多")),p&&Object(a.e)(jn,{id:n,discussionCount:h})),d&&!N&&Object(a.e)(On,{id:n,topicVote:d,className:"MajorHotSpotReview"})))}}]),t}(o.Component),wn=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.item,t=e.id,n=e.title,o=e.type,r=e.discussionCount,c=e.voteupCount,s=e.attachedInfoBytes;return Object(a.e)(Ae.a,{view:{id:3951},trackCardShow:!0,module:ve.h[o],attachedInfoBytes:s},Object(a.e)("li",{key:t,className:"".concat("SearchTopicIndex","-ItemWrapper")},Object(a.e)(i.Link,{target:"_blank",className:"".concat("SearchTopicIndex","-Item"),to:"article"===o?"//zhuanlan.zhihu.com/p/".concat(t):"/".concat(o,"/").concat(t),dangerouslySetInnerHTML:{__html:n},"data-za-detail-view-id":3942}),Object(a.e)("span",{className:"".concat("SearchTopicIndex","-ItemMeta")},"".concat(Object(Me.cnNiceNumber)("question"===o?r:c)).concat(ve.j[o]))))}}]),t}(r.a.Component),Nn=(n(2316),function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.content,o=n.id,r=n.contentList,c=void 0===r?[]:r,s=n.title,l=n.attachedInfoBytes,u=n.contentCount,d=e.id;return Object(a.e)(Ae.a,{module:"TopicIndexItem",attachedInfoBytes:l},Object(a.e)("div",{className:w()("SearchTopicIndex",t)},Object(a.e)("div",{className:"".concat("SearchTopicIndex","-TitleWrapper")},Object(a.e)("h3",{className:"".concat("SearchTopicIndex","-Title")},Object(a.e)(i.Link,{target:"_blank",to:"/topic/".concat(d,"/index#module-").concat(o),dangerouslySetInnerHTML:{__html:s},"data-za-detail-view-id":3942})),Object(a.e)("span",null," ","(".concat(u,")"))),Object(a.e)("ul",{className:"".concat("SearchTopicIndex","-List")},c.slice(0,2).map(function(e){return Object(a.e)(wn,{key:e.id,item:e})}))))}}]),t}(r.a.Component)),Sn=(n(2317),function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.list,n=e.id,r=e.attachedInfoBytes,c=t.length;return Object(a.e)(Ae.a,{attachedInfoBytes:r,module:"ContentList"},Object(a.e)("p",{className:"".concat("SearchTopicIndexesExtra")},Object(a.e)("span",{className:"".concat("SearchTopicIndexesExtra","-LeadingText")},"更多内容："),t.slice(0,2).map(function(e,t){var r=e.id,c=e.title,s=e.contentCount;return Object(a.e)(o.Fragment,{key:r},0!==t&&Object(a.e)(qt.a,{className:"".concat("SearchTopicIndexesExtra","-Bull")}),Object(a.e)(i.Link,{target:"_blank",className:"".concat("SearchTopicIndexesExtra","-Item"),to:"/topic/".concat(n,"/index#module-").concat(r),dangerouslySetInnerHTML:{__html:"".concat(c," (").concat(s,")")},"data-za-detail-view-id":4360}))}),c>2&&Object(a.e)(o.Fragment,null,Object(a.e)(qt.a,{className:"".concat("SearchTopicIndexesExtra","-Bull")}),Object(a.e)(i.Link,{target:"_blank",className:"".concat("SearchTopicIndexesExtra","-Item"),to:"/topic/".concat(n,"/index#module-").concat(t[2].id),"data-za-detail-view-id":4360},"全部分类内容"))))}}]),t}(o.Component)),xn=(n(2318),Object(i.withRouter)(an=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.list,n=e.id,o=e.attachedInfoBytes;return Object(a.e)("div",{className:"SearchTopicIndexes"},Object(a.e)("ul",{className:"".concat("SearchTopicIndexes","-List")},t.slice(0,2).map(function(e){return Object(a.e)("li",{key:e.title,className:"".concat("SearchTopicIndexes","-ListItem")},Object(a.e)(Nn,{content:e,id:n}))})),this.withExtra&&Object(a.e)(Sn,{id:n,list:t.slice(2),attachedInfoBytes:o}))}},{key:"withExtra",get:function(){return this.props.list.length>2}}]),t}(o.Component))||an),Tn=(n(2319),function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.item.object,t=e.meta,n=e.name,o=void 0===n?"":n,r=e.contentList,i=void 0===r?[]:r,c=e.attachedInfoBytes,s=t.id,l=t.pubInfo,u=void 0===l?{}:l,d=t.topicVote,p=t.discussionCount,h=t.avatarUrl,f=void 0===h?"":h,b=t.description,m=(1===u.status||u.status,i.length>0);return Object(a.e)(C.d,{className:"SearchResult-Card"},Object(a.e)(Re.a,null,Object(a.e)(Ae.a,{view:{id:3951},trackCardShow:!0,attachedInfoBytes:c,module:"SearchResultItem"},Object(a.e)("div",{className:"MajorHotSpot"},Object(a.e)(kn,{id:s,meta:t,name:o,pubInfo:u,avatarUrl:f,attachedInfoBytes:c,introduction:b,topicVote:d,showDiscussionLink:!m,discussionCount:p}),!1,m&&Object(a.e)(xn,{hotList:i,list:i,id:s,attachedInfoBytes:c})))))}}]),t}(o.Component)),In=n(846),En=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.item,t=e.id,n=e.title,o=e.type,r=e.answerCount,c=e.voteupCount,s=e.attachedInfoBytes,l=Object(Me.cnNiceNumber)("question"===o?r:c);return Object(a.e)(Ae.a,{key:t,view:{id:3951},trackCardShow:!0,attachedInfoBytes:s,module:"ContentList"},Object(a.e)("li",{className:"".concat("WikiBoxHotList","-Item")},Object(a.e)(i.Link,{target:"_blank",to:"article"===o?"//zhuanlan.zhihu.com/p/".concat(t):"/".concat(o,"/").concat(t),dangerouslySetInnerHTML:{__html:n},"data-za-detail-view-id":3942}),l&&Object(a.e)("span",{className:"".concat("WikiBoxHotList","-ItemMeta")},"".concat(l).concat(ve.j[e.type]))))}}]),t}(o.Component),Ln=(n(2320),function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.list;return Object(a.e)("div",{className:"WikiBoxHotList"},Object(a.e)("h2",{className:"".concat("WikiBoxHotList","-Title")},Object(a.e)(In.a,{className:"".concat("WikiBoxHotList","-Icon"),size:22,center:!0}),"正在热议"),Object(a.e)("div",{className:"".concat("WikiBoxHotList","-Container")},Object(a.e)("div",{className:"".concat("WikiBoxHotList","-Line")}),Object(a.e)("ul",{className:"".concat("WikiBoxHotList","-Lists")},e.slice(0,3).map(function(e){return Object(a.e)(En,{key:e.id,item:e})}))))}}]),t}(o.Component)),Pn=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.hotList,n=e.essenceList,o=e.id,r=e.attachedInfoBytes;return t.length?Object(a.e)(Ln,{list:t,id:o}):Object(a.e)(xn,{list:n,id:o,attachedInfoBytes:r})}}]),t}(o.Component),An=(n(2321),function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.item.object,t=e.id,n=e.meta,o=e.name,r=void 0===o?"":o,i=e.avatarUrl,c=void 0===i?"":i,s=e.introduction,l=e.topicVote,u=e.pubInfo,d=void 0===u?{}:u,p=e.discussionCount,h=e.contentHotList,f=void 0===h?[]:h,b=e.contentEssenceList,m=void 0===b?[]:b,v=e.extraContentEssenceList,g=void 0===v?[]:v,O=e.attachedInfoBytes,j=(1===d.status||d.status,f.length>0||m.length>0);return Object(a.e)(C.d,{className:"SearchResult-Card"},Object(a.e)(Re.a,null,Object(a.e)(Ae.a,{view:{id:3951},trackCardShow:!0,attachedInfoBytes:O,module:"SearchResultItem"},Object(a.e)("div",{className:"WikiBox"},Object(a.e)(kn,{id:t,meta:n,name:r,pubInfo:d,avatarUrl:c,attachedInfoBytes:O,introduction:s,topicVote:l,showDiscussionLink:!j,discussionCount:p}),!1,j&&Object(a.e)(Pn,{hotList:f,essenceList:m,extraContentEssenceList:g,id:t,attachedInfoBytes:O})))))}}]),t}(o.Component)),Mn=(n(2322),function(e){function t(){var e,n;Object(s.a)(this,t);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).handleClick=function(e,t){S.a.trackEvent(t.target,{id:4517,action:"OpenUrl"},{search:{raw_query:e}})},n.renderQuery=function(e){var t=e.query,o=e.attachedInfoBytes;return Object(a.e)(Ae.a,{key:t,view:{id:4516},trackCardShow:!0,attachedInfoBytes:o,module:"RelatedSearchItem",extra:{search:{raw_query:t}}},Object(a.e)("li",null,Object(a.e)("a",{href:"/search?q=".concat(t,"&utm_content=search_relatedsearch"),"data-za-not-track-link":!0,onClick:function(e){return n.handleClick(t,e)}},t)))},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.item.queryList,t=void 0===e?[]:e;return 0===t.length?null:Object(a.e)(C.d,{className:"SearchResult-Card"},Object(a.e)(Re.a,null,Object(a.e)("div",{className:"RelevantQuery"},Object(a.e)("h2",null,"相关搜索"),Object(a.e)(Ae.a,{module:"Content"},Object(a.e)("ul",null,t.map(this.renderQuery))))))}}]),t}(o.Component)),Rn=(n(2323),Object(Ae.b)(function(e){var t=e.club.object,n=e.zaInfo,a=(n=void 0===n?{}:n).cardShowId;return{view:{id:void 0===a?3950:a},module:"Content",attachedInfoBytes:t.attachedInfoBytes,index:e.index.toString(),content:{type:"Club",token:t.id.toString()},trackCardShow:!0}})(function(e){var t=e.club.object,n=t.clubPostCount,o=t.avatarUrl,r=t.memberCount,c=t.description,s=t.name,l=t.id,u="/club/".concat(l);return Object(a.e)(C.d,{className:"SearchResult-Card"},Object(a.e)(Re.a,null,Object(a.e)("div",{className:"SearchClubCard"},Object(a.e)(i.Link,{target:"_blank",to:u,"data-za-detail-view-id":3942},Object(a.e)("img",{src:o,className:"SearchClubCard-avatar"})),Object(a.e)("div",{className:"SearchClubCard-content"},Object(a.e)(i.Link,{target:"_blank",to:u,"data-za-detail-view-id":3942},Object(a.e)("div",{className:"SearchClubCard-headline"},Object(a.e)("span",{className:"Highlight",dangerouslySetInnerHTML:{__html:s}}),Object(a.e)("span",{className:"SearchClubCard-headlineIcon"},"圈子"))),Object(a.e)("p",{className:"SearchClubCard-count"},"".concat(Object(Me.cnNiceNumber)(n)," 帖子 · ").concat(Object(Me.cnNiceNumber)(r)," 人已加入")),Object(a.e)("p",{className:"SearchClubCard-description"},Object(a.e)("span",null,"简介："),Object(a.e)("span",{className:"Highlight",dangerouslySetInnerHTML:{__html:c}}))))))})),_n=n(2324),zn=n.n(_n),Bn=(n(2325),"TimeBox"),Dn=(on=Object(b.connect)(function(e,t){var n=e.entities,a=t.item.object,o=(a=void 0===a?{}:a).contentList;return{items:(void 0===o?[]:o).map(function(e){var t=e.id,a=e.schema;return(n["".concat(a,"s")]||{})[t]})}}),Object(i.withRouter)(rn=on(rn=function(e){function t(){var e,n;Object(s.a)(this,t);for(var o=arguments.length,r=new Array(o),c=0;c<o;c++)r[c]=arguments[c];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(r)))).openRecent=function(e){var t=n.props.router,a=t.push,o=t.location.search;S.a.trackEvent(e.target,{id:4551,action:"OpenUrl"}),a("/search".concat(o,"&range=1w"))},n.renderMainContent=function(e){switch(e.type){case"answer":return Object(a.e)(Bt,{index:0,answer:{type:"answer",object:e},zaInfo:{cardShowId:4541}});case"article":return Object(a.e)(Ht,{index:0,article:{type:"article",object:e},zaInfo:{cardShowId:4541}});case"question":return Object(a.e)(We,{preset:"plain",index:0,question:{type:"question",object:e},zaInfo:{cardShowId:4541}});default:return null}},n.renderTitle=function(e){var t=e.type,n=e.title,a=e.question;return"answer"===t?a&&a.name||"":n||""},n.renderContentLink=function(e){var t=e.id,n=e.type,a=e.question;switch(n){case"article":return"//zhuanlan.zhihu.com/p/".concat(t);case"question":return"/".concat(n,"/").concat(t);case"answer":return a&&a.id?"/question/".concat(a.id,"/answer/").concat(t):"";default:return""}},n.generateMeta=function(e,t){var n=Object(Me.cnNiceNumber)(e);return n&&"0"!==n?"".concat(n).concat(t):""},n.renderMeta=function(e){var t=e.type,a=e.answerCount,o=e.voteupCount,r=e.updatedTime,i="question"===t?n.generateMeta(a,"个回答"):n.generateMeta(o,"赞同");return"".concat(i).concat(i?" · ":"").concat(Object(He.c)(r))},n.renderPlainContent=function(e){var t=e.id,o=e.attachedInfoBytes;return Object(a.e)(Ae.a,{key:t,view:{id:4541},trackCardShow:!0,attachedInfoBytes:o,module:"SearchResultItem"},Object(a.e)("div",{className:"".concat(Bn,"-PlainContent")},Object(a.e)("p",{className:"".concat(Bn,"-ContentTitle")},Object(a.e)(i.Link,{target:"_blank",to:n.renderContentLink(e),"data-za-detail-view-id":3942},Object(a.e)("span",{dangerouslySetInnerHTML:{__html:n.renderTitle(e)}}))),Object(a.e)("span",{className:"".concat(Bn,"-ContentMeta")},n.renderMeta(e))))},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.items,n=void 0===t?[]:t;return 0===n.length?null:Object(a.e)(C.d,{className:"SearchResult-Card"},Object(a.e)(Re.a,null,Object(a.e)("div",{className:Bn},Object(a.e)("div",{className:"".concat(Bn,"-TimeTitle")},Object(a.e)("img",{src:zn.a,className:"".concat(Bn,"-TimeTitleIcon")}),Object(a.e)("h2",null,"最新讨论")),Object(a.e)("div",{className:"".concat(Bn,"-Content")},n.map(function(t,n){return t?0===n?Object(a.e)("div",{key:t.id,className:"".concat(Bn,"-MainContent")},e.renderMainContent(t)):e.renderPlainContent(t):null})),Object(a.e)("div",{className:"".concat(Bn,"-Footer")},Object(a.e)("span",{onClick:this.openRecent},"查看最近一周全部结果 ",Object(a.e)(F.a,{text:!0,center:!0}))))))}}]),t}(o.Component))||rn)||rn),Vn=n(171),Fn=n(982),Hn=(n(2326),"NceeActivity");var Un,qn,Wn,Kn,Gn,Qn,Zn,Jn,Yn,Xn,$n,ea,ta,na,aa,oa,ra,ia,ca,sa,la,ua,da=function(e){var t=e.item,n=e.zaExtra,r=t.object,i=r.attachedInfoBytes,c=r.header,s=r.banner,l=r.entities,u=r.topicBestAnswereres,d=Object(Vn.b)().isDarkMode,p=Object(o.useMemo)(function(){var e=c.avatarUrl,t=c.avatarUrlDark;return d?t:e},[c,d]),h=Object(o.useMemo)(function(){var e=s.imageUrl,t=s.imageUrlDark;return d?t:e},[s,d]),f=Object(o.useCallback)(function(e){var t=e.target,a=e.link,o=e.zaClickId,r=e.attachedInfoBytes,i=e.authorId;S.a.trackEvent(t,{id:o,action:"OpenUrl"},Object.assign({},n,{module:[Object.assign({},i?{card:{content:[{author_member_hash_id:i}]}}:{},{attached_info_bytes:r})]})),location.href=a},[n]),b=Object(o.useCallback)(function(e){var t=e.target,n=e.attachedInfoBytes,a=e.id,o=e.urlToken,r=e.zaClickId,i="https://www.zhihu.com/people/".concat(o);f({target:t,link:i,zaClickId:r,authorId:a,attachedInfoBytes:n})},[f]);return Object(a.e)(Ae.a,{trackCardShow:!0,extra:n,view:{id:7395},module:"Content",attachedInfoBytes:i},Object(a.e)("div",{className:Hn},Object(a.e)("div",{className:"".concat(Hn,"-header"),onClick:function(e){var t=e.target;return f(Object.assign({target:t},c,{zaClickId:7396}))}},Object(a.e)("img",{src:p})),Object(a.e)("div",{className:"".concat(Hn,"-grid")},l.map(function(e){var t=e.icon,n=e.link,o=e.name,r=e.attachedInfoBytes;return Object(a.e)("div",{className:"".concat(Hn,"-item"),onClick:function(e){var t=e.target;return f({target:t,link:n,attachedInfoBytes:r,zaClickId:7396})},key:o},Object(a.e)("img",{src:t}),Object(a.e)("span",null,o))})),h&&Object(a.e)("div",{className:"".concat(Hn,"-banner"),onClick:function(e){var t=e.target;return f(Object.assign({target:t},s,{zaClickId:8951}))}},Object(a.e)("img",{src:h})),Boolean(u.length)&&Object(a.e)("div",{className:"".concat(Hn,"-gallery")},Object(a.e)("div",{className:"".concat(Hn,"-title")},"高考话题优秀答主"),Object(a.e)("div",{className:"".concat(Hn,"-content")},u.map(function(e){return Object(a.e)("div",{key:e.id,className:"".concat(Hn,"-authorWrapper")},Object(a.e)("div",{className:"".concat(Hn,"-author"),onClick:function(t){var n=t.target;return b(Object.assign({target:n},e,{zaClickId:8952}))}},Object(a.e)(Fn.a,{className:"".concat(Hn,"-avatar"),user:e,shouldShowBadge:!0}),Object(a.e)("div",{className:"".concat(Hn,"-info")},Object(a.e)("div",{className:"".concat(Hn,"-name")},e.name),Object(a.e)("div",{className:"".concat(Hn,"-desc")},e.description))))})))))},pa=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"renderItem",value:function(){var e=this.props,t=e.generalItem,n=e.index,o=e.keyword;if("relevant_query"===t.type)return Object(a.e)(Mn,{item:t});if("time_box"===t.type)return Object(a.e)(Dn,{item:t});if("ncee_2020_activity"===t.type)return Object(a.e)(da,{item:t,zaExtra:{search:{input_query:o,raw_query:o}}});var r=t.object.type;if(Object(O.i)(t))return Object(a.e)(C.d,{className:"SearchResult-Card"},Object(a.e)(be,{zaInfo:{input_query:o,raw_query:o},query:{type:this.props.type,content:o},result:t}));if(Object(O.h)(t))return Object(a.e)(Bt,{zaInfo:{expandId:6044,clickId:6045,cardShowId:5914},index:n,answer:t});if(Object(O.j)(t))return Object(a.e)(C.d,{className:"SearchResult-Card"},Object(a.e)(ke,{zaExtra:{search:{input_query:o,raw_query:o}},result:t}));if(!t.object)return null;switch(r){case"question":return Object(a.e)(We,{preset:"plain",index:n,question:t});case"answer":return Object(a.e)(Bt,{index:n,answer:t});case"article":case"promotion":return Object(a.e)(Ht,{index:n,article:t});case"brief":return Object(a.e)(Rn,{index:n,club:t});case"topic":return Object(a.e)(Zt,{query:o,topic:t,index:n,showMore:!0});case"people":return Object(a.e)(Jt,{query:o,user:t,index:n,showMore:!0});case"column":return Object(a.e)(Gt,{query:o,column:t,index:n,showMore:!0});case"wiki_box":return Object(a.e)(An,{item:t});case ve.f.minorHotSpot:case ve.f.domainMinorHot:return Object(a.e)(bn,{item:t});case ve.f.majorHotSpot:return Object(a.e)(Tn,{item:t});default:return null}}},{key:"render",value:function(){return this.renderItem()}}]),t}(o.Component),ha=n(248),fa=n(864),ba=n(139),ma=n(125),va=n(238),ga=n(2333),Oa=n.n(ga),ja=(n(1888),Object(Ae.b)({module:"SearchResultItem"})((Wn=qn=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).state={inputText:n.props.query.q},n.handleInputChange=function(e){n.setState({inputText:e.target.value})},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.state.inputText,t=this.props,n=t.query.type,o=t.onRef;return Object(a.e)(C.d,{onRef:o,className:"SearchNoContent-wrapper"},"content"===n?Object(a.e)("div",{className:"SearchNoContent-content"},Object(a.e)("div",{className:"SearchNoContent-title"},"没有想要的内容？"),Object(a.e)(ma.a,{className:"SearchNoContent-input",value:e,onChange:this.handleInputChange}),Object(a.e)(va.b,null,Object(a.e)(Ke.d,{preset:"primary",color:"blue",className:"SearchNoContent-button",onClick:this.handleOpenModal},"我要提问"))):Object(a.e)("div",{className:"SearchNoContent-content"},Object(a.e)(Oa.a,{width:150,height:120}),Object(a.e)("div",{className:"SearchNoContent-description"},"暂无搜索结果")))}}]),t}(o.Component),qn.contextTypes={authRequired:f.a.func},Un=Wn))||Un),ya=n(309),Ca=n.n(ya),ka={people:"用户",topic:"话题",column:"专栏",live:"内容",album:"内容",publication:"内容"},wa=(Object(Ae.b)({module:"SearchResultItem"})(Kn=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).handleClickButton=function(){var e=n.props.query.q;Ca()("zhihu://search?q=".concat(e))},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props.query,t=e.q,n=e.type;return"content"!==n?Object(a.e)("div",{className:"MobileEmptyPage MobileEmptyPageWithType"},"未搜索到相关",ka[n]):Object(a.e)("div",{className:"MobileEmptyPage"},Object(a.e)("div",{className:"".concat("EmptyPage","-Description")},Object(a.e)(Xt,{className:w()("".concat("EmptyPage","-Quote"),"".concat("EmptyPage","-Quote--left"))}),Object(a.e)("span",{className:"".concat("EmptyPage","-DescriptionText")},t),Object(a.e)(cn,{className:w()("".concat("EmptyPage","-Quote"),"".concat("EmptyPage","-Quote--right"))})),Object(a.e)("p",{className:"MobileEmptyPage-desc"},"未找到相关内容，提问快速获得回答"),Object(a.e)("button",{className:"MobileEmptyPage-button",onClick:this.handleClickButton},"立即提问"))}}]),t}(o.Component)),Object(Ae.b)({module:"SearchResultList"})((Zn=Qn=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).trackedEmpty=!1,n.handleLoad=function(){var e=n.props,t=e.query,a=t.type,o=t.q,r=t.correction,i=void 0===r?1:r,c=t.range,s=e.loadSearch,l=e.isFetching,u=e.attachedInfo,d=(u=void 0===u?{}:u).searchHashId,p=u.lcIdx,h=e.nextOffset,f=(h=void 0===h?{}:h).offset,b=void 0===f?0:f,m=h.limit,v=void 0===m?O.a:m,g=e.verticalInfo;l||s({searchHashId:d,lcIdx:p,type:Object(ve.n)(a),query:o,range:ve.m[c],offset:b,limit:v,correction:i,showAllTopics:"topic"===a,verticalInfo:g})},n.trackSearchAction=function(e){var t=e||n.props.attachedInfo;if(t){var a=t.attachedInfoBytes;S.a.trackEvent(n.listNode,{action:"Search",id:3953},{attached_info_bytes:a})}},n.trackEmptySearchResult=function(e,t){if(t||n.props.attachedInfo){var a=t.attachedInfoBytes;S.a.trackEvent("empty"===e?n.emptyNode:n.listNode,{id:"empty"===e?4314:4316},{attached_info_bytes:a}),n.trackedEmpty=!0}},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.items,n=void 0===t?[]:t,a=e.showEmpty,o=e.attachedInfo;(n.length>0||a)&&this.trackSearchAction(o),!this.trackedEmpty&&a&&o&&this.trackEmptySearchResult("empty",o)}},{key:"componentWillReceiveProps",value:function(e){var t=e.items,n=void 0===t?[]:t,a=e.isDrained,o=e.showEmpty,r=e.attachedInfo,i=this.props,c=i.items,s=void 0===c?[]:c,l=i.isDrained;n.length>s.length&&this.trackSearchAction(r),this.trackedEmpty||(o?this.trackEmptySearchResult("empty",r):a!==l&&this.trackEmptySearchResult("noMore",r))}},{key:"renderItems",value:function(){var e=this.props,t=e.ssrSuspendCount,n=e.renderItem,a=e.items.filter(function(e){return e&&!e.isDelete});return t&&Object(Te.isNode)()?Object(ba.b)(t,a.map(n)):a.map(n)}},{key:"render",value:function(){var e=this,t=this.props,n=t.isFetching,o=t.isDrained,r=t.query,i=t.showEmpty;if(void 0!==i&&i&&o)return Object(a.e)(ja,{onRef:function(t){return e.emptyNode=t},query:r});var c=Object(a.e)(ha.a,null,Object(a.e)(fa.a,{className:"List-item",small:!0}));return Object(a.e)(fa.b,{onRef:function(t){return e.listNode=t},isLoading:n,isDrained:o,onLoad:this.handleLoad,placeholder:c},this.renderItems())}}]),t}(o.Component),Qn.propTypes={renderItem:f.a.func.isRequired},Gn=Zn))||Gn),Na=Object(b.connect)(function(e,t){var n=e.entities,a=e.search,o=t.query,r=o.type,i=void 0===r?"content":r,c=o.q,s=o.range,l=void 0===s?"no_limit":s,u=Object(ve.n)(i),d=ve.m[l],p=Object(ve.l)(u,d),h=p.keyNameInReducer,f=p.keyNameInEntities,b=a.attachedInfo[h],m=a.nextOffset[h];if("general"===u){var v=a[h][c]||{isFetching:!1,isDrained:!1,ids:[],next:""},O=v.isFetching,j=v.isDrained,y=v.ids,C=v.next,k=n[f],w=y&&0===y.length,N=(C?Object(g.parse)(C.split("?")[1]):{}).vertical_info;return{showEmpty:w,isFetching:O,isDrained:j,items:y.map(function(e){var t=k&&k[e];if(t&&ve.d.includes(t.type)){if(ve.g.includes(t.type))return t;if(["knowledge_ad","knowledge_result"].includes(t.type))return"paidAnswer"===t.object.schema?Object.assign({},t,{object:t.object.id}):t;if("ebook_saltpick"===t.type)return t;var a=t.object,o=a.schema,r=a.id,i=(n["".concat(o,"s")]||n[o]||{})[r];if(i){var c=i.type;if(ve.b.includes(c))return Object.assign({},t,{object:i})}}}).filter(Boolean),attachedInfo:b,nextOffset:m,verticalInfo:N}}if("people"===u){var S=a.peopleByQuery[c]||{isFetching:!1,isDrained:!1,ids:[]},x=S.isFetching,T=S.isDrained,I=S.ids,E=n.searchPeople;return{showEmpty:I&&0===I.length,isFetching:x,isDrained:T,items:I.filter(function(e){return Boolean(e)}).map(function(e){var t=E[e]||{},a=t.object;return Object.assign({},t,{object:(n.users||{})[a]})}),attachedInfo:b,nextOffset:m}}if("topic"===u){var L=a.topicByQuery[c]||{isFetching:!1,isDrained:!1,ids:[]},P=L.isFetching,A=L.isDrained,M=L.ids,R=n.searchTopic;return{showEmpty:M&&0===M.length,isFetching:P,isDrained:A,items:M.filter(function(e){return Boolean(e)}).map(function(e){var t=R[e]||{},a=t.object;return Object.assign({},t,{object:(n.topics||{})[a]})}),attachedInfo:b,nextOffset:m}}if("column"===u){var _=a.columnByQuery[c]||{isFetching:!1,isDrained:!1,ids:[]},z=_.isFetching,B=_.isDrained,D=_.ids,V=n.searchColumn;return{showEmpty:D&&0===D.length,isFetching:z,isDrained:B,items:D.filter(function(e){return Boolean(e)}).map(function(e){var t=V[e]||{},a=t.object;return Object.assign({},t,{object:(n.columns||{})[a]})}),attachedInfo:b,nextOffset:m}}if("live"===u){var F=a.liveByQuery[c]||{isFetching:!1,isDrained:!1,ids:[]},H=F.isFetching,U=F.isDrained,q=F.ids,W=n.searchLive;return{showEmpty:q&&0===q.length,isFetching:H,isDrained:U,items:q.filter(function(e){return Boolean(e)}).map(function(e){if(n.searchKnowledge[e])return n.searchKnowledge[e];var t=W[e]||{},a=t.object,o=a.schema,r=a.id;return Object.assign({},t,{object:(n["".concat(o,"s")]||{})[r]})}).filter(Boolean),attachedInfo:b,nextOffset:m}}if("album"===u){var K=a.albumByQuery[c]||{isFetching:!1,isDrained:!1,ids:[]},G=K.isFetching,Q=K.isDrained,Z=K.ids,J=n.searchAlbum;return{showEmpty:Z&&0===Z.length,isFetching:G,isDrained:Q,items:Z.filter(function(e){return Boolean(e)}).map(function(e){if(n.searchKnowledge[e])return n.searchKnowledge[e];var t=J[e]||{},a=t.object;return Object.assign({},t,{object:(n.albums||{})[a]})}),attachedInfo:b,nextOffset:m}}if("publication"===u){var Y=a.eBookByQuery[c]||{isFetching:!1,isDrained:!1,ids:[]},X=Y.isFetching,$=Y.isDrained,ee=Y.ids,te=n.searchEBook;return{showEmpty:ee&&0===ee.length,isFetching:X,isDrained:$,items:ee.filter(function(e){return Boolean(e)}).map(function(e){if(n.searchKnowledge[e])return n.searchKnowledge[e];var t=te[e]||{},a=t.object;return Object.assign({},t,{object:(n.ebooks||{})[a]})}),attachedInfo:b,nextOffset:m}}if("km_general"===u){var ne=a.kmGeneralByQuery[c]||{isFetching:!1,isDrained:!1,ids:[]},ae=ne.isFetching,oe=ne.isDrained,re=ne.ids,ie=n.searchKmGeneral;return{showEmpty:re&&0===re.length,isFetching:ae,isDrained:oe,items:re.filter(function(e){return Boolean(e)}).map(function(e){if(n.searchKnowledgeGeneral[e])return n.searchKnowledgeGeneral[e];var t=ie[e]||{},a=t.object;return Object.assign({},t,{object:(n.ebooks||{})[a]})}),attachedInfo:b,nextOffset:m}}if("clubentity"===u){var ce=a.clubentityByQuery[c]||{isFetching:!1,isDrained:!1,ids:[]},se=ce.isFetching,le=ce.isDrained,ue=ce.ids,de=n.searchClub;return{showEmpty:ue&&0===ue.length,isFetching:se,isDrained:le,items:ue.filter(function(e){return Boolean(e)}).map(function(e){var t=de[e]||{},a=t.object;return Object.assign({},t,{object:(n.clubs||{})[a]})}),attachedInfo:b,nextOffset:m}}if("club"===u){var pe=a.clubPostByQuery[c]||{isFetching:!1,isDrained:!1,ids:[]},he=pe.isFetching,fe=pe.isDrained,be=pe.ids,me=n.searchPost;return{showEmpty:be&&0===be.length,isFetching:he,isDrained:fe,items:be.filter(function(e){return Boolean(e)}).map(function(e){var t=me[e]||{},a=t.object;return Object.assign({},t,{object:(n.posts||{})[a]})}),attachedInfo:b,nextOffset:m}}return{isFetching:!1,isDrained:!1,items:[],attachedInfo:b,nextOffset:m}},{loadSearch:O.l})(wa),Sa=n(222),xa=(n(2334),function(e){var t=e.handleClick,n=e.club,o=e.content,r=e.isWeb,i=void 0!==r&&r,c=n.avatarUrl,s=n.name,l=n.description,u=n.clubPostCount,d=n.memberCount,p={zaAction:"OpenUrl",zaEventType:"Click",shouldTrackClick:!0,extra:{link:{get url(){return location.origin+"/club/".concat(n.id)}}},onClick:function(e){t&&t(e)}},h=Object(a.e)(Sa.e,Object(we.default)({zaType:"Card"},!i&&p,{className:w()("Club-Search-Content",{"Club-Search-WebContent":i})}),Object(a.e)("div",{className:"Club-Search-ImgWrap"},Object(a.e)("img",{src:c,css:Object(xe.e)()})),Object(a.e)("div",{className:"Club-Search-Right"},Object(a.e)("div",{className:"Club-Search-Text"},Object(a.e)(Sa.a,Object(we.default)({zaType:"Card",className:"Club-Search-Name Highlight"},i?p:{shouldTrackClick:!1},{dangerouslySetInnerHTML:{__html:s}})),Object(a.e)("div",{className:"Club-Search-Desc Highlight",dangerouslySetInnerHTML:{__html:l}}),Object(a.e)("div",{className:"Club-Search-Count"},Object(a.e)("div",{className:"Club-Search-Post"},0!=u&&"".concat(Object(Me.cnNiceNumber)(u)," 帖子 · "),0!=d&&"".concat(Object(Me.cnNiceNumber)(d)," 人已加入")))),o));return Object(a.e)(Sa.b,{content:{type:"Club",id:n.id}},h)}),Ta=n(1678),Ia=n(1780),Ea={name:"87lb9q",styles:"padding:0 !important;"},La=Object(Ae.b)(function(e){var t=e.club,n=e.zaInfo,a=(n=void 0===n?{}:n).cardShowId,o=void 0===a?3950:a,r=t.attachedInfoBytes,i=t.id;return{view:{id:o},module:"Content",attachedInfoBytes:r,index:e.index.toString(),content:{type:"Club",token:i.toString()},trackCardShow:!0}})(function(e){var t=e.club,n=e.index,o=t.id,r=t.isJoined,i=t.joinType,c={path:[{index:n}]},s={button:{text:"".concat(r?"已":"").concat(r||"verify"!==i?"":"申请","加入")}};return Object(a.e)(C.d,null,Object(a.e)(Re.a,{css:Ea},Object(a.e)(xa,{isWeb:!0,club:t,handleClick:function(e){S.a.trackEvent(e.target,{id:3942,action:"OpenUrl"}),window.open("/club/".concat(o))},content:Object(a.e)(Ta.a,{clubId:o},Object(a.e)(Ia.a,{clickId:8751,viewProps:c,zaExtra:s,oia:!1,clubId:o,plus:!1,css:function(e){return Object.assign({width:"96px",height:"34px",lineHeight:"34px",textAlign:"center",color:e.colors.GBK99A,fontSize:"13px",fontWeight:"500",borderRadius:"3px",marginLeft:"auto",marginRight:"16px",marginTop:"15px",flexShrink:0,backgroundColor:e.colors.GBL01A},r&&{backgroundColor:e.colors.GBL05A},{},r&&!1)}}))})))}),Pa=n(167),Aa=n(2335),Ma=n.n(Aa),Ra=n(2336),_a=n.n(Ra),za=n(2337),Ba=n.n(za),Da=(n(2338),function(e){var t=e.time;if(!t)return null;var n=new Date(1e3*t);return Object(a.e)("time",{dateTime:n.toISOString()},Object(Pa.toSmartString)(n))}),Va=function(e){var t=e.clubId,n=e.post,o=e.onClick,r=e.prefix,i=e.name,c=e.showPoll,s=void 0!==c&&c,l=e.isWeb,u=void 0!==l&&l,d=e.useSingleImg,p=void 0!==d&&d,h=e.showTitle,f=void 0!==h&&h,b=e.showExcerpt,m=void 0!==b&&b,v=e.showClubLabel,g=void 0===v||v,O=n.title,j=n.excerpt,y=n.thumbnailInfo,C=n.pollInfo,k=n.reactionNum,N=n.commentNum,S=n.created,x=Object(xe.e)(),T=null==y?void 0:y.count,I=!p&&T>=3,E={zaAction:"OpenUrl",zaEventType:"Click",shouldTrackClick:!0,extra:{link:{get url(){return location.origin+"/club/".concat(t,"/post/").concat(n.id)}}},onClick:function(e){o&&o(e)}},L=Object(a.e)(Sa.e,Object(we.default)({zaType:"Card"},!u&&E,{className:"Club-SearchPosts-Item"}),Object(a.e)("div",{className:w()("Club-SearchPosts-Content",{"Club-SearchPosts-WebContent":u})},Object(a.e)("div",null,Object(a.e)("div",{className:"Club-SearchPosts-DescWrap"},Object(a.e)("div",{className:w()({"Club-SearchPosts-TextRight":!I,"Club-SearchPosts-TextLineWithTwoLine":I})},f&&O&&Object(a.e)("div",{className:"Club-SearchPosts-Title Club-SearchPosts-TextLineWithOneLine",dangerouslySetInnerHTML:{__html:O.replace(/<\/?br>/g,"")}}),m?Object(a.e)("div",{className:"Club-SearchPosts-Expert",dangerouslySetInnerHTML:{__html:Pe(j.replace(/<\/?br>/g,""),160)}}):Object(a.e)("span",{className:w()("Club-SearchPosts-Desc",{"Club-SearchPosts-TextLineWithThreeLine":!u,"Club-SearchPosts-TextLineWithTwoLine":I&&!u}),css:Object(Ne.a)({height:!i||I||u?"auto":"66px"},"")},r,Object(a.e)("span",{className:"Highlight",dangerouslySetInnerHTML:{__html:Pe(j.replace(/<\/?br>/g,""),160)}})),u&&Object(a.e)(Sa.a,Object(we.default)({zaType:"Card",as:"button",className:"Club-SearchPosts-button"},E),"查看帖子",Object(a.e)(F.a,{text:!0,center:!0}))),!I&&!u&&Boolean(T)&&Object(a.e)("div",{className:"Club-SearchPosts-ImgMask"},"video"===y.thumbnails[0].type&&Object(a.e)(Ba.a,{className:"Club-SearchPosts-Video"}),Object(a.e)("img",{css:x,src:y.thumbnails[0].url})))),I&&!u&&!p&&Object(a.e)("div",{className:"Club-SearchPosts-ImgWrapper"},Object(a.e)("div",{className:"Club-SearchPosts-ImgExtraMask"},Object(a.e)("img",{css:x,src:y.thumbnails[0].url})),Object(a.e)("div",{className:"Club-SearchPosts-ImgExtraMask"},Object(a.e)("img",{css:x,src:y.thumbnails[1].url})),Object(a.e)("div",{className:w()("Club-SearchPosts-ImgExtraMask",{"Club-SearchPosts-ImgMore":y.count>3})},y.count>3&&Object(a.e)("span",{className:"Club-SearchPosts-ImgExtraNum"},"+".concat(n.thumbnailInfo.count-3)),Object(a.e)("img",{css:x,src:y.thumbnails[2].url}))),C&&s&&!u&&Object(a.e)("div",{className:"Club-SearchPosts-BottomPoll"},Object(a.e)(_a.a,{center:!0,text:!0,className:"Club-SearchPosts-BottomIcon"}),C.title),Object(a.e)("div",{className:"Club-SearchPosts-Footer"},Object(a.e)("div",{className:"Club-SearchPosts-BottomCount"},0!=k&&"".concat(Object(Me.cnNiceNumber)(k)," 互动 · "),0!=N&&"".concat(Object(Me.cnNiceNumber)(N)," 评论 · "),Object(a.e)(Da,{time:S}),u&&Object(a.e)("span",{className:"Highlight",dangerouslySetInnerHTML:{__html:" · 来自「".concat(i,"」")}})),g&&i&&!u&&Object(a.e)("p",{className:"Club-SearchPosts-Name"}," ",Object(a.e)(Ma.a,{size:17}),Object(a.e)("span",{className:"Highlight",dangerouslySetInnerHTML:{__html:i}})))));return Object(a.e)(Sa.b,{content:{type:"Clubpost",id:n.id}},L)},Fa={name:"87lb9q",styles:"padding:0 !important;"},Ha=Object(Ae.b)(function(e){var t=e.post,n=e.zaInfo,a=(n=void 0===n?{}:n).cardShowId;return{view:{id:void 0===a?3950:a},module:"Content",attachedInfoBytes:t.contentList[0].attachedInfoBytes,index:e.index.toString(),content:{type:"Clubpost",token:t.contentList[0].id.toString(),parent_token:t.clubId.toString()},trackCardShow:!0}})(function(e){var t=e.post,n=t.contentList[0],o=n.tagId,i=n.tagName,c=n.title,s=n.id,l=t.name,u=t.clubId;return Object(a.e)(C.d,null,Object(a.e)(Re.a,{css:Fa},Object(a.e)(Va,{clubId:u,post:t.contentList[0],onClick:function(e){S.a.trackEvent(e.target,{id:3942,action:"OpenUrl"}),window.open("/club/".concat(u,"/post/").concat(s))},showPoll:!1,isWeb:!0,name:l,prefix:Object(a.e)(r.a.Fragment,null,o&&Object(a.e)("span",{className:"Highlight",dangerouslySetInnerHTML:{__html:i}}),o&&Object(a.e)(r.a.Fragment,null," | "),c&&Object(a.e)(r.a.Fragment,null,Object(a.e)("span",{className:"Highlight",dangerouslySetInnerHTML:{__html:c}})," "))})))}),Ua=function(e,t){var n=e.type,r=void 0===n?"content":n,i=e.range,c=Object(ve.n)(r),s=ve.m[i];return Object(a.e)(me.a,{key:"".concat(c).concat(s?"_".concat(s):"")},Object(a.e)(Na,{ssrSuspendCount:5,renderItem:function(n,r){return function(e){var t,n=e.item,r=e.query,i=e.index,c=e.isCompact,s=r.q,l=r.type;if(["km_general","publication","live","album"].includes(l)&&Object(O.i)(n))t=Object(a.e)(C.d,{className:w()("SearchResult-Card",Object(y.a)({},"".concat("SearchResult-Card","--compact"),c))},Object(a.e)(be,{result:n,zaInfo:{input_query:s,raw_query:s},index:i,query:{type:l,content:s},compact:!0}));else switch(l){case"general":t=Object(a.e)(pa,{type:l,keyword:s,key:i,generalItem:n,index:i});break;case"people":t=Object(a.e)(Jt,{user:n,index:i});break;case"topic":t=Object(a.e)(Zt,{topic:n,index:i});break;case"column":t=Object(a.e)(Gt,{column:n,index:i});break;case"clubentity":t=Object(a.e)(La,{club:n.object,index:i});break;case"club":t=Object(a.e)(Ha,{post:n.object,index:i});break;default:t=Object(a.e)(pa,{key:i,type:l,keyword:s,generalItem:n,index:i})}return Object(a.e)(o.Fragment,{key:i},t)}({item:n,query:e,index:r,isCompact:t})},query:e}))},qa=(n(2339),Object(Ae.b)(function(e){var t=e.correction;return{module:"SearchAutoCorrection",extra:{search:{corrective_query:t.queryCorrection,raw_query:t.query}},trackCardShow:!0}})(Jn=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.correction,n=t.queryCorrection,o=t.query,r=t.cardType,i=e.query;return"recommend"===r?Object(a.e)(C.d,{className:"SearchCorrection"},"你是不是要找：",Object(a.e)(Be.a,{to:"/search?".concat(Object(g.stringify)(Object.assign({},i,{q:n,correction:0}))),a:!0,preset:"link"},n)):"corrected"===r?Object(a.e)(C.d,{className:"SearchCorrection"},"已显示"," ",Object(a.e)("span",{className:"SearchCorrection-correctionQueryString"},n)," ","的搜索结果，仍然搜索：",Object(a.e)(Be.a,{to:"/search?".concat(Object(g.stringify)(Object.assign({},i,{q:o,correction:0}))),a:!0,preset:"link"},o)):null}}]),t}(o.Component))||Jn),Wa=n(81),Ka=n.n(Wa),Ga=n(172),Qa=(n(2340),Object(Ae.b)({module:"SearchSwitchTabBar"})(($n=Xn=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.context.router.location.query,t=this.props.subTabList;return Object(a.e)("div",{className:"SearchSubTabs"},Object(a.e)(Ga.b,null,t.map(function(t){var n=t.type,o=t.text,r=Object(g.stringify)(Ka()(Object.assign({},e,{type:n}),["range"]));return Object(a.e)(Ga.a,{key:n,"aria-controls":"Search-".concat(n)},Object(a.e)(i.Link,{className:"".concat("SearchSubTabs","-item"),"data-za-detail-view-name":o,to:"/search?".concat(r)},o))})))}}]),t}(o.Component),Xn.contextTypes={router:f.a.object.isRequired,authRequired:f.a.func.isRequired},Yn=$n))||Yn),Za=n(170),Ja=n(432),Ya=(n(2341),[{text:"综合",type:"content"},{text:"用户",type:"people"},{text:"话题",type:"topic"},{text:"专栏",type:"column"},{text:"Live",type:"live"},{text:"盐选专栏",type:"album"},{text:"电子书",type:"publication"},{text:"圈子",type:"clubentity",includeTypes:["clubentity","club"]}]),Xa=[{text:"综合",type:"content"},{text:"用户",type:"people"},{text:"话题",type:"topic"},{text:"专栏",type:"column"},{text:"盐选内容",type:"km_general",includeTypes:["live","album","publication"]},{text:"圈子",type:"clubentity",includeTypes:["clubentity","club"]}],$a=[{text:"全部",type:"km_general"},{text:"盐选专栏",type:"album"},{text:"Live 讲座",type:"live"},{text:"电子书",type:"publication"}],eo=[{text:"圈子",type:"clubentity"},{text:"圈子内容",type:"club"}],to=[{text:"时间不限",value:""},{text:"一天内",value:"1d"},{text:"一周内",value:"1w"},{text:"三个月内",value:"3m"}],no=Object(b.connect)(function(e){return{vipTabListType:Object(j.a)(e,"li_vip_verti_search")}})(ea=Object(Ae.b)({module:"SearchSwitchTabBar"})((na=ta=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).selectChange=function(e){var t=n.context.router,a=t.push,o=t.location.query,r=""===e?Ka()(o,["range"]):Object.assign({},o,{range:e}),i="/search?".concat(Object(g.stringify)(r));S.a.trackEvent(Object(N.default)(n),{action:"OpenUrl",name:Object.values(to).find(function(t){return t.value===e}).text},{link:{url:i}}),a(i)},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.context.router.location.query,t=this.props.isPageHeader;return Object(a.e)("div",{className:w()("SearchTabs",{"SearchTab-bottomShadow":!t})},Object(a.e)("div",{className:"SearchTabs-inner"},Object(a.e)("div",{className:"SearchTabs-actions"},Object(a.e)(Ga.b,null,this.tabList.map(function(t){var n=t.type,o=t.text,r=t.includeTypes,c=void 0===r?[]:r,s=Object(g.stringify)(Ka()(Object.assign({},e,{type:n}),["range"]));return Object(a.e)(Ga.a,{key:n,"aria-controls":"Search-".concat(n)},Object(a.e)(i.Link,{"data-za-detail-view-name":o,to:"/search?".concat(s),className:w()({"is-active":c.includes(e.type)})},o))})),"content"===e.type&&Object(a.e)(Za.b,{needsReposition:!0,plain:!0,value:e.range||"",onChange:this.selectChange,listClassName:"SearchTabs-selectList"},to.map(function(e){var t=e.value,n=e.text;return Object(a.e)(Za.a,{key:t,value:t,text:n})}))),t&&Object(a.e)(Ja.a,{searchButtonType:"solid",initialValue:e.q,type:e.type,key:e.type})))}},{key:"tabList",get:function(){var e=this.props.vipTabListType;return"1"===e||"2"===e?Xa:Ya}}]),t}(o.Component),ta.contextTypes={router:f.a.object.isRequired,authRequired:f.a.func.isRequired},ea=na))||ea)||ea,ao=(n(2342),Object(b.connect)(function(e,t){var n=t.location.query,a=n.type,o=void 0===a?"content":a,r=n.range,i=void 0===r?"no_limit":r,c=e.entities,s=Object(j.a)(e,"li_vip_verti_search"),l=Object(He.b)(Object(ve.n)(o)),u=c[Object(ve.l)(l,Object(He.a)(ve.m[i])).keyNameInEntities],d=void 0===u?{}:u,p="km_general"===l&&"1"===s;return{searchCorrection:Object.keys(d).map(function(e){return d[e]}).find(function(e){return"search_query_correction"===e.type}),finalType:l,shouldShowVipSubTabs:$a.map(function(e){return e.type}).includes(l)&&("1"===s||"2"===s),shouldShowClubSubTabs:eo.map(function(e){return e.type}).includes(l),isCompact:p}})(aa=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.location.query,n=e.searchCorrection,o=e.shouldShowVipSubTabs,r=e.shouldShowClubSubTabs,i=e.isCompact;return Object(a.e)("div",{className:"SearchMain",id:"SearchMain"},n&&Object(a.e)(qa,{correction:n,query:t}),(o||r)&&Object(a.e)(Qa,{subTabList:o?$a:eo}),Object(a.e)("div",null,Ua(t,i)))}}]),t}(o.Component))||aa),oo=n(1109),ro=n(1102),io={utm_source:"zhihu",utm_content:"search_hot",utm_medium:"organic"},co=(oa=Object(Ae.b)(function(e){return{module:"HotSearchWordItem",trackCardShow:!0,extra:{search:{search_source:"Hot",raw_query:e.item.query||""}}}}),Object(i.withRouter)(ra=oa(ra=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this.props,t=e.item,n=e.index;return Object(a.e)("div",{className:"TopSearch-item"},Object(a.e)(i.Link,{className:"TopSearch-itemLink",key:n,target:"_blank",to:"/search?".concat(Object(g.stringify)(Object.assign({q:t.query},io)))},Object(a.e)("span",{className:"TopSearch-itemText"},t.displayQuery),n<3&&Object(a.e)(In.a,{className:"TopSearch-hot",size:18})))}}]),t}(o.PureComponent))||ra)||ra),so=(n(2343),Object(Ae.b)({module:"HotSearchWordList"})(ia=Object(b.connect)(function(e){return{words:e.search.topSearch&&e.search.topSearch.words}},{loadTopSearch:O.m})(ia=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(d.a)(t).apply(this,arguments))}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){(0,this.props.loadTopSearch)()}},{key:"componentDidUpdate",value:function(e){var t=e.words,n=this.props,a=n.words,o=n.onHeightChange;o&&(!t&&a||a.length!==t.length)&&o()}},{key:"render",value:function(){var e=this.props,t=e.words,n=e.spread,o=e.maxCount,r=e.blue;return t&&t.length?Object(a.e)(C.d,{className:w()("TopSearch","TopSearch--new")},Object(a.e)(C.b,null,"知乎热搜"),Object(a.e)("div",{className:w()("TopSearch-items",{"TopSearch-items--spread":n,"TopSearch-items--blue":r})},t.slice(0,o).map(function(e,t){return Object(a.e)(co,{item:e,key:t,index:t})}))):null}}]),t}(o.Component))||ia)||ia),lo=n(223),uo=(n(2344),Object(lo.a)(null)(ca=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).onHeightChange=function(){n.dynamicSticky&&n.dynamicSticky.check()},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e=this,t=this.props.searchType;return Object(a.e)("div",{className:"SearchSideBar",key:t},Object(a.e)(ro.a,{offset:ct.i+ve.a,ref:function(t){e.dynamicSticky=t}},Object(a.e)(so,{onHeightChange:this.onHeightChange}),Object(a.e)(oo.a,null)))}}]),t}(o.Component))||ca),po=n(1146),ho=n(290),fo=(n(2345),Object(b.connect)(null,{loadSearch:O.l})((ua=la=function(e){function t(e,n){var a;return Object(s.a)(this,t),(a=Object(u.a)(this,Object(d.a)(t).call(this,e,n))).checkRedirect(e),a}return Object(p.a)(t,e),Object(l.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.location.query,t=(e=void 0===e?{}:e).q,n=this.context.currentUser,a=(n=void 0===n?{}:n).id;if("string"!=typeof t){var o=new Error("manual throw error: wrong location query");window.Raven&&window.Raven.captureException(o,{extra:{location:this.props.location}})}t&&Object(ho.d)(Object(ho.b)(a),{q:t})}},{key:"componentWillReceiveProps",value:function(e){this.checkRedirect(e)}},{key:"checkRedirect",value:function(){var e,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.props,n=t.location.query,a=t.router,o=n.range,r=Object(c.a)(n,["range"]),i=ve.m[o||"no_limit"];"string"==typeof n.q&&ve.i.some(function(e){return e===n.type})||(e=Object.assign({},r,{type:"content",q:n.q||""})),!i||"no_limit"===i||ve.e.includes(i)&&"content"===n.type||(e=r),e&&a.replace("/search?".concat(Object(g.stringify)(e)))}},{key:"render",value:function(){var e=this.props.location.query;return Object(a.e)("div",null,Object(a.e)(v.a,{title:"".concat(e.q||""," - 搜索结果")}),Object(a.e)(no,{isPageHeader:!1}),Object(a.e)("div",{className:"Search-container"},Object(a.e)(po.a,null,Object(a.e)(no,{isPageHeader:!0})),Object(a.e)(ao,this.props),Object(a.e)(uo,{searchType:e.type})))}}]),t}(o.Component),la.contextTypes={currentUser:f.a.object},sa=ua))||sa);t.default=Object(a.e)(i.Route,null,Object(a.e)(i.IndexRoute,{component:fo,name:"Search",zaPageId:3375}))},862:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var a=n(917);t.isViewed=a.isViewed,t.onViewedOnce=a.onViewedOnce;var o=n(918);t.isFullyViewed=o.isFullyViewed,t.onFullyViewedOnce=o.onFullyViewedOnce},863:function(e,t,n){"use strict";var a=n(21);t.a=function(){return Object(a.useSelector)(function(e){return e.env.userAgent})}},864:function(e,t,n){"use strict";n.d(t,"b",function(){return O}),n.d(t,"a",function(){return S});var a=n(6),o=n(10),r=n(9),i=n(7),c=n(8),s=n(3),l=n.n(s),u=n(1),d=n(13),p=n.n(d),h=n(300),f=n.n(h),b=n(869),m=n(909),v=(n(913),n(0)),g=function(e){function t(){var e,n;Object(a.a)(this,t);for(var o=arguments.length,c=new Array(o),s=0;s<o;s++)c[s]=arguments[s];return(n=Object(r.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).state={bounceShown:!1,isPrev:!1,shouldPrevPlaceholderShown:!1},n.maybeRun=f()(function(){var e=n.props.getContainer(n.el);if(!e)return!1;var t=e.scrollTop,a=t-(n.scrollTop||0);n.scrollTop=t;var o=a<0;!n.props.isLoading&&n.shouldRun(o)&&(n.setState({isPrev:o}),n.props.onLoad(o))},100),n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=this.props,n=t.isDrained,a=t.isPrevDrained,o=t.getContainer;if(!n||!a){var r=o(this.el);r.addEventListener("scroll",this.maybeRun),r.addEventListener("resize",this.maybeRun),this.maybeRun();var i=this.props,c=i.isLocal,s=i.isLoading,l=i.children;c&&s&&u.Children.toArray(l).length<=0&&(this.displayLocalLoadingTimeout=setTimeout(function(){e.setState({bounceShown:e.props.isLoading})},300))}}},{key:"componentWillReceiveProps",value:function(e){var t=this;!this.props.isDrained&&e.isDrained&&e.isPrevDrained||!this.props.isPrevDrained&&e.isPrevDrained&&e.isDrained?this.stop():(this.props.isDrained&&!e.isDrained||this.props.isPrevDrained&&!e.isPrevDrained)&&this.start(),this.props.isLocal&&(!this.props.isLoading&&e.isLoading&&u.Children.toArray(e.children).length<=0&&(this.displayLocalLoadingTimeout=setTimeout(function(){t.setState({bounceShown:t.props.isLoading})},300)),this.props.isLoading&&!e.isLoading&&(this.displayLocalLoadingTimeout&&(this.displayLocalLoadingTimeout=clearTimeout(this.displayLocalLoadingTimeout)),this.setState({bounceShown:!1}))),this.state.isPrev&&this.placeholderEl&&!e.isLoading&&this.props.isLoading&&(this.bottom=this.placeholderEl.getBoundingClientRect().top)}},{key:"componentDidUpdate",value:function(e){if(this.state.isPrev&&this.placeholderEl&&e.isLoading&&!this.props.isLoading){var t=this.props.getContainer(this.el).scrollTop+this.placeholderEl.getBoundingClientRect().top-this.bottom;this.props.getContainer(this.el).scrollTop=this.scrollTop=t}}},{key:"componentWillUnmount",value:function(){this.stop(),clearTimeout(this.displayLocalLoadingTimeout)}},{key:"start",value:function(){var e=this.props.getContainer(this.el);e.addEventListener("scroll",this.maybeRun),e.addEventListener("resize",this.maybeRun)}},{key:"stop",value:function(){var e=this.props.getContainer(this.el);e.removeEventListener("scroll",this.maybeRun),e.removeEventListener("resize",this.maybeRun),this.maybeRun.cancel()}},{key:"shouldRun",value:function(e){var t=this;if(!this.placeholderEl)return!1;var n,a=this.props.getContainer(this.el),o=0;if(void 0!==a.innerHeight)o=0,n=a.innerHeight;else{var r=a.getBoundingClientRect();o=r.top,n=r.bottom}var i=this.placeholderEl.getBoundingClientRect().top;if(!this.prevPlaceholderEl||!e)return i-n<=this.props.threshold;var c=o-this.prevPlaceholderEl.getBoundingClientRect().bottom;this.bottom=i;var s=c<=0;return this.setState({shouldPrevPlaceholderShown:s},function(){s&&t.placeholderEl&&(t.bottom=t.placeholderEl.getBoundingClientRect().top)}),c<=this.props.threshold}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.stopPropagation,o=t.children,r=t.isDrained,i=t.isPrevDrained,c=t.isLocal,s=t.isLoading,l=t.placeholder,d=t.onRef,h=this.state,f=h.bounceShown,g=h.isPrev,O=h.shouldPrevPlaceholderShown,j=l;return f?j=Object(v.e)(b.a,null):c&&u.Children.toArray(o).length<=0&&(j=null),Object(v.e)(m.a,{className:p()(n,{"InfiLoader--bounceShown":f}),stopPropagation:a,onRef:function(t){"function"==typeof d&&d(t),e.el=t}},!i&&Object(v.e)("div",{ref:function(t){e.prevPlaceholderEl=t}},g&&s&&O&&j),o,Object(v.e)("div",{ref:function(t){e.placeholderEl=t}},!r&&s&&j))}}]),t}(u.Component);g.propTypes={threshold:l.a.number,onLoad:l.a.func.isRequired,isLoading:l.a.bool.isRequired,isDrained:l.a.bool.isRequired,isPrevDrained:l.a.bool,getContainer:l.a.func,stopPropagation:l.a.bool,placeholder:l.a.element,isLocal:l.a.bool},g.defaultProps={isPrevDrained:!0,threshold:1200,getContainer:function(){return window}};var O=g,j=n(29),y=n.n(j),C=(n(911),function(e){return Object(v.e)("svg",y()({width:"656",height:"108",viewBox:"0 0 656 108"},e),Object(v.e)("path",{d:"M0 0h656v108H0V0zm0 0h350v12H0V0zm20 32h238v12H20V32zM0 32h12v12H0V32zm0 32h540v12H0V64zm0 32h470v12H0V96z",fill:"currentColor",fillRule:"evenodd"}))}),k=function(e){return Object(v.e)("svg",y()({width:"656",height:"44",viewBox:"0 0 656 44"},e),Object(v.e)("path",{d:"M0 0h656v44H0V0zm0 0h480v12H0V0zm0 32h238v12H0V32z",fill:"currentColor",fillRule:"evenodd"}))},w=function(e){return Object(v.e)("svg",y()({width:"596",height:"60",viewBox:"0 0 596 60"},e),Object(v.e)("path",{d:"M-60 0h656v60H-60V0zm84 25h420v10H24V25zm0-25h108v10H24V0zm0 50h280v10H24V50zM-60 0H0v60h-60V0z",fill:"currentColor",fillRule:"evenodd"}))},N=function(e){function t(){return Object(a.a)(this,t),Object(r.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e,t=this.props,n=t.onRef,a=t.small,o=t.withAvatar,r=t.className;return e=a?Object(v.e)(k,{className:"PlaceHolder-mask"}):o?Object(v.e)(w,{className:"PlaceHolder-mask",style:{paddingLeft:"60px"}}):Object(v.e)(C,{className:"PlaceHolder-mask"}),Object(v.e)("div",{className:p()("PlaceHolder",r),ref:n},Object(v.e)("div",{className:"PlaceHolder-inner"},Object(v.e)("div",{className:"PlaceHolder-bg"}),e))}}]),t}(u.Component);N.propTypes={onRef:l.a.func,small:l.a.bool,withAvatar:l.a.bool};var S=N},869:function(e,t,n){"use strict";var a=n(4),o=n(29),r=n.n(o),i=n(32),c=n.n(i),s=(n(1),n(13)),l=n.n(s),u=(n(898),n(0)),d=function(e){var t=e.className,n=e.duration,o=e.count,i=e.fill,s=e.childWidth,d=e.gap,p=c()(e,["className","duration","count","fill","childWidth","gap"]),h=(s+d)*o-d;return Object(u.e)("div",r()({className:l()("BounceLoading",t),style:{width:h,height:3*s}},p),function(e){return Object(a.a)(Array(e))}(o).map(function(e,t){var a={top:s,left:(s+d)*t,width:s,height:s,backgroundColor:i,animationDuration:"".concat(n,"s"),animationDelay:"".concat(-n/o/2*t,"s")};return Object(u.e)("span",{key:"circle-".concat(t),className:"BounceLoading-child",style:a})}))};d.defaultProps={childWidth:6,gap:12,count:4,duration:.8},t.a=d},871:function(e,t,n){"use strict";var a=n(16),o=n(24),r=n(0),i=n(3),c=n.n(i),s=(n(1),n(21)),l=n(28),u=n(77),d=n(13),p=n.n(d),h=n(168),f=n(67),b=n(81),m=n.n(b),v=n(46),g=n(358),O=n(933),j=n(20);n(897);var y={name:"1cd9gw4",styles:"margin-left:.3em;"},C=function(e){var t,i=e.isPinProfile,c=e.onClick,d=e.isPinDaily,b=e.user,C=e.avatar,k=e.avatarProps,w=e.showVipIcon,N=e.vipIconZaViewName,S=e.badgeProps,x=e.noBadge,T=e.noLink,I=e.noHoverCard,E=e.style,L=e.className,P=e.children,A=Object(o.a)(e,["isPinProfile","onClick","isPinDaily","user","avatar","avatarProps","showVipIcon","vipIconZaViewName","badgeProps","noBadge","noLink","noHoverCard","style","className","children"]),M=Object(s.useSelector)(function(e){return Object(v.e)(e,{includeTablet:!0})}),R=b.id,_=b.name,z=b.avatarUrl,B=b.urlToken,D=b.isOrg,V=b.vipInfo,F=b.url,H=b.maskLevel,U=void 0===I?M:I,q=Object(u.d)(function(){return n.e(39).then(n.bind(null,1111))},!U&&!M);t=C?Object(r.e)(h.a,Object(a.default)({className:"UserLink-avatar",url:z,alt:_},k)):P||_;var W=Boolean(function(e){var t=e.id,n=e.name,a=e.urlToken;return"0"===t||"知乎用户"===n?null:a||t}(b)),K="//www.zhihu.com/".concat(D?"org":"people","/").concat(B||R),G="zhihu://pin".concat(F,"/moments");return W&&!T&&(t=Object(r.e)(l.Link,Object(a.default)({className:"UserLink-link","data-za-detail-view-element_name":"User",to:K,target:"_blank",onClick:function(e){return function(t){d&&"A"===t.target.nodeName&&j.a.trackEvent(t.target,{id:2065}),i&&(t.preventDefault(),f.a.dispatch("base/openURL",{url:e})),H&&t.preventDefault(),c&&"function"==typeof c&&c(t)}}(G)},m()(A,["isPinProfile","trackEvent","onClick","dispatch","isPinDaily"])),t),!U&&q&&(t=Object(r.e)(q,{toggler:t,id:R,urlToken:B,user:b}))),Object(r.e)("span",{style:E,className:p()("UserLink",L)},t,W&&!x&&!C&&Object(r.e)(g.c,Object(a.default)({css:y,isOrg:D,badge:b.badgeV2||b.badge,linkify:!0,enableTooltip:!0},S)),W&&w&&!C&&V&&V.vipIcon&&Object(r.e)(O.a,{vipIcon:V.vipIcon,zaViewName:N}))};C.propTypes={user:c.a.object.isRequired,avatar:c.a.bool,avatarProps:c.a.object,noBadge:c.a.bool,noHoverCard:c.a.bool,showVipIcon:c.a.bool,style:c.a.object,className:c.a.string,children:c.a.node,isPinProfile:c.a.bool,isPinDaily:c.a.bool},C.defaultProps={avatar:!1,noBadge:!1,showVipIcon:!1},t.a=C},872:function(e,t,n){"use strict";n.d(t,"a",function(){return v});var a=n(16),o=n(24),r=n(26),i=n(0),c=n(1),s=n(67),l=n(162),u=n(222),d=n(70),p=n.n(d),h=n(863),f=function(e){return/^\w+:\/\//.test(e)?e:location.origin+e},b=function(e,t){var n=t.params,a=t.onRequestOpen,o=Object(h.a)();return function(t){var i=e.href,c=e.onClick;if(c&&c(t),!t.defaultPrevented){var l=function(e,t){if(!t)return e;var n=e.split("#"),a=Object(r.a)(n,2),o=a[0],i=a[1],c=o+(o.includes("?")?"&":"?")+t;return i?c+"#"+i:c}(f(i),n);return o.ZhihuHybrid?(t.preventDefault(),void s.a.dispatch("base/openURL",{url:l})):o.isMiniProgram?(t.preventDefault(),void function(e,t){var n,a=function(){var n,a,o,r=null,i=null;if(t.WxMiniProgram)r=null===(a=window.wx)||void 0===a?void 0:null===(o=a.miniProgram)||void 0===o?void 0:o.navigateTo;else if(t.JDMiniProgram){var c,s;r=null===(c=window.jd)||void 0===c?void 0:null===(s=c.miniProgram)||void 0===s?void 0:s.navigateTo}var l,u=null===(n=/\/topic\/(\d+)/.exec(e))||void 0===n?void 0:n[1];(u&&(t.WxMiniProgram?i="/pages/topic?id=".concat(u):t.JDMiniProgram&&(i="/pages/topic/index?id=".concat(u))),i)?null===(l=r)||void 0===l||l({url:i}):/^http(s)?:/.test(e)&&(location.href=e)};!t.WxMiniProgram||(null===(n=window.WeixinJSBridge)||void 0===n?void 0:n.invoke)?a():document.addEventListener("WeixinJSBridgeReady",a,!1)}(l,o)):void((null==a?void 0:a({ua:o,url:l}))&&t.preventDefault())}}},m=function(e,t){var n=t.extra;return{zaType:"Button",zaAction:"OpenUrl",zaEventType:"Click",shouldTrackClick:!0,extra:p()({link:{get url(){return f(e)}}},n)}},v=Object(c.forwardRef)(function(e,t){var n=e.params,r=e.onRequestOpen,c=e.extra,s=Object(o.a)(e,["params","onRequestOpen","extra"]);return Object(i.e)(u.c,Object(a.default)({as:l.g},m(s.href,{extra:c}),s,{ref:t,onClick:b(s,{params:n,onRequestOpen:r})}))});t.b=function(e){var t=e.params,n=e.onRequestOpen,a=e.children,r=e.extra,i=Object(o.a)(e,["params","onRequestOpen","children","extra"]);return Object(c.cloneElement)(a,Object(u.j)(Object.assign({},m(a.props.href,{extra:r}),{},i,{ref:a.ref,onClick:b(a.props,{params:t,onRequestOpen:n})})))}},873:function(e,t,n){"use strict";n.d(t,"a",function(){return w}),n.d(t,"b",function(){return k}),n.d(t,"d",function(){return N}),n.d(t,"c",function(){return x});var a=n(6),o=n(10),r=n(9),i=n(7),c=n(8),s=n(16),l=n(24),u=n(0),d=n(3),p=n.n(d),h=n(1),f=n.n(h),b=n(13),m=n.n(b),v=n(81),g=n.n(v),O=n(862),j=n(199),y=n(977);n(1115);function C(e){var t=e.onRef,n=e.listClassName,a=e.itemClassName,o=e.className,r=e.children,i=Object(l.a)(e,["onRef","listClassName","itemClassName","className","children"]);return Object(u.e)("div",Object(s.default)({ref:t,className:m()(n,o)},i),h.Children.map(r,function(e){return"string"==typeof e?Object(u.e)("span",{className:a},e):e?Object(h.cloneElement)(e,{className:m()(a,e.props.className)}):e}))}var k=function(e){return Object(u.e)(C,Object(s.default)({listClassName:"ContentItem-cells",itemClassName:"ContentItem-cell"},e))},w=function(e){return Object(u.e)(C,Object(s.default)({listClassName:"ContentItem-actions",itemClassName:"ContentItem-action"},e))},N=function(e){return Object(u.e)(C,Object(s.default)({listClassName:"ContentItem-status",itemClassName:"ContentItem-statusItem"},e))},S=function(e){function t(){var e,n;Object(a.a)(this,t);for(var o=arguments.length,c=new Array(o),s=0;s<o;s++)c[s]=arguments[s];return(n=Object(r.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).onRef=function(e){n.domNode=e,n.props.onRef&&n.props.onRef(e)},n.onAccessContent=function(e,t){t===document.activeElement&&window.open(n.props.link)},n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;Object(O.onViewedOnce)(this.domNode,function(){var t=e.props,n=t.data,a=(n=void 0===n?{}:n).type,o=n.id,r=t.lastreadTouchable;e.context.currentUser&&r&&a&&o&&Object(y.c)("article"===a?"post":a,o,y.b)})}},{key:"render",value:function(){var e=g()(this.props,["noTrackCardShow","lastreadTouchable","data","onRef"]),t=e.className,n=e.title,a=e.meta,o=e.children,r=e.extra,i=e.image,c=e.link,d=Object(l.a)(e,["className","title","meta","children","extra","image","link"]),p=Object(u.e)(f.a.Fragment,null,n&&Object(u.e)("h2",{className:"ContentItem-title"},n),function(e){return!!e&&!(Array.isArray(e)&&!e.some(Boolean))}(a)&&Object(u.e)("div",{className:"ContentItem-meta"},a));return Object(u.e)("div",Object(s.default)({ref:this.onRef,className:m()("ContentItem",t)},d),c&&Object(u.e)(j.c,{keyMap:{ACCESS:"enter"},handlers:{ACCESS:this.onAccessContent}}),i||r?Object(u.e)("div",{className:"ContentItem-main"},i&&Object(u.e)("div",{className:"ContentItem-image"},i),Object(u.e)("div",{className:"ContentItem-head"},p),r&&Object(u.e)("div",{className:"ContentItem-extra"},r)):p,o)}}]),t}(h.Component);S.contextTypes={currentUser:p.a.object};var x={plain:"plain",default:"default",interactive:"interactive"};t.e=S},877:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return o});var a={question:"问题",answer:"回答",comment:"评论",article:"文章",message:"私信",member:"用户",people:"用户",collection:"收藏",activity:"编辑",pin:"想法",ebook:"电子书",column:"专栏",roundtable:"圆桌",promotion:"文章",topic:"话题",live:"live",live_course:"live 课程",book_review:"书评",club_mask:"圈子用户",club_post:"帖子",zvideo:"视频"},o=Object.keys(a)},879:function(e,t,n){"use strict";n.d(t,"a",function(){return v});var a=n(16),o=n(6),r=n(10),i=n(9),c=n(7),s=n(8),l=n(0),u=n(1),d=n(21),p=n(128),h=n(169),f=n(923),b=function(){return n.e(23).then(n.bind(null,3048)).then(function(e){return e.ReportModal})};var m=function(e){function t(){return Object(o.a)(this,t),Object(i.a)(this,Object(c.a)(t).apply(this,arguments))}return Object(s.a)(t,e),Object(r.a)(t,[{key:"render",value:function(){return Object(l.e)(p.a,Object(a.default)({getComponent:b},this.props))}}]),t}(u.Component),v=Object(d.connect)(null,function(e,t){return{loadProfile:function(t){e(Object(h.h)(t))},updateUserBlocking:function(t,n){e(Object(h.n)(t,n))},doReport:function(n,a,o,r){return e(Object(f.b)(n,a,o,r,void 0,{NOTIFICATION:t.notification})).then(function(e){return e.payload.sarcasmRecommend&&t.showWalle(),e})}}})(m);n(884)},880:function(e,t,n){"use strict";t.a=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return fetch(e,Object.assign({credentials:"include",headers:{"X-Requested-With":"Fetch"}},t)).then(function(e){return e.json()})}},882:function(e,t,n){"use strict";n.d(t,"b",function(){return L}),n.d(t,"a",function(){return S});var a=n(6),o=n(10),r=n(9),i=n(7),c=n(8),s=n(3),l=n.n(s),u=n(1),d=n(13),p=n.n(d),h=n(36),f=n.n(h),b=n(62),m=n.n(b),v=n(301),g=n(1375),O=n(919),j=(n(995),n(0)),y=function(e){function t(){var e,n;Object(a.a)(this,t);for(var o=arguments.length,c=new Array(o),s=0;s<o;s++)c[s]=arguments[s];return(n=Object(r.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).state={isInputing:!1,value:n.props.value||""},n.handleChange=function(e){n.setState({value:Object(v.cutStringWidth)(e.target.value,30)})},n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"componentWillReceiveProps",value:function(e){e.value&&e.value!==this.state.value&&this.setState({value:e.value})}},{key:"render",value:function(){var e=this,t=this.state,n=t.isInputing,a=t.value,o=this.props.onChange,r=!n&&!a,i=!n&&a;return Object(j.e)("div",{className:"Editable-VideoTitleInput-container"},Object(j.e)(O.a,null,Object(j.e)("div",{className:p()("Editable-VideoTitleInput-innerContainer",{"Editable-VideoTitleInput-innerContainer--isBeforeIconShown":r}),onClick:function(){return e.setState({isInputing:!0})}},r&&Object(j.e)(g.a,{className:"Editable-VideoTitleInput-beforeIcon",center:!0}),!n&&Object(j.e)("div",{className:p()("Editable-VideoTitleInput-value",{"Editable-VideoTitleInput-value--noContent":!a})},a||"好的标题可以获得更多的推荐及关注者"),n&&Object(j.e)("input",{className:"Editable-VideoTitleInput",value:a,ref:function(e){e&&e.focus()},placeholder:"标题长度不超过 15 个字",onChange:this.handleChange,onBlur:function(t){e.setState({isInputing:!1}),o(t.target.value)}}),i&&Object(j.e)(g.a,{className:"Editable-VideoTitleInput-afterIcon",center:!0}))))}}]),t}(u.Component),C=n(922),k=n(1376),w=n(996),N=n.n(w),S=function(e){var t=e.className;return Object(j.e)("svg",{viewBox:"0 0 72 72",className:t},Object(j.e)("circle",{cx:"36",cy:"36",fill:"#fff",fillOpacity:".95",r:"36"}),Object(j.e)("path",{d:"M50.835 37.06L29.477 49.97a1.203 1.203 0 0 1-1.664-.43 1.25 1.25 0 0 1-.17-.631V23.091c0-.682.543-1.234 1.213-1.234.219 0 .433.06.62.173l21.359 12.91a1.245 1.245 0 0 1 0 2.12z",fill:"#444",fillRule:"nonzero"}))},x=(n(997),function(){return Object(j.e)("div",{className:"VideoCardPlayButton"},Object(j.e)(S,{className:"VideoCardPlayButton-icon"}))}),T=function(e){var t=e.fileSize;return Object(j.e)("div",{className:"VideoCardPlayButton-withFileSize--outer"},Object(j.e)("span",{className:"VideoCardPlayButton-withFileSize"},Object(j.e)(k.a,{center:!0,size:14}),t?N()(t,{decimalPlaces:1,unit:"MB"}):"流量播放"))};function I(e){var t=e.thumbnail,n=e.isLens,a=e.canPlay;return n||a?t&&"string"==typeof t?Object(j.e)("img",{src:t,alt:"视频封面"}):t||null:Object(j.e)(S,{className:"VideoCard-playIcon VideoCard-playIcon--nonLens"})}n(998);var E=function(e){function t(){var e,n;Object(a.a)(this,t);for(var o=arguments.length,c=new Array(o),s=0;s<o;s++)c[s]=arguments[s];return(n=Object(r.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).state={isMobile:!1,playerShown:!1,playerLoading:!1},n.handlePlay=function(e){e.preventDefault();var t=n.props,a=t.interactive,o=t.isConverting,r=t.isLens,i=t.playerUrl,c=t.onPlayFailed,s=t.onLensPlay,l=t.onBeforePlay;a&&!o&&(i||!c?l?Promise.resolve(l()).then(function(e){!1!==e&&n.play()}):r&&s&&s()||n.play():c())},n.handlePlayerLoad=function(){n.loadingCount--,0===n.loadingCount&&n.setState({playerLoading:!1})},n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.setState({isMobile:m()(navigator.userAgent).Mobile})}},{key:"canPlay",value:function(){return this.props.isLens}},{key:"inlinePlayer",value:function(){var e=this.props,t=e.interactive,n=e.isLens,a=e.onLensPlay,o=e.onBeforePlay;return t&&n&&!(a||o)}},{key:"showContent",value:function(){var e=this.props,t=e.content,n=e.isLens,a=e.title;return!e.isVideoTitleEditable&&(!n||Boolean(t||a))}},{key:"showDescription",value:function(){var e=this.props.isLens;return this.showContent()&&!e}},{key:"play",value:function(){var e=this.props.onPlay;this.loadingCount=2,this.setState({playerShown:!0,playerLoading:!0}),setTimeout(this.handlePlayerLoad,1e3),e&&e()}},{key:"renderContent",value:function(){var e=this.props,t=e.interactive,n=e.isLens,a=e.title,o=e.thumbnail,r=e.source,i=e.url,c=e.showPlayButton,s=e.usePlayButtonWithFileSize,l=e.fileSize,u=e.rightBottomButton,d=e.isVideoTitleEditable,h=e.onVideoTitleChange,f=e.isConverting,b=e.content,m=this.canPlay(),v=this.inlinePlayer(),g=Object(j.e)(I,{thumbnail:o,isLens:n,canPlay:m}),O=c&&!f&&(s?Object(j.e)(T,{fileSize:l}):Object(j.e)(x,null)),C=Object(j.e)("div",{className:"VideoCard-layout"},m?Object(j.e)("div",{className:"VideoCard-video"},Object(j.e)("div",{className:"VideoCard-video-content"},v?this.renderPlayer():Object(j.e)("div",{className:p()("VideoCard-thumbnail",{"VideoCard-thumbnail--placeholder":!o}),onClick:this.handlePlay},g,O,u))):Object(j.e)("div",{className:"VideoCard-poster"},g),this.showContent()&&(b||Object(j.e)("div",{className:"VideoCard-content"},Object(j.e)("div",{className:"VideoCard-title"},a),this.showDescription()&&Object(j.e)("div",{className:"VideoCard-description"},r&&Object(j.e)("span",{className:"VideoCard-source"},r),Object(j.e)("span",{className:"VideoCard-badge"},"视频")))),d&&Object(j.e)(y,{value:a,onChange:h}));return n?C:t?Object(j.e)("a",{className:"VideoCard-link",href:i,target:"_blank",rel:"noopener noreferrer"},C):Object(j.e)("div",{className:"VideoCard-link"},C)}},{key:"renderPlayer",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=this.props,n=t.source,a=t.playerUrl,o=t.onIframeRef,r=t.useMSE,i=f.a.stringify({autoplay:e&&"lens"===n,useMSE:r});return Object(j.e)(C.a,{placeholder:Object(j.e)("div",{className:"VideoCard-player"})},Object(j.e)("div",{className:"VideoCard-player"},Object(j.e)("iframe",{ref:o,frameBorder:0,allowFullScreen:!0,src:"".concat(a,"?").concat(i),onLoad:this.handlePlayerLoad})))}},{key:"render",value:function(){var e=this.props,t=e.interactive,n=e.isConverting,a=this.state,o=a.isMobile,r=a.playerShown,i=a.playerLoading;return Object(j.e)("div",{className:p()("VideoCard",{"VideoCard--converting":n,"VideoCard--interactive":t,"VideoCard--mobile":o})},this.renderContent(),r&&Object(j.e)("div",{className:p()("VideoCard-overlay",{"is-loading":i})},this.renderPlayer(!0)),Object(j.e)("div",{className:p()("VideoCard-mask",{"is-shown":i})}))}}]),t}(u.Component);E.propTypes={interactive:l.a.bool,showPlayButton:l.a.bool,usePlayButtonWithFileSize:l.a.bool,fileSize:l.a.number,onPlay:l.a.func,onPlayFailed:l.a.func,onLensPlay:l.a.func,onBeforePlay:l.a.func,rightBottomButton:l.a.oneOfType([l.a.element,l.a.string]),thumbnail:l.a.oneOfType([l.a.element,l.a.string]),content:l.a.object},E.defaultProps={interactive:!0,showPlayButton:!0};var L=E},883:function(e,t,n){"use strict";var a,o,r,i,c=n(16),s=n(6),l=n(10),u=n(9),d=n(7),p=n(8),h=n(0),f=n(3),b=n.n(f),m=n(1),v=n.n(m),g=n(21),O=n(28),j=n(13),y=n.n(j),C=n(936),k=n.n(C),w=n(849),N=n(23),S=n(20),x=n(222),T=n(877),I=n(46),E=n(1038),L=n(103),P=n(68),A=n(177),M=n(302),R=n(367),_=n(138),z=n(366),B=n(18),D=(n(1043),n(1039)),V={default:"default",primary:"primary"},F=(a=Object(g.connect)(function(e){return{ua:e.env.userAgent,isMobile:Object(I.e)(e,{includeTablet:!0})}},{toggleFollowQuestion:P.lb,toggleFollowCollection:A.d,toggleFollowColumn:M.e,toggleFollowRoundtable:R.m,toggleFollowTopic:_.M,toggleFollowPeople:L.a,toggleFollowRewardPeople:z.o,toggleFollowClub_mask:E.a}),Object(O.withRouter)(o=a((i=r=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).zaRef=v.a.createRef(),n.state={hovered:!1,isFetching:!1},n.handleMouseEnter=function(){n.setState({hovered:!0})},n.handleMouseLeave=function(){n.setState({hovered:!1})},n.toggleFollow=function(e){var t,a=n.props,o=a.isFollowing,r=a.type,i=a.id,c=a.zaId,s=a.useCustomZa,l=a.onFollowButtonClick,u=a.router,d=!o,p="帖子详情页";(null==u?void 0:null===(t=u.params)||void 0===t?void 0:t.maskId)?p="用户个人主页":Object(D.a)(u)&&(p="圈子详情页"),s||(S.a.trackEvent(e.target,Object.assign({action:d?"Follow":"UnFollow",element:"Button",name:p,element_name:B.Y[r]},c&&{id:c})),n.zaRef.current.trackEvent({action:d?"Follow":"UnFollow",eventType:"Click",elementLocation:{type:"Button"}}));var h="toggleFollow".concat(r.slice(0,1).toUpperCase()).concat(r.slice(1)),f=n.props[h](i,d);k()(f)&&(n.setState({isFetching:!0}),f.then(function(){n.setState({isFetching:!1}),l&&l()}).catch(function(){return n.setState({isFetching:!1})}))},n.handleToggleFollow=function(e){n.props.authRequired?n.props.authRequired(n.toggleFollow,B.U.follow,!0)(e):n.props.ua.Zhihu?n.toggleFollow(e):n.context.authRequired(n.toggleFollow,B.U.follow)(e)},n.handleClick=function(e){var t=n.props.onClick;t&&!t(e)||(n.handleToggleFollow(e),e.stopPropagation())},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e,t,n,a=this.state.hovered,o=this.props,r=o.onRef,i=o.preset,s=o.entityHidden,l=o.type,u=o.isFollowing,d=o.gender,p=o.className,f=o.children,b=o.isMobile,m=o.disabled;u?(e="primary",n=a?"取消关注":"已关注",t={color:"grey"}):(e=i,t={color:"blue"},n=f||("people"===l||"rewardPeople"===l?[Object(h.e)(w.a,{key:"icon",className:"FollowButton-icon",text:!0,center:!0}),"关注".concat("number"==typeof d&&-1!==d?B.M[d]:"")]:"关注".concat(s?"":T.b[l])));var v=this.state.isFetching;return Object(h.e)(N.d,Object(c.default)({onRef:r,preset:e,onClick:this.handleClick,className:y()("FollowButton",p)},t,!b&&{onMouseEnter:this.handleMouseEnter,onMouseLeave:this.handleMouseLeave},{disabled:m||v}),Object(h.e)(x.d,{ref:this.zaRef}),n)}}]),t}(m.Component),r.contextTypes={authRequired:b.a.func},r.propTypes={preset:b.a.oneOf(Object.values(V)),type:b.a.oneOf(T.a).isRequired,id:b.a.oneOfType([b.a.number,b.a.string]).isRequired,zaId:b.a.number,useCustomZa:b.a.bool},r.defaultTypes={preset:V.default},r.PRESETS=V,o=i))||o)||o);t.a=F},884:function(e,t,n){"use strict";var a=n(16),o=n(24),r=n(6),i=n(10),c=n(9),s=n(7),l=n(8),u=n(0),d=n(3),p=n.n(d),h=n(1),f=n(299),b=n.n(f),m=n(81),v=n.n(m),g=n(23),O=n(1224),j=n(20),y=n(877),C=n(879),k=n(164),w=n(112),N=(n(955),function(e){var t=e.onClose,n=e.shown;return Object(u.e)(k.b,{wrapperClassName:"WalleModal",className:"WalleModal",title:"举报成功",onClose:t},n&&Object(u.e)("div",{className:"WalleModal-wrapper"},Object(u.e)("p",{className:"WalleModal-des"},"你的举报我们已经收到，处理完成后将会私信告知处理结果。"),Object(u.e)("img",{className:"WalleModal-img",src:"https://zhstatic.zhihu.com/heifetz/wall-E.png",alt:"walle"}),Object(u.e)("div",{className:"WalleModal-open"},Object(u.e)("div",{className:"WalleModal-content"},Object(u.e)("div",{className:"WalleModal-title"},"遇到阴阳怪气的评论了？"),Object(u.e)("div",{className:"WalleModal-intro"},"手动开启瓦力算法识别功能，自动折叠阴阳怪气的评论！")),Object(u.e)(w.a,{className:"WalleModal-btn",preset:"primary",color:"blue",to:"/settings/preference"},"立即开启"))))}),S=n(18),x=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={shown:!1,walleModalShown:!1},n.handleShow=n.context.authRequired(function(e){var t=n.props.zaReportId;n.setState({shown:!0}),n.props.onModalShown(!0),j.a.trackEvent(e.target,Object.assign({action:"Report",element:"Button",is_intent:!0},t&&{id:t}))},S.U.report),n.handleHide=function(){n.setState({shown:!1}),n.props.onModalShown(!1)},n.handleWalleShow=function(){n.setState({walleModalShown:!0}),n.props.onModalShown(!0)},n.handleWalleClose=function(){n.setState({walleModalShown:!1}),n.props.onModalShown(!1)},n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.state,t=e.shown,n=e.walleModalShown,r=this.props,i=r.id,c=r.resourceType,s=r.type,l=Object(o.a)(r,["id","resourceType","type"]);return Object(u.e)(h.Fragment,null,Object(u.e)(g.d,Object(a.default)({preset:"plain",onClick:this.handleShow},v()(l,["zaReportId"])),Object(u.e)(O.a,{size:14,center:!0})," 举报"),Object(u.e)(C.a,{resourceType:c,type:s,urlToken:i,shown:t,onClose:this.handleHide,showWalle:this.handleWalleShow,zaEnabled:!0}),Object(u.e)(N,{shown:n,onClose:this.handleWalleClose}))}}]),t}(h.Component);x.contextTypes={authRequired:p.a.func},x.propTypes={type:p.a.oneOf(y.a).isRequired,id:p.a.oneOfType([p.a.number,p.a.string]).isRequired,zaReportId:p.a.number,onModalShown:p.a.func},x.defaultProps={onModalShown:b.a};t.a=x},888:function(e,t,n){"use strict";e.exports=n(1005)},889:function(e,t,n){"use strict";var a,o,r,i,c=n(16),s=n(6),l=n(10),u=n(9),d=n(7),p=n(8),h=n(0),f=n(3),b=n.n(f),m=n(1),v=n(21),g=n(28),O=n(13),j=n.n(O),y=(n(200),n(20)),C=n(46),k=n(957),w=n(871),N=(n(890),n(1091),a=Object(v.connect)(function(e,t){var n=t.relatedTo,a=t.params,o=["question","answer"].includes(n);return{isHuman:Object(C.d)(e),shouldOia:Object(C.i)(e)&&o,isMobile:Object(C.e)(e,{includeTablet:!0}),isSpecialQuestionOrAnswer:Object(C.k)(e,{type:o&&n,id:o?"question"===n?null==a?void 0:a.id:null==a?void 0:a.answerId:""})}}),Object(g.withRouter)(o=a((i=r=function(e){function t(){var e,n;Object(s.a)(this,t);for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];return(n=Object(u.a)(this,(e=Object(d.a)(t)).call.apply(e,[this].concat(o)))).handleClick=function(e){var t=n.props,a=t.zaId,o=t.zaExtra,r=t.author.urlToken,i=t.isSpecialQuestionOrAnswer;if(a&&y.a.trackEvent(null,{id:a,action:"OpenUrl",element_name:"User"},o),i)return location.href="zhihu://people/".concat(r,"?utm_app_name=zhihu_check"),e.preventDefault(),void e.stopPropagation()},n}return Object(p.a)(t,e),Object(l.a)(t,[{key:"render",value:function(){var e="plain"===this.props.preset,t=this.props,n=t.author,a=t.noLink,o=t.avatarSize,r=void 0===o?e?24:38:o,i=t.children,s=t.className,l=t.extra,u=t.itemProp,d=t.roundAvatar,p=t.isMobile,f=t.target,b=t.noDetail,m=t.noHoverCard,v=t.noHeadline,g=e&&l||Object(h.e)("div",{className:"AuthorInfo-badge"},i||Object(h.e)(k.a,{className:"AuthorInfo-badgeText",user:n,noHeadline:v}));return Object(h.e)("div",{className:j()("AuthorInfo",s,{"AuthorInfo--plain":e}),itemProp:u,itemScope:!0,itemType:"http://schema.org/Person"},Object(h.e)("meta",{itemProp:"name",content:n.name}),Object(h.e)("meta",{itemProp:"image",content:n.avatarUrl}),Object(h.e)("meta",{itemProp:"url",content:"https://www.zhihu.com/people/".concat(n.urlToken)}),Object(h.e)("meta",{itemProp:"zhihu:followerCount",content:n.followerCount}),Object(h.e)(w.a,Object(c.default)({onClick:this.handleClick,noHoverCard:p||m,noLink:a,className:"AuthorInfo-avatarWrapper",user:n,avatar:!0,avatarProps:{className:"AuthorInfo-avatar",size:r,round:d}},f&&{target:f})),Object(h.e)("div",{className:"AuthorInfo-content"},Object(h.e)("div",{className:"AuthorInfo-head"},Object(h.e)(w.a,Object(c.default)({noHoverCard:p||m,onClick:this.handleClick,className:"AuthorInfo-name",noLink:a,user:n},f&&{target:f})),!e&&l),!b&&Object(h.e)("div",{className:"AuthorInfo-detail"},g)))}}]),t}(m.Component),r.propTypes={author:b.a.object.isRequired,noLink:b.a.bool,avatarSize:b.a.number,preset:b.a.oneOf(["plain","default"]),className:b.a.string,itemProp:b.a.string,roundAvatar:b.a.bool,isMobile:b.a.bool,noDetail:b.a.bool,relatedTo:b.a.string,zaId:b.a.number,zaExtra:b.a.object,noHoverCard:b.a.bool,noHeadline:b.a.bool},r.defaultProps={noLink:!1,roundAvatar:!1,itemProp:"author",noHoverCard:!1,noHeadline:!1},o=i))||o)||o);t.a=N},890:function(e,t,n){"use strict";n.d(t,"a",function(){return i});n(26);var a=n(36),o=n.n(a),r=function(e){var t=e||{},n=t.type,a=t.id,r=t.urlToken,i=t.q;switch(n){case"question":return"/questions/".concat(a);case"answer":return"/answers/".concat(a);case"article":case"p":return"/articles/".concat(a);case"column":return"/columns/".concat(a);case"live":return"/lives/".concat(a);case"ebook":case"book":return"/pub/book/".concat(a);case"feed":return"/feed";case"topic":return"/topics/".concat(a);case"people":return"/people/".concat(r||a);case"search":return"/search?".concat(o.a.stringify({q:i}));case"video":return"video_topic/".concat(a);case"zvideo":return"/zvideo/".concat(a);case"zvideo_answer":case"zvideo_article":var c=n.replace("zvideo_","");return"/".concat(c,"s/").concat(a);default:return null}},i=function(e,t){var n=t?"?".concat(o.a.stringify(t)):"",a="string"==typeof e?e:r(e);if(a){var i=a.startsWith("/")?a.slice(1):a;return"zhihu://".concat(i).concat(n)}return"zhihu://".concat(n)}},893:function(e,t,n){var a=n(561),o=n(894);function r(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=void 0}r.prototype=a(o.prototype),r.prototype.constructor=r,e.exports=r},894:function(e,t){e.exports=function(){}},895:function(e,t,n){var a=n(561),o=n(894),r=4294967295;function i(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=r,this.__views__=[]}i.prototype=a(o.prototype),i.prototype.constructor=i,e.exports=i},896:function(e,t,n){"use strict";var a=n(6),o=n(10),r=n(9),i=n(7),c=n(8),s=n(3),l=n.n(s),u=n(1),d=n.n(u),p=n(13),h=n.n(p),f=n(938),b=n(198),m=n(62),v=n.n(m),g=n(129),O=(n(946),n(0)),j={top:10,left:20},y={top:0,left:0};var C=function(e){function t(){var e,n;Object(a.a)(this,t);for(var o=arguments.length,c=new Array(o),s=0;s<o;s++)c[s]=arguments[s];return(n=Object(r.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).scrollerRef=d.a.createRef(),n.state={transEnded:!1,rect:null,translate:null,scale:null},n.getBoundingClientRect=function(){var e=n.props,t=e.img,a=e.data,o=t.getBoundingClientRect(),r=o.left,i=o.top,c=o.width,s=o.height,l=a.width,u=a.height,d={left:r,top:i,width:c,height:s},p=1;return l>u?(d.height=s,p=s/u,d.width=l*p,d.left=r+(c-d.width)/2,d.top=i+(s-d.height)/2):l<u&&(d.width=c,p=c/l,d.height=u*p,d.left=r+(c-d.width)/2,d.top=i+(s-d.height)/2),d},n.handleClick=function(e){e.stopPropagation(),n.setState({translate:null,scale:null})},n.handleTransitionEnd=function(){var e=n.state,t=e.translate,a=e.scale,o=n.props.onClose;t&&a?(n.setState({transEnded:!0}),n.scrollerRef.current.style.overflow="auto"):o()},n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"componentWillMount",value:function(){var e=this.props,t=e.img,n=e.isOriginalUrl;this.originalSrc!==this.currentSrc&&((new Image).src=this.originalSrc);this.setState({rect:!1===n?this.getBoundingClientRect():t.getBoundingClientRect()})}},{key:"componentDidMount",value:function(){var e=this;Object(f.disableBodyScroll)(this.scrollerRef.current);var t=this.props.img;setTimeout(function(){return e.setState(Object.assign({},e.computeTransition(e.state.rect,{width:t.dataset.rawwidth||t.naturalWidth})))})}},{key:"componentWillUnmount",value:function(){Object(f.enableBodyScroll)(this.scrollerRef.current)}},{key:"computeTransition",value:function(e,t){var n,a=this.props,o=a.transitionType,r=a.data,i=v()(navigator.userAgent).Mobile?y:j,c=i.top,s=i.left,l=window,u={left:0,top:0,width:l.innerWidth,height:l.innerHeight},d=function(e){return{x:e.left+e.width/2,y:e.top+e.height/2}}(u),p={width:u.width-2*s,height:u.height-2*c},h={},f={};return 1===o?(h.width=p.width>r.width?r.width:p.width,n=h.width/r.width,h.height=r.height*n,f={x:(p.width-h.width)/2+s,y:h.height<p.height?(p.height-h.height)/2+c:j.top}):(h.width=p.width>t.width?t.width:p.width,n=h.width/e.width,h.height=e.height*n,f={x:d.x-e.width/2,y:(h.height<p.height?d.y:j.top+h.height/2)-e.height/2}),{translate:f,scale:n}}},{key:"render",value:function(){var e,t=this,n=this.props,a=n.img,o=n.isOriginalUrl,r=n.data,i=n.transitionType,c=n.className,s=this.state,l=s.translate,u=s.scale,d=s.rect,p=s.transEnded,f=l&&u,m=1,C="";if(1===i){var k=(v()(navigator.userAgent).Mobile?y:j).left;e=Math.min(window.innerWidth-2*k,r.width);var w=d.width/e;C=f?"translate3d(".concat(l.x,"px, ").concat(l.y,"px, 0) scale3d(1, 1, 1) "):"translate3d(".concat(d.left,"px, ").concat(d.top,"px, 0) scale3d(").concat(w,", ").concat(w,", 1) "),m=f?1:0}else C=f?"translate3d(".concat(l.x,"px ,").concat(l.y,"px,0) scale3d(").concat(u,",").concat(u,",1) "):"translate3d(".concat(d.left,"px,").concat(d.top,"px,0)");return Object(O.e)(g.a,null,Object(O.e)("div",{className:h()("ImageView",c,{"is-active":f}),style:{paddingBottom:j.top},onClick:this.handleClick},Object(O.e)("div",{className:"ImageView-inner",ref:this.scrollerRef},Object(O.e)("img",{ref:function(e){t.imgEl=e},src:!1===o?Object(b.imgUrl)(a.dataset.original,"r"):p&&this.originalSrc||this.currentSrc,className:h()("ImageView-img",{"ImageView-transformOrigin":1===i}),style:{width:e||d.width,transform:C,opacity:m},onTransitionEnd:this.handleTransitionEnd,alt:"preview"}))))}},{key:"originalSrc",get:function(){return this.props.img.dataset.original}},{key:"currentSrc",get:function(){var e=this.props.img;return e.currentSrc||e.src}}]),t}(u.Component);C.propTypes={img:l.a.object.isRequired,onClose:l.a.func.isRequired},t.a=C},897:function(e,t,n){},898:function(e,t,n){},899:function(e,t,n){"use strict";var a=n(6),o=n(10),r=n(9),i=n(7),c=n(8),s=n(0),l=n(3),u=n.n(l),d=n(1),p=n(164),h=n(1087),f=function(e){function t(){var e,n;Object(a.a)(this,t);for(var o=arguments.length,c=new Array(o),s=0;s<o;s++)c[s]=arguments[s];return(n=Object(r.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).handlePackup=function(){var e=n.props.onClose;window.scrollTo(0,n.originPageYOffset),e&&e()},n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"componentWillReceiveProps",value:function(e){"bottom"===e.commentPattern&&e.shown&&!this.props.shown&&(this.originPageYOffset=window.pageYOffset)}},{key:"render",value:function(){var e=this.props,t=e.className,n=e.containerClassName,a=e.shown,o=e.showPackupButton,r=e.parent,i=e.commentPattern,c=e.commentInputPosition,l=e.onClose,u=e.byComment,d=e.needLoadCommentPermission,f=e.isMobile,b=e.onOrderChange,m=e.onItemLike,v=e.onPaginationClick,g=e.autoFocus,O=e.onMount,j=e.zaInfo;return a?"bottom"===i?Object(s.e)(h.a,{className:t,containerClassName:n,autoFocus:g,parent:r,commentPattern:i,commentInputPosition:c,showPackupButton:o,handlePackupButton:this.handlePackup,needLoadCommentPermission:d,isMobile:f,onOrderChange:b,onItemLike:m,onPaginationClick:v,onMount:O,zaInfo:j}):Object(s.e)(p.b,{size:"fullPage",onClose:l,maskClosable:!1},a&&"fixed"===i&&Object(s.e)(h.a,{className:t,containerClassName:n,parent:r,commentPattern:i,byComment:u,needLoadCommentPermission:d,onOrderChange:b,onItemLike:m,onPaginationClick:v,onMount:O,zaInfo:j})):null}}]),t}(d.Component);f.propTypes={className:u.a.string,containerClassName:u.a.string,byComment:u.a.oneOfType([u.a.number,u.a.string]),parent:u.a.object,shown:u.a.bool,showPackupButton:u.a.bool,commentPattern:u.a.string,commentInputPosition:u.a.oneOf(["top","bottom"]),onClose:u.a.func,needLoadCommentPermission:u.a.bool,isMobile:u.a.bool,onOrderChange:u.a.func,onItemLike:u.a.func,onPaginationClick:u.a.func,autoFocus:u.a.bool,onMount:u.a.func,zaInfo:u.a.object},f.defaultProps={commentPattern:"fixed",showPackupButton:!0,commentInputPosition:"bottom"},t.a=f},903:function(e,t,n){"use strict";var a=n(6),o=n(10),r=n(9),i=n(7),c=n(8),s=n(0),l=n(3),u=n.n(l),d=n(1),p=n.n(d),h=n(21),f=n(13),b=n.n(f),m=n(1255),v=n.n(m),g=n(299),O=n.n(g),j=n(851),y=n(1469),C=n(1468),k=n(17),w=function(e){return p.a.createElement(k.a,e,p.a.createElement("path",{d:"M2.931 7.89c-1.067.24-1.275 1.669-.318 2.207l5.277 2.908 8.168-4.776c.25-.127.477.198.273.39L9.05 14.66l.927 5.953c.18 1.084 1.593 1.376 2.182.456l9.644-15.242c.584-.892-.212-2.029-1.234-1.796L2.93 7.89z",fillRule:"evenodd"}))};w.defaultProps={name:"Share"};var N=w,S=n(59),x=n(23),T=n(20),I=n(105),E=n(877),L=n(199),P=n(416),A=n(22),M=n(18);n(1257);function R(e){return e&&e.startsWith("//")?"https:".concat(e):e}function _(e){return Object.keys(e).map(function(t){return"".concat(t,"=").concat(encodeURIComponent(e[t]))}).join("&")}var z=function(e){function t(){var e,n;Object(a.a)(this,t);for(var o=arguments.length,c=new Array(o),s=0;s<o;s++)c[s]=arguments[s];return(n=Object(r.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).state={qrCodeUrl:"",url:""},n.togglerRef=p.a.createRef(),n.shouldShowMenu=function(){var e=n.props,t=e.onTogglerClick,a=e.disabled;return!1!==t()&&!a},n.handleTogglerClick=function(e){n.shouldShowMenu()?(n.loadQrcodeImage(),n.onShare(e)):e.preventDefault()},n.open=function(e){n.shouldShowMenu()&&(n.loadQrcodeImage(),n.menu.popover.open(),n.onShare(e))},n.onShare=function(){var e=n.props,t=e.id,a=e.type,o=e.getShareText,r=e.zaShareId;"live"!==a&&"club"!==a&&o(t,a),T.a.trackEvent(n.togglerRef.current,Object.assign({action:"Share",element:"Button",is_intent:!0,element_name:M.Y[a]},r&&{id:r}))},n.copyLink=function(){var e=n.props,t=e.type,a=e.title,o=e.authorName,r=e.href,i=e.showNotification,c=E.b[t]||"",s=a?"".concat(a," - "):"",l=o&&"匿名用户"!==o&&c?"".concat(o,"的").concat(c," - "):"",u=r?Object(I.toAbsoluteUrl)(r):n.url();v()("".concat(s).concat(l,"知乎\n").concat(R(u))),i("链接复制成功！")},n.url=function(){var e=n.props,t=e.id,a=e.type;return R(Object(I.toAbsoluteUrl)(n.props.url))||"".concat(location.origin,"/").concat(a,"/").concat(t)},n.loadQrcodeImage=function(){var e=n.state.qrCodeUrl;if(!e){var t="".concat(location.protocol,"//www.zhihu.com/"),a=n.url();e="".concat(t,"qrcode?").concat(_({url:"".concat(a).concat("#showWechatShareTip")})),n.setState({qrCodeUrl:e,url:a})}},n.shareToWeibo=function(){var e={appKey:"3063806388"},t=n.props.shareText;t&&(e.title=t);var a="http://service.weibo.com/share/share.php?".concat(_(e));window.open(a,"_blank","width=615,height=505")||(location.href=a)},n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"componentDidUpdate",value:function(e){this.props.positionStatus!==e.positionStatus&&this.menu.popover.close()}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.togglerClassName,o=t.positionStatus,r=t.toggler,i=t.type,c=t.disabled,l=this.state.qrCodeUrl,u=Object(s.e)("div",{className:b()("ShareMenu-toggler",a)},l&&Object(s.e)("img",{className:"ShareMenu-fakeQRCode",src:l,alt:"微信二维码"}),Object(d.cloneElement)(r,{onMouseEnter:this.loadQrcodeImage,disabled:c,ref:this.togglerRef}));return Object(s.e)(p.a.Fragment,null,Object(s.e)(L.c,{keyMap:{SHARE:"f x"},handlers:{SHARE:this.open}}),Object(s.e)(S.c,{className:b()("ShareMenu",n),positionStatus:o,ref:function(t){e.menu=t},toggler:u,onClick:this.handleTogglerClick},Object(s.e)(S.b,{className:"ShareMenu-button",onClick:this.copyLink},Object(s.e)(j.a,{size:20,className:"ShareMenu-Icon--normal",color:"#9FADC7"}),"复制链接"),"live"===i||Object(s.e)(S.b,{className:"ShareMenu-button",onClick:this.shareToWeibo},Object(s.e)(y.a,{size:17,className:"ShareMenu-Icon--small"}),"新浪微博"),Object(s.e)(S.b,{tag:"div",className:"ShareMenu-wechat",noActive:!0},Object(s.e)(x.d,{className:"ShareMenu-button",preset:"plain"},Object(s.e)(C.a,{size:17,className:"ShareMenu-Icon--small",color:"#60C84D"}),"微信扫一扫"),Object(s.e)("img",{className:"ShareMenu-qrCode",src:l,alt:"微信二维码"}))))}}]),t}(d.Component);z.propTypes={toggler:u.a.node,onTogglerClick:u.a.func,zaShareId:u.a.number},z.defaultProps={toggler:Object(s.e)(x.d,{preset:"plain",icon:N,label:"分享"}),onTogglerClick:O.a};t.a=Object(h.connect)(function(e,t){var n=t.id,a=t.type;return{shareText:e.shareTexts["".concat(a).concat(n)]||t.shareText}},{showNotification:A.h,getShareText:P.b})(z)},904:function(e,t,n){"use strict";var a=n(6),o=n(10),r=n(9),i=n(7),c=n(8),s=n(0),l=n(3),u=n.n(l),d=n(1),p=n.n(d),h=n(1578),f=n(23),b=n(20),m=n(163),v=n(199),g=(n(1163),function(e){function t(){var e,n;Object(a.a)(this,t);for(var o=arguments.length,c=new Array(o),s=0;s<o;s++)c[s]=arguments[s];return(n=Object(r.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).buttonRef=p.a.createRef(),n.handleClick=function(e){var t=n.props,a=t.zaInfos,o=a.toggleComment,r=a.getCommentAction,i=t.positionStatus,c=t.onClick,s=t.commentsShown;if(b.a.trackEvent(n.buttonRef.current,Object.assign({action:r?r(!s):"Comment",element:"Button",is_intent:!0},o&&{id:o})),c){var l="fixed"===i?"fixed":"bottom",u={commentsShown:!n.props.commentsShown,commentsAutoFocus:!(e instanceof KeyboardEvent),commentPattern:l};e instanceof KeyboardEvent&&"bottom"===l&&n.buttonRef.current.focus(),c(e,u)}},n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.onInstance(this)}},{key:"componentWillUnmount",value:function(){this.props.onInstance(null)}},{key:"render",value:function(){var e,t=this.props,n=t.className,a=t.count,o=t.commentsShown,r=t.commentClosed;o?e="收起评论":e=a&&!r?"".concat(Object(m.formatNumber)(a)," 条评论"):"添加评论";return Object(s.e)(p.a.Fragment,null,Object(s.e)(v.c,{keyMap:{COMMENT:"c"},handlers:{COMMENT:this.handleClick}}),Object(s.e)(f.d,{onRef:this.buttonRef,preset:"plain",className:n,onClick:this.handleClick,icon:h.a,label:e}))}}]),t}(d.Component));g.propTypes={commentsShown:u.a.bool,count:u.a.number,zaInfos:u.a.shape({id:u.a.number,getCommentAction:u.a.func}),onInstance:u.a.func},g.defaultProps={zaInfos:{},onInstance:function(){return null}},t.a=g},909:function(e,t,n){"use strict";var a=n(6),o=n(10),r=n(9),i=n(7),c=n(37),s=n(8),l=n(3),u=n.n(l),d=n(1),p=n(910),h=n.n(p),f=n(0),b=function(e){function t(){var e;return Object(a.a)(this,t),(e=Object(r.a)(this,Object(i.a)(t).call(this))).handleMouseWheel=e.handleMouseWheel.bind(Object(c.default)(e)),e.manualScroll=h()(e.manualScroll,50),e}return Object(s.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){this.props.stopPropagation&&(this.scroller.addEventListener("mousewheel",this.handleMouseWheel),this.scroller.addEventListener("DOMMouseScroll",this.handleMouseWheel))}},{key:"handleMouseWheel",value:function(e){var t;"mousewheel"===e.type?t=-e.wheelDelta:"DOMMouseScroll"===e.type&&(t=40*e.detail),t&&(e.preventDefault(),this.manualScroll(t))}},{key:"manualScroll",value:function(e){this.scroller&&(this.scroller.scrollTop=e+this.scroller.scrollTop)}},{key:"render",value:function(){var e=this,t=this.props,n=t.className,a=t.children,o=t.onRef;return Object(f.e)("div",{ref:function(t){e.scroller=t,o&&o(t)},className:n},a)}}]),t}(d.Component);b.propTypes={stopPropagation:u.a.bool,onRef:u.a.func},t.a=b},910:function(e,t){e.exports=function(e,t){var n,a,o,r,i=0;return function(){n=this,a=arguments;var e=new Date-i;return r||(e>=t?c():r=setTimeout(c,t-e)),o};function c(){r=0,i=+new Date,o=e.apply(n,a),n=null,a=null}}},911:function(e,t,n){},913:function(e,t,n){},914:function(e,t,n){"use strict";n.d(t,"a",function(){return b});var a=n(16),o=n(24),r=n(6),i=n(10),c=n(9),s=n(7),l=n(8),u=n(0),d=n(1),p=n(929),h=n(199),f=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={ref:null},n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props,n=t.tabIndex,r=t.children,i=Object(o.a)(t,["tabIndex","children"]),c=this.state.ref;return Object(u.e)(p.a,Object(a.default)({tabIndex:n,onRef:function(t){return!e.state.ref&&e.setState({ref:t})}},i),Object(u.e)(h.d.Provider,{value:c},r))}}]),t}(d.Component);f.defaultProps={tabIndex:0};var b=f},915:function(e,t,n){"use strict";var a=n(29),o=n.n(a),r=(n(1),n(0));t.a=function(e){return Object(r.e)("svg",o()({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 10 12",fill:"currentColor"},e),Object(r.e)("path",{d:"M5,0 C7.7615,0 10,2.074 10,4.632 C10,8 8.681,9.6805 6.043,11.657 C5.463,12.0915 4.6455,12.1135 4.041,11.722 L3.952,11.66 L3.766,11.5195 C1.2555,9.5815 0,8 0,4.632 C0,2.074 2.2385,0 5,0 Z M5,1.5 C3.0425,1.5 1.5,2.929 1.5,4.632 C1.5,7.1075 2.159,8.3245 4.368,10.0855 L4.672,10.3235 L4.8565,10.463 C4.926,10.508 5.033,10.5115 5.109,10.4765 L5.144,10.4565 C7.708,8.535 8.5,7.2275 8.5,4.631 C8.5,2.9295 6.9575,1.5 5,1.5 Z M5,3 C5.82842712,3 6.5,3.67157288 6.5,4.5 C6.5,5.32842712 5.82842712,6 5,6 C4.17157288,6 3.5,5.32842712 3.5,4.5 C3.5,3.67157288 4.17157288,3 5,3 Z"}))}},916:function(e,t,n){"use strict";n.d(t,"b",function(){return D}),n.d(t,"a",function(){return V});var a=n(26),o=n(1),r=n.n(o),i=n(11),c=n(862),s=n(62),l=n.n(s),u=n(1160),d=n(857),p=n(222),h=n(20),f=n(299),b=n.n(f),m=n(13),v=n.n(m),g=n(880),O=n(29),j=n.n(O),y=n(32),C=n.n(y),k=n(939),w=n(61),N=(n(985),n(0));var S=function(e){var t=e.className,n=e.url,a=e.source,o=C()(e,["className","url","source"]),r="苏宁"===a?"拼购":"",i="目前".concat(a,"暂不支持在电脑端购买").concat(r,"商品");return Object(N.e)(w.b,j()({className:v()("MCNQRCodeModal",t)},o),Object(N.e)("div",{className:"MCNQRCodeModal-title"},"用知乎 App 扫码查看"),Object(N.e)("div",{className:"MCNQRCodeModal-tip"},i),Object(N.e)("div",{className:"MCNQRCodeModal-qrcode"},Object(N.e)(k.a,null),Object(N.e)("img",{src:"https://www.zhihu.com/qrcode?url=".concat(encodeURIComponent(n))})))},x=n(124),T=n(165),I=n(915);var E={hotel:"酒店",ticket:"门票"},L=Object.keys(E);var P={name:"1rguia",styles:"display:flex;padding:14px;"},A={name:"1c8iba8",styles:"flex:1;margin-left:12px;overflow:hidden;"},M={name:"gg4vpm",styles:"display:flex;justify-content:space-between;"},R={name:"zjqrkl",styles:"font-size:12px;line-height:1;vertical-align:1px;"},_={name:"1q27zj9",styles:"flex:1;overflow:hidden;text-overflow:ellipsis;white-space:nowrap;"};function z(e){var t,n,a,o=e.onRef,r=e.data,i=e.titleRightArea,c=r.imgToken,s=r.title,l=r.priceText,u=r.areaName,p=Object(T.e)();return Object(N.e)("div",{css:P,ref:o},Object(N.e)("img",{src:c,css:Object(x.a)([{width:75,height:100,borderRadius:6,flexShrink:0,objectFit:"cover"},p],"","")}),Object(N.e)("div",{css:A},Object(N.e)("div",{css:M},Object(N.e)("div",{css:function(e){return Object.assign({color:e.colors.GBK02A,fontSize:15,fontWeight:e.fontWeights.bold,lineHeight:1.2,height:36},Object(T.d)(2))}},s),i),Object(N.e)("div",{css:function(e){return{color:e.colors.GBK05A,fontSize:12,marginTop:4,fontWeight:e.fontWeights.bold,height:16,lineHeight:"16px"}}},(n=(t=r).source,a=t.productTypeName,[n,E[a]].filter(Boolean).join(" · "))),Object(N.e)("div",{css:function(e){return{display:"flex",alignItems:"center",color:e.colors.GRD08A,marginTop:8,height:18,lineHeight:"18px"}}},Object(N.e)("div",{css:function(e){return{fontSize:15,fontWeight:e.fontWeights.bold}}},l," ",Object(N.e)("span",{css:R},"起")),Object(N.e)("div",{role:"button",css:function(e){return{marginLeft:"auto",cursor:"pointer",fontSize:13,fontWeight:e.fontWeights.bold}}},"去购买 ",Object(N.e)(d.a,{size:16,center:!0}))),Object(N.e)("div",{css:function(e){return{display:"flex",alignItems:"center",marginTop:2,height:18,lineHeight:1,fontSize:12,color:e.colors.GBK06A,fontWeight:e.fontWeights.bold,overflow:"hidden",transform:"scale(0.92)",transformOrigin:"left"}}},Object(N.e)(I.a,{width:"12",height:"12",css:Object(x.a)({flexShrink:0,marginTop:-1,marginRight:2},"","")}),Object(N.e)("span",{css:_},u))))}var B=Object(o.forwardRef)(function(e,t){return Object(N.e)(z,j()({onRef:t},e))}),D=(n(986),{CONTENT:0,MENTION_IN_CONTENT:1,SHOWCASE:2,LIVING_THEATER:3}),V={EDITOR:"editor",CONTENT:"content"},F={NORMAL:0,INVALID:1};function H(e){var t=e.source,n=e.producer,a=e.price,o=e.zhihuVipText,r=e.isInvalidCard;if(null===a)return null;var i="¥ ".concat(function(e){var t=(arguments.length>1&&void 0!==arguments[1]?arguments[1]:{}).trimZero,n=void 0!==t&&t,a=String(e).padStart(2,"0").slice(-2);return n&&"00"===a?"".concat(Math.floor(e/100)):"".concat(Math.floor(e/100),".").concat(a)}(a)).concat("网络文学"===n?"/千字":"");return o?Object(N.e)("div",{className:"MCNLinkCard-VIPPrice"},Object(N.e)("span",{className:"MCNLinkCard-VIPPriceHint"},o),Object(N.e)("span",{className:"MCNLinkCard-originalPrice"},i)):Object(N.e)("div",{className:v()("MCNLinkCard-price",{"MCNLinkCard-price--invalid":r})},"拼多多"===t&&Object(N.e)("span",{className:"MCNLinkCard-pricePrefix"},"拼团价"),Object(N.e)("span",null,i))}t.c=r.a.forwardRef(function(e,t){var n=Object(o.useState)(null),s=Object(a.a)(n,2),f=s[0],m=s[1],O=Object(o.useState)(!1),j=Object(a.a)(O,2),y=j[0],C=j[1],k=e.component,w=void 0===k?"a":k,x=e.id,T=e.scenes,I=void 0===T?D.CONTENT:T,E=e.className,P=e.onClick,A=e.onMouseDown,M=e.refetchKey,R=e.onData,_=void 0===R?b.a:R,z=e.processResponse,U=e.getUrl,q=e.buttonText,W=e.fetcher,K=void 0===W?g.a:W,G=e.fetcherOptions,Q=e.cardShowHandler,Z=e.disableZa,J=e.titleRightArea,Y=e.position,X=void 0===Y?V.CONTENT:Y,$=e.zaBlock,ee=Object(o.useRef)(null);if(Object(o.useEffect)(function(){if(null!==M){var e=U?U(x):"https://www.zhihu.com/api/v4/mcn/linkcard/".concat(x,"?scenes=").concat(I);K(e,G).then(function(e){var t=z?z(e):Object(i.camelizeKeys)(e.data);m(t),_(t)}).catch(function(){})}},[x,I,m,_,M,U,z,K,G]),Object(o.useEffect)(function(){ee.current&&!Z&&Object(c.onViewedOnce)(ee.current.parentNode,function(){h.a.trackCardShow(ee.current.parentNode,{id:6108},{button:{text:ee.current.parentNode.dataset.zaExtraButtonText}})})},[Q,f,Z]),!f)return Object(N.e)(w,{ref:t,className:v()("MCNLinkCard","MCNLinkCard-placeholder",E),"data-draft-node":"block","data-draft-type":"mcn-link-card"});var te,ne=f.url,ae=f.title,oe=f.imgUrl,re=f.price,ie=f.source,ce=f.productTypeName,se=f.goodsType,le=f.producer,ue=f.authorText,de=f.zhihuButtonText,pe=f.zhihuVipText,he=f.appSchemaAndroid,fe=f.appSchemaIos,be=f.subtitle,me=f.status,ve=null,ge="square",Oe=q||"去购买",je=!0,ye=!1;X===V.EDITOR&&me===F.INVALID&&(ye=!0),"知乎"===ie&&(ve=le,ge="rectangle",Oe=de||"去查看",te=ue);var Ce=ie;te&&(Ce=te),"有赞"===ie&&"store"===ce&&(je=!1,Oe="去浏览");var ke=["天猫","京东自营"].includes(Ce)?"1":void 0,we=L.includes(ce)?Object(N.e)(B,{data:f,ref:ee,titleRightArea:J}):Object(N.e)("div",{className:"MCNLinkCard-card",ref:ee},Object(N.e)("div",{className:"MCNLinkCard-cardContainer"},Object(N.e)("div",{className:v()("MCNLinkCard-imageContainer","MCNLinkCard-imageContainer--".concat(ge),{"MCNLinkCard-imageContainer--invalid":ye})},Object(N.e)("img",{className:"MCNLinkCard-image",src:oe,alt:""}),ve&&Object(N.e)("div",{className:"MCNLinkCard-tagInImage"},ve)),Object(N.e)("div",{className:"MCNLinkCard-info"},Object(N.e)("div",{className:"MCNLinkCard-titleContainer"},Object(N.e)("div",{className:v()("MCNLinkCard-title",{"MCNLinkCard-title--invalid":ye})},ae),J),Object(N.e)("div",{className:v()("MCNLinkCard-source",{"MCNLinkCard-source--invalid":ye})},be||Ce),Object(N.e)("div",{className:"MCNLinkCard-tool"},Object(N.e)("div",{className:"MCNLinkCard-toolLeft"},je&&Object(N.e)(H,{source:ie,producer:le,price:re,zhihuVipText:pe,isInvalidCard:ye})),ye?Object(N.e)("div",{className:"MCNLinkCard-invalidButton",role:"button"},Object(N.e)(u.a,{size:17,center:!0}),Object(N.e)("span",null,"已失效")):Object(N.e)("div",{className:"MCNLinkCard-button",role:"button"},Oe,Object(N.e)(d.a,{size:17,center:!0}))))));return Object(N.e)(r.a.Fragment,null,y&&Object(N.e)(S,{url:ne,source:ie,onClose:function(){return C(!1)}}),Object(N.e)(p.c,{shouldTrackShow:!0,shouldTrackClick:!0,extra:{link:{url:ne}},zaAction:"OpenUrl",zaBlock:$||"ZTextMCNLinkCard",zaType:"Button",zaEventType:"Click",as:w,ref:t,className:v()("MCNLinkCard",E),"data-draft-node":"block","data-draft-type":"mcn-link-card","data-mcn-id":f.id,"data-mcn-skuid":f.skuid,"data-mcn-source":f.source,"data-mcn-goods-type":f.goodsType,"data-mcn-app-schema-android":he,"data-mcn-app-schema-ios":fe,"data-za-detail-view-name":f.id,"data-za-extra-button-text":ke,"data-za-not-track-link":!0,href:ne,target:"_blank",rel:"noopener noreferrer",onClick:function(e){if(!Z&&h.a.trackEvent(e.currentTarget,{id:6208,action:"Click"},{button:{text:e.currentTarget.dataset.zaExtraButtonText}}),P&&P(e),!e.defaultPrevented){var t=l()(navigator.userAgent),n=t.Tablet,a=t.Mobile;"拼多多"!==ie||n||a||(e.preventDefault(),C(!0)),"苏宁"!==ie||"苏宁拼购"!==se||n||a||(e.preventDefault(),C(!0))}},onMouseDown:A},we))})},917:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=a(n(300));t.isViewed=function(e){if(!document.body||!document.body.contains(e))return!1;var t=e.getBoundingClientRect(),n=document.documentElement;return t.bottom<(window.innerHeight||n.clientHeight)};var r=function(){};t.onViewedOnce=function(e,n,a){if(t.isViewed(e))return n.call(a,e),r;var i=o.default(function(){t.isViewed(e)&&(n.call(a,e),c())},250);function c(){window.removeEventListener("scroll",i),window.removeEventListener("resize",i)}return window.addEventListener("scroll",i),window.addEventListener("resize",i),c}},918:function(e,t,n){"use strict";var a=this&&this.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(t,"__esModule",{value:!0});var o=a(n(300)),r=a(n(299));t.isFullyViewed=function(e,t){var n=e.getBoundingClientRect(),a=n.right,o=n.bottom,r=t.getBoundingClientRect(),i=r.right;return o<=r.bottom&&a<=i},t.onFullyViewedOnce=function(e,n,a,i){if(t.isFullyViewed(e,n))return a.call(i,e),r.default;var c=o.default(function(){t.isFullyViewed(e,n)&&(a.call(i,e),s())},250);n.addEventListener("scroll",c),n.addEventListener("resize",c);var s=function(){n.removeEventListener("scroll",c),n.removeEventListener("resize",c)};return s}},919:function(e,t,n){"use strict";var a=n(1),o=n(0);function r(e){var t=e.className,n=e.children,r=e.onEvent,i=Object(a.useCallback)(function(e){r(e)||e.stopPropagation()},[r]);return Object(o.e)("div",{className:t,onBeforeInput:i,onBlur:i,onCompositionEnd:i,onCompositionStart:i,onCopy:i,onCut:i,onDragEnd:i,onDragEnter:i,onDragLeave:i,onDragOver:i,onDragStart:i,onDrop:i,onFocus:i,onInput:i,onKeyDown:i,onKeyPress:i,onKeyUp:i,onMouseUp:i,onPaste:i,onSelect:i,onClick:i},n)}r.defaultProps={onEvent:function(){return!1}},t.a=r},920:function(e,t,n){var a=n(999),o=n(299),r=a?function(e){return a.get(e)}:o;e.exports=r},921:function(e,t,n){var a=n(1e3),o=Object.prototype.hasOwnProperty;e.exports=function(e){for(var t=e.name+"",n=a[t],r=o.call(a,t)?n.length:0;r--;){var i=n[r],c=i.func;if(null==c||c==e)return i.name}return t}},922:function(e,t,n){"use strict";n.d(t,"a",function(){return f});var a=n(6),o=n(10),r=n(9),i=n(7),c=n(8),s=n(3),l=n.n(s),u=n(1),d=n(360),p=n(0),h=function(e){function t(){var e,n;Object(a.a)(this,t);for(var o=arguments.length,c=new Array(o),s=0;s<o;s++)c[s]=arguments[s];return(n=Object(r.a)(this,(e=Object(i.a)(t)).call.apply(e,[this].concat(c)))).state={shown:!1},n.handleObserve=function(e){(e[0].isIntersecting||e[0].intersectionRatio>0)&&n.setState({shown:!0})},n}return Object(c.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.placeholder,n=e.rootMargin,a=e.children;return this.state.shown?a:Object(p.e)(d.a,{rootMargin:n,onObserve:this.handleObserve,threshold:[0,.1]},t||Object(p.e)("div",{style:{height:"1px"}}))}}]),t}(u.Component);h.propTypes={placeholder:l.a.element,rootMargin:l.a.string},h.defaultProps={rootMargin:"200px"};var f=h},923:function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return u});var a=n(11),o=n(932),r=n(22),i=n(5),c=Object(i.a)("report",["ADD"]),s=function(e){var t=e.message,n=e.code;return[103006,103007].includes(n)?t||o.a.failure:[103003,103001].includes(e.code)?o.a.duplicate:o.a.failure},l=o.a.success;function u(e,t,n,o){var i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:"web",u=arguments.length>5&&void 0!==arguments[5]?arguments[5]:{};return{API:{types:c.ADD,endpoint:"reports",method:"POST",body:Object(a.decamelizeKeys)({resourceId:e,type:t,reasonType:n,customReason:o,source:i})},NOTIFICATION:void 0===u.NOTIFICATION?{key:"comment"===t?r.b:r.d,success:l,failure:s}:u.NOTIFICATION}}},927:function(e,t,n){"use strict";n.d(t,"a",function(){return ve});var a=n(24),o=n(16),r=n(6),i=n(10),c=n(9),s=n(7),l=n(8),u=n(0),d=n(3),p=n.n(d),h=n(1),f=n.n(h),b=n(21),m=n(13),v=n.n(m),g=n(23),O=n(882),j=n(1391),y=n(896),C=n(224),k=n(1117),w=n(1034),N=n(360),S=n(862),x=n(1092),T=n(198),I=n(20),E=n(199),L=n(63),P=n.n(L),A=n(114),M=n(850),R=(n(1249),function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.visible,n=e.top,a=e.onSelect,o=e.content,r=this.hintInfo,i=r&&"danger"===r.type;return Object(u.e)("div",{className:v()("SharePopover",{"SharePopover--show":t}),style:{top:n},disabled:i},Object(u.e)("span",{className:"SharePopover-arrow"}),Object(u.e)("div",{className:v()("SharePopover-content",{"SharePopover-content--danger":i}),onClick:function(){i||a(o)}},Object(u.e)(M.a,{className:"SharePopover-quote",size:24}),Object(u.e)("span",{className:"SharePopover-main"},"发送到百科下的摘录"),r&&Object(u.e)("span",{className:"SharePopover-hint"},r.text)))}},{key:"hintInfo",get:function(){var e=this.props,t=e.content;if(!e.isCopyable)return{type:"danger",text:"该内容限制转载"};var n=t.length;return n<100?{type:"danger",text:"最少摘录 100 字"}:n>450&&n<=500?{type:"warning",text:"还可以摘录 ".concat(500-n," 字")}:n>500&&{type:"danger",text:"已经超出 ".concat(n-500," 字")}}}]),t}(h.Component));R.propTypes={content:p.a.string,top:p.a.number,visible:p.a.bool};var _=R,z=n(26),B=n(164),D=n(1169),V=n(381),F=(n(1251),function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={topics:[],actived:!1},n.handleChange=function(e){(0,n.props.onChange)(e),n.setState(function(t){return Object.assign({},t,{actived:!1,topics:e})})},n.deactived=function(){n.setState({actived:!1})},n.toggleActived=function(){n.setState(function(e){return Object.assign({},e,{actived:!e.actived})})},n.focus=function(){return n.topicsInput&&n.topicsInput.focus()},n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.state,n=t.topics,a=t.actived;return Object(u.e)("div",{className:"TopicSelect"},Object(u.e)(V.a,{actived:a,placeholderNote:" ",max:1,inputProps:{className:"".concat("TopicSelect","-topicInput")},onRef:function(t){e.topicsInput=t},value:n,onChange:this.handleChange,onBlur:this.handleBlur,onToggleActived:this.toggleActived}))}}]),t}(h.Component)),H=(n(1252),function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={topics:[]},n.handleChangeTopics=function(e){n.setState(function(t){return Object.assign({},t,{topics:e})})},n.handleSubmit=function(){var e=Object(z.a)(n.state.topics,1)[0].urlToken;(0,n.props.onSubmit)(e)},n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.type,n=e.author,a=e.currentUser,o=e.title,r=e.url,i=e.onClose,c=e.content,s=e.visible;return Object(u.e)(B.b,{onClose:i,size:"large",title:"发送摘录到百科",className:"AbstractForm"},s&&Object(u.e)(h.Fragment,null,Object(u.e)(D.a,{type:t,author:n,member:a,title:o,url:r,content:c,theme:"scroll"}),Object(u.e)(F,{onChange:this.handleChangeTopics}),Object(u.e)("div",{className:"AbstractForm-footer"},Object(u.e)(g.d,{preset:"primary",color:"blue",disabled:this.disabled,onClick:this.handleSubmit},"确定"))))}},{key:"disabled",get:function(){var e=this.state.topics,t=this.props.content;return 0===e.length||""===t}}]),t}(h.Component));H.propTypes={type:p.a.string.isRequired,author:p.a.object,currentUser:p.a.object,title:p.a.string.isRequired,content:p.a.string.isRequired,url:p.a.string.isRequired,visible:p.a.bool.isRequired,onClose:p.a.func.isRequired,onSubmit:p.a.func.isRequired};var U,q,W,K,G=n(138),Q=n(1170),Z=n(230),J=Object(Z.b)()(U=Object(b.connect)(null,{createAbstract:G.d})((W=q=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state={popoverVisible:!1,top:0,content:"",abstractModalVisible:!1},n.handlePopoverShow=function(e,t){if(!n.hasAddBaikeSummaryPermission)return null;I.a.trackCardShow(null,{id:6115}),n.setState(function(n){return Object.assign({},n,{top:t,content:e,popoverVisible:!0})})},n.handlePopoverClose=function(){if(!n.hasAddBaikeSummaryPermission)return null;n.setState(function(e){return Object.assign({},e,{popoverVisible:!1})})},n.handleAbstractModalClose=function(){n.setState(function(e){return Object.assign({},e,{abstractModalVisible:!1})})},n.handleAbstractSelected=function(e){I.a.trackEvent(null,{id:6116,action:"Send"}),n.setState(function(t){return Object.assign({},t,{content:e,popoverVisible:!1,abstractModalVisible:!0})})},n.handleCreateAbstract=function(e){var t=n.props,a=t.type,o=t.objectId,r=t.createAbstract,i=n.state.content;I.a.trackEvent(null,{id:6117,action:"Submit"}),r({type:a,token:o,topicId:e,content:i}).then(function(){n.setState(function(e){return Object.assign({},e,{content:i,popoverVisible:!1,abstractModalVisible:!1})})})},n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e,t,n,a;t=this.richContainer,n=this.handlePopoverShow,a=this.handlePopoverClose,t.onmouseup=(e=Object(A.a)(P.a.mark(function e(o){var r,i;return P.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,new Promise(function(e){setTimeout(function(){var t="";t=document.selection?document.selection.createRange().text:document.getSelection(),e(t.toString())},0)});case 2:(r=e.sent)?(i=o.target===t?o.offsetY:o.offsetY+o.target.offsetTop+30,n(r,i)):a();case 4:case"end":return e.stop()}},e)})),function(t){return e.apply(this,arguments)})}},{key:"render",value:function(){var e=this.state,t=e.popoverVisible,n=e.top,a=e.content,o=e.abstractModalVisible,r=this.props,i=r.type,c=r.author,s=r.currentUser,l=r.title,d=r.url,p=r.isCopyable;return this.hasAddBaikeSummaryPermission?Object(u.e)(h.Fragment,null,Object(u.e)(_,{top:n,visible:t,content:a,isCopyable:this.isAuthor||p,onBlur:this.handlePopoverClose,onSelect:this.handleAbstractSelected}),Object(u.e)(H,{type:i,onSubmit:this.handleCreateAbstract,author:c,visible:o,onClose:this.handleAbstractModalClose,currentUser:s,title:l,url:d,content:a})):null}},{key:"isAuthor",get:function(){var e=this.props,t=e.currentUser,n=e.author;return Object(Q.a)(t,n)}},{key:"hasAddBaikeSummaryPermission",get:function(){var e=this.props.currentUser;return e&&e.hasAddBaikeSummaryPermission}},{key:"richContainer",get:function(){var e=this.props,t=e.type,n=e.objectId;return"article"===t?document.querySelector(".Post-RichText"):document.querySelector(".AnswerItem[name='".concat(n,"'] .RichContent-inner"))}}]),t}(h.Component),q.propTypes={type:p.a.string.isRequired,author:p.a.object.isRequired,currentUser:p.a.object,title:p.a.string.isRequired,url:p.a.string.isRequired,objectId:p.a.number.isRequired,isCopyable:p.a.bool},q.defaultProps={isCopyable:!0},U=W))||U)||U,Y=n(873),X=n(37),$=n(406),ee=n(27),te=n(948),ne=(n(1253),Object(b.connect)(function(e,t){return{isCurrentUser:Object(ee.j)(e,t.data.author)}})(K=function(e){function t(){var e;return Object(r.a)(this,t),(e=Object(c.a)(this,Object(s.a)(t).call(this))).state={tipShown:!1,tipContent:"",tipX:0,tipY:0,tipPosition:"bottom"},e.handleMouseDown=e.handleMouseDown.bind(Object(X.default)(e)),e.handleCopy=e.handleCopy.bind(Object(X.default)(e)),e.handleTipClose=e.handleTipClose.bind(Object(X.default)(e)),e.rightClickX=-1,e.rightClickY=-1,e}return Object(l.a)(t,e),Object(i.a)(t,[{key:"getRange",value:function(e){if(e&&e.rangeCount>0)return e.getRangeAt(0)}},{key:"getExtraCopyright",value:function(e,t,n){var a=["作者：".concat(t),"链接：".concat(e),"来源：知乎","著作权归作者所有。商业转载请联系作者获得授权，非商业转载请注明出处。"],o=["",""];return a=n?a.concat(o):o.concat(a)}},{key:"getCopyText",value:function(e,t,n,a){var o=this.getExtraCopyright(t,n,a).join("\n");return a?o+e:e+o}},{key:"getRangeHtml",value:function(e){var t=document.createElement("div");return t.appendChild(e.cloneContents()),t.outerHTML}},{key:"getCopyHtml",value:function(e,t,n,a){var o=this.getExtraCopyright(t,n,a).join("<br />");return"<div>".concat(a?o+e:e+o,"</div>")}},{key:"randomRange",value:function(e,t){return Math.floor(Math.random()*(t-e)+e)}},{key:"addCopyright",value:function(e,t,n){if(window.getSelection){var a=window.getSelection(),o=this.getRange(a),r=o.toString().trim(),i=this.getRangeHtml(o);if(r&&!(r.length<128)){var c=r.length>=512,s=this.getCopyHtml(i,t,n,c),l=this.getCopyText(r,t,n,c),u=e.nativeEvent.clipboardData;if("object"==typeof u){if(u.setData("text/html",'<meta charset="utf-8">'+s),u.setData("text/plain",l),u.getData("text/plain")&&u.getData("text/plain").length>0)return void e.preventDefault()}var d=document.createElement("div");d.innerHTML=s;var p=d.firstChild;p.style.position="fixed",p.style.left="-9999px",document.body.appendChild(p),a.selectAllChildren(p),setTimeout(function(){document.body.removeChild(p),a.removeAllRanges(),a.addRange(o)},200)}}}},{key:"showTip",value:function(e,t){if(window.getSelection){var n=window.getSelection(),a=this.getRange(n),o=a.toString().trim(),r=this.randomRange(44,66);if(!(o.length<=r)){e.preventDefault(),e.stopPropagation();var i,c=a.getBoundingClientRect(),s=window.pageYOffset,l=this.rightClickX,u=this.rightClickY,d="bottom";if(-1!==u)i=u+3;else{var p=this.props.viewPort,h=c.top+s,f=c.bottom+s,b=s+p.top+52,m=s+p.bottom-52;f<b?i=b-52:f<m?i=f:(d="top",i=h>b&&h<m?h:m+52)}var v=-1!==l?l+3:c.left+(c.right-c.left)/2-12;this.setState({tipShown:!0,tipContent:t,tipX:v,tipY:i,tipPosition:d}),this.rightClickX=-1,this.rightClickY=-1}}}},{key:"handleTipClose",value:function(){this.setState({tipShown:!1})}},{key:"handleCopy",value:function(e){var t=this.props,n=t.data,a=n.author,o=n.type,r=n.id,i=n.question,c=n.reshipmentSettings,s=n.relationship,l=(s=void 0===s?{}:s).isAuthor,d=s.isAuthorized,p=t.isCurrentUser,h="";if("article"===o?h="https://zhuanlan.zhihu.com/p/".concat(r):"answer"===o&&(h="https://www.zhihu.com/question/".concat(i.id,"/answer/").concat(r)),!p&&!l)switch(c){case"disallowed":this.showTip(e,Object(u.e)("a",{href:"https://www.zhihu.com/term/zhihu-terms#sec-licence-6"},"禁止转载"));break;case"need_payment":if(!d){this.showTip(e,Object(u.e)("a",{href:"https://www.zhihu.com/copyright/apply?answer=".concat(r)},"申请转载"));break}this.showTip(e,"已获授权，复制成功");default:this.addCopyright(e,h,a.name)}}},{key:"handleMouseDown",value:function(e){3===e.nativeEvent.which&&(this.rightClickX=e.pageX,this.rightClickY=e.pageY)}},{key:"render",value:function(){var e=this.props,t=e.onRef,n=e.data,a=e.tag,o=e.html,r=e.children,i=e.onClick,c=e.className,s=e.itemProp,l=e.style,d=e.prefix,p=e.ecommerce,h=e.shouldUseArticleCard,f=this.state,b=f.tipShown,m=f.tipContent,v=f.tipX,g=f.tipY,O=f.tipPosition;return Object(u.e)("div",{ref:t,onClick:i,className:c,style:l},d,Object(u.e)(te.default,{sourceId:n.id,sourceType:n.type,itemProp:s,tag:a,html:o,onCopy:this.handleCopy,onMouseDown:this.handleMouseDown,className:"CopyrightRichText-richText",ecommerce:p,shouldUseArticleCard:h}),r,Object(u.e)($.a,{shown:b,timeout:1e4,hideOnClick:!0,onClose:this.handleTipClose,x:v,y:g,position:O,content:m,className:"CopyrightRichText-tooltip"}))}}]),t}(h.Component))||K);ne.propTypes={onRef:p.a.func,viewPort:p.a.object};var ae=ne,oe=n(934),re=n(356),ie=n(28),ce=n(357),se=n.n(ce),le=n(167);function ue(){var e=Object(re.a)(["发布于",""]);return ue=function(){return e},e}function de(){var e=Object(re.a)(["编辑于",""]);return de=function(){return e},e}function pe(){var e=Object(re.a)(["发布于",""]);return pe=function(){return e},e}var he=function(e){function t(){return Object(r.a)(this,t),Object(c.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.props,t=e.href,n=e.created,a=e.updated,o=e.onClick;return Object(u.e)("div",{className:"ContentItem-time"},Object(u.e)(ie.Link,{to:t,target:"_blank",onClick:o},Object(u.e)("span",{"data-tooltip":se()(pe(),Object(le.toAbsoluteDateTimeString)(n))},a!==n?se()(de(),Object(le.toSmartString)(a)):se()(ue(),Object(le.toSmartString)(n)))))}}]),t}(h.Component);he.propTypes={href:p.a.string,created:p.a.number,updated:p.a.number,onClick:p.a.func};var fe,be,me,ve=he,ge=n(46),Oe=n(417),je=n(977),ye=(n(1254),/.*?(class="link-box")/),Ce=800,ke=400;var we=Object(b.connect)(function(e){return{isMobile:Object(ge.e)(e)}},{updateReadStatus:Oe.b})((me=be=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,o=new Array(a),i=0;i<a;i++)o[i]=arguments[i];return(n=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(o)))).state=Object.assign({},n.getInitTruncatedState(n.props),{shouldSticky:!1,offset:0}),n.richContentRef=f.a.createRef(),n.truncateContent=function(){var e=n.props.isMobile?ke:Ce,t=n.props.expandedHeight||e;(!n.content||n.content.scrollHeight<t)&&n.setState({isTruncated:!1,isExpanded:!1}),n.content&&n.content.scrollHeight>n.content.offsetHeight&&n.setState({contentCollapsed:!0})},n.updateStateInBrowser=function(){var e=n.props,t=e.excerpt,a=e.allowCollapseWithEmptyExcerpt,o=e.html,r=e.expanded,i=e.cover,c=e.unescapable,s=e.limit,l=e.limitWithImage,u=e.truncateHTMLOptions,d=e.truncateDisabled,p=!0,h=n.state.truncatedContent;if((t||a)&&(ye.test(t)||d))h=t;else if(!c){var f=i?l:s,b=n.truncate(o,f,u);p=b.isTruncated,h=b.content}return{isTruncated:p,isExpanded:o&&r,truncatedContent:h,previewImg:null}},n.checkOpenInAppStyle=function(e){},n.toggle=function(e){n.isCollapsed()?n.handleExpand(e):n.handleCollapse(e)},n.handleExpand=function(e){var t,a,o=n.props.zaIds.expand;(null==e?void 0:e.target)&&(((null===(a=t=e.target.textContent)||void 0===a?void 0:a.length)>10||e.target.classList.contains("RichContent-inner")||e.target.classList.contains("List-item"))&&(t=null));I.a.trackEvent(n.richContentRef.current,Object.assign({action:"Expand"},t&&{name:t},{},o&&{id:o}));var r=n.props.onExpand;if(r)r(e);else{var i=n.props,c=i.onToggleExpend,s=i.data,l=s.type,u=s.id;n.context.currentUser&&Object(je.c)("article"===l?"post":l,u,je.a);c&&c(!0),n.setState({isExpanded:!0},function(){"article"===l&&Object(S.onViewedOnce)(n.richContentRef.current,function(){I.a.trackEvent(n.richContentRef.current,{action:"ReadFinish"})})})}},n.handleCollapse=function(){var e=n.props.onToggleExpend;I.a.trackEvent(n.richContentRef.current,{action:"Collapse",element:"Button"});e&&e(!1),n.setState({isExpanded:!1},function(){return n.checkOpenInAppStyle(!1)})},n.handlePreview=function(e){var t=n.state,a=t.isExpanded,o=t.isTruncated&&!a,r=e.target;o||"IMG"!==r.tagName||!r.classList.contains("zh-lightbox-thumb")&&!r.classList.contains("Slideshow-swiperImage")||n.setState({previewImg:r})},n.handlePositionStatusChange=function(e){var t=n.props.onPositionStatusChange;t&&(t(e),n.checkOpenInAppStyle("fixed"===e))},n.handleObserve=function(e){var t=e[0].intersectionRatio;if(t||!document.querySelector("#root").style.position){var a=t>0;a!==n.state.shouldSticky&&(n.setState({shouldSticky:a}),a||n.checkOpenInAppStyle(!1))}},n.handleTrunObserve=function(e){var t=n.props,a=t.data,o=(a.type,a.id,t.updateReadStatus,e[0]),r=o.intersectionRatio,i=o.isIntersecting;n.truncateComputed||(r>0||i)&&(setTimeout(function(){return n.truncateContent()}),n.truncateComputed=!0)},n.isCollapsed=function(){var e=n.props,t=e.after,a=e.before,o=e.unescapable,r=n.state,i=r.isExpanded,c=r.isTruncated;return!a&&!t||o?c&&!i:!i},n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.setState(Object.assign({},this.updateStateInBrowser(),{viewPort:{top:148,bottom:window.innerHeight-56}})),Object(S.onViewedOnce)(this.richContentRef.current,function(){var t=e.props,n=t.data,a=n.type,o=n.id,r=t.expanded;e.context.currentUser&&r&&Object(je.c)("article"===a?"post":a,o,je.a)}),this.props.imperativeRef&&(this.props.imperativeRef.current={handleExpand:this.handleExpand.bind(this)})}},{key:"componentWillReceiveProps",value:function(e){this.props.data.id!==e.data.id&&this.setState(this.getInitTruncatedState(e))}},{key:"componentWillUpdate",value:function(e,t){if(this.state.isExpanded&&!t.isExpanded){var n=this.richContentRef.current.getBoundingClientRect();n.top<this.props.topExcludedHeight&&(this.rect=n,this.scroll=window.pageYOffset)}}},{key:"componentDidUpdate",value:function(e,t){if(t.isExpanded&&!this.state.isExpanded&&this.rect){var n=this.rect,a=n.top,o=n.bottom,r=n.height,i=this.richContentRef.current.offsetHeight,c=window.innerHeight,s=o<c?i-r:a-(c-i);window.scrollTo(0,this.scroll+s),this.rect=null,this.scroll=null}}},{key:"componentWillUnmount",value:function(){this.props.imperativeRef&&(this.props.imperativeRef.current=null)}},{key:"getInitTruncatedState",value:function(e){var t=e.excerpt,n=e.html,a=e.expanded,o=e.unescapable;return{isTruncated:t.length<=n.length,isExpanded:a,truncatedContent:o?n:t,previewImg:null}}},{key:"truncate",value:function(e,t,n){var a=Object(x.truncateHTML)(e,t,n);return{isTruncated:a.isTruncated,content:a.content}}},{key:"renderActions",value:function(){var e=this,t=this.props,n=t.children,a=t.unescapable,o=t.noCollapsed,r=t.expandText,i=void 0===r?"展开阅读全文":r,c=t.onClick,s=t.videoData,l=t.needExpandArrow,d=void 0===l||l,p=this.state,h=p.isExpanded,f=p.isTruncated,b=p.shouldSticky,m=p.offset;if(!h)return[a&&f&&!s&&Object(u.e)(g.d,{key:"expand-button",preset:"plain",className:"ContentItem-rightButton ContentItem-expandButton",onClick:c||this.handleExpand},i,d&&Object(u.e)(j.a,{className:"ContentItem-arrowIcon",center:!0})),n&&Object(u.e)(Y.a,{key:"actions"},n)];var v=(n||!o)&&Object(u.e)(Y.a,{className:"RichContent-actions"},n,!o&&Object(u.e)(g.d,{"data-zop-retract-question":!0,preset:"plain",className:"ContentItem-rightButton",onClick:this.handleCollapse},Object(u.e)("span",{className:"RichContent-collapsedText"},"收起"),Object(u.e)(j.a,{className:"ContentItem-arrowIcon is-active",center:!0})));return b&&v?Object(u.e)(C.a,{offset:m,bottom:!0,container:function(){return e.richContentRef.current.parentNode},onPositionStatusChange:this.handlePositionStatusChange},v):v}},{key:"renderText",value:function(){var e=this,t=this.props,n=t.html,a=t.excerpt,r=t.data,i=t.itemProp,c=void 0===i?"text":i,s=t.expandText,l=void 0===s?"阅读全文":s,d=t.onClick,p=t.prefix,h=t.unescapable,f=(t.isSearchContent,t.collapsedHeight),b=t.ecommerce,m=t.canAbstract,O=t.shouldUseArticleCard,C=this.state,w=C.truncatedContent,S=C.previewImg,x=C.viewPort,T=C.contentCollapsed,I=this.isCollapsed(),E=w||a,L="answer"===r.type?Object(k.a)(n):n,P=I?E:L,A={},M=Object(u.e)(ae,Object(o.default)({itemProp:c,key:I,className:v()("RichContent-inner",{"RichContent-inner--collapsed":T}),style:I&&h?{maxHeight:f}:null,tag:"span",onRef:function(t){e.content=t},data:r,html:P,viewPort:x,prefix:p},I&&{onClick:d||this.handleExpand},A,{ecommerce:b,shouldUseArticleCard:O}),m&&Object(u.e)(J,this.abstractProps),!h&&I&&Object(u.e)(g.d,{preset:"plain",className:"ContentItem-more"},l,Object(u.e)(j.a,{className:"ContentItem-arrowIcon",center:!0})),S&&Object(u.e)(y.a,{img:S,onClose:function(){return e.setState({previewImg:null})}}));return h?Object(u.e)(N.a,{rootMargin:"200px 0px 200px 0px",onObserve:this.handleTrunObserve},M):M}},{key:"render",value:function(){var e=this.props,n=e.unescapable,a=e.after,o=e.before,r=e.extra,i=e.cover,c=e.hasVideo,s=e.renderCanExpandExtra,l=e.className,d=e.videoData,p=e.handleClickVideoMoreButton,f=this.state.isExpanded,b=this.isCollapsed(),m=d?Object(u.e)(h.Fragment,null,Object(u.e)(oe.a,{data:d}),Object(u.e)("p",{className:"RichContent-videoMore",onClick:p},"点击查看全文")):this.renderText(),g=f?Object(u.e)(N.a,{rootMargin:"-".concat(240,"px 0px"),onObserve:this.handleObserve},m):m;return Object(u.e)("div",{className:v()("RichContent",l,{"is-collapsed":b,"RichContent--unescapable":n}),ref:this.richContentRef,onClick:this.handlePreview},Object(u.e)(E.c,{keyMap:{TOGGLE_EXPAND:"o"},handlers:{TOGGLE_EXPAND:this.toggle}}),!b&&o,!n&&b&&i&&Object(u.e)(t.Cover,{url:i,hasVideo:c,onClick:this.handleExpand}),g,r||"function"==typeof s&&s(f,this.handleExpand),!b&&a,this.renderActions())}},{key:"abstractProps",get:function(){var e=this.props.data;return{objectId:e.id,type:e.type,author:e.author,title:e.question.title,url:e.url,isCopyable:e.isCopyable}}}]),t}(h.Component),be.contextTypes={currentUser:p.a.object},be.propTypes={unescapable:p.a.bool,expanded:p.a.bool,noCollapsed:p.a.bool,limit:p.a.number,limitWithImage:p.a.number,collapsedHeight:p.a.number,html:p.a.string,excerpt:p.a.string,allowCollapseWithEmptyExcerpt:p.a.bool,truncateDisabled:p.a.bool,before:p.a.node,after:p.a.node,prefix:p.a.node,extra:p.a.node,renderCanExpandExtra:p.a.func,topExcludedHeight:p.a.number,onPositionStatusChange:p.a.func,type:p.a.string,data:p.a.object,canAbstract:p.a.bool,cover:p.a.string,hasVideo:p.a.bool,truncateHTMLOptions:p.a.object,expandText:p.a.string,onToggleExpend:p.a.func,videoData:p.a.object,handleClickVideoMoreButton:p.a.func,zaIds:p.a.shape({expand:p.a.number})},be.defaultProps={limit:160,limitWithImage:100,expanded:!1,unescapable:!1,topExcludedHeight:60,excerpt:"",allowCollapseWithEmptyExcerpt:!1,hasVideo:!1,data:{},collapsedHeight:400,zaIds:{}},be.Cover=function(e){var t=e.url,n=e.hasVideo,r=Object(a.a)(e,["url","hasVideo"]);return Object(u.e)("div",Object(o.default)({className:v()("RichContent-cover",{"RichContent-cover--mobile":!1})},r),Object(u.e)("div",{className:"RichContent-cover-inner"},Object(u.e)(w.a,{thumbnail:Object(T.imgUrl)(t,"60w"),url:Object(T.imgUrl)(t,"400x224"),alt:"cover"})),n&&Object(u.e)(O.a,{className:"RichContent-cover-play"}))},fe=me))||fe;t.b=we},929:function(e,t,n){"use strict";n.d(t,"b",function(){return p}),n.d(t,"a",function(){return g});var a=n(29),o=n.n(a),r=n(32),i=n.n(r),c=n(1),s=n.n(c),l=n(13),u=n.n(l),d=(n(956),n(0)),p=function(e){var t=e.className,n=e.title,a=e.options,r=e.children,c=i()(e,["className","title","options","children"]);return Object(d.e)("div",o()({className:u()("List",t)},c),(n||a)&&Object(d.e)("div",{className:"List-header"},Object(d.e)("h4",{className:"List-headerText"},n),Object(d.e)("div",{className:"List-headerOptions"},a)),r)},h=n(6),f=n(10),b=n(9),m=n(7),v=n(8),g=function(e){function t(){return Object(h.a)(this,t),Object(b.a)(this,Object(m.a)(t).apply(this,arguments))}return Object(v.a)(t,e),Object(f.a)(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.tabIndex,a=e.meta,o=e.children,r=e.onRef;return Object(d.e)("div",{className:u()("List-item",t),tabIndex:n,ref:r},a&&Object(d.e)("div",{className:"List-itemMeta"},a),o)}}]),t}(s.a.Component);n(990)},931:function(e,t,n){"use strict";var a=n(26),o=n(1),r=n(100);var i="function"==typeof Image,c={},s=i?r(function(e){return new Promise(function(t){return n=e,a=function(e,n){c[e]=n,t(n)},(o=new Image).onload=function(){var e=o.width>0&&o.height>0;a(n,e)},o.onerror=function(){a(n,!1)},void(o.src="data:image/webp;base64,"+{lossy:"UklGRiIAAABXRUJQVlA4IBYAAAAwAQCdASoBAAEADsD+JaQAA3AAAAAA",lossless:"UklGRhoAAABXRUJQVlA4TA0AAAAvAAAAEAcQERGIiP4HAA==",alpha:"UklGRkoAAABXRUJQVlA4WAoAAAAQAAAAAAAAAAAAQUxQSAwAAAARBxAR/Q9ERP8DAABWUDggGAAAABQBAJ0BKgEAAQAAAP4AAA3AAP7mtQAAAA==",animation:"UklGRlIAAABXRUJQVlA4WAoAAAASAAAAAAAAAAAAQU5JTQYAAAD/////AABBTk1GJgAAAAAAAAAAAAAAAAAAAGQAAABWUDhMDQAAAC8AAAAQBxAREYiI/gcA"}[n]);var n,a,o})}):function(){return Promise.resolve(!1)};t.a=function(e){var t=c[e],n=Object(o.useState)(t),r=Object(a.a)(n,2),l=r[0],u=r[1];return i&&void 0===t&&s(e).then(u),l}},932:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"a",function(){return o});var a={unfriendly:"其他不友善行为",untruth:"不实信息",provoke:"引战争议等非真实问题",subjective:"包含主观判断",abuse:"辱骂、人身攻击等不友善行为",spam:"垃圾广告信息",illegality:"违法违规",politics:"政治敏感",repost:"不规范转载",privacy:"泄露了我的隐私",enterprise:"企业侵权",oneself:"个人侵权",copy:"抄袭了我的内容",defamation:"诽谤我",temptation:"诱导赞同、关注等行为",intention:"骚扰我",mention:"提到我，但是我不想被讨论",personal:"寻人、征友、作业等个人任务",ambiguity:"不构成提问",worthless:"征友、裸露照片征集等非真实类问题",rumour:"缺乏可信来源",suicide:"有人意图自杀或自残",medicine:"针对具体病情的求医问药",superstition:"涉及封建迷信活动",harassment:"骚扰",imitation:"冒充我或他人",profile:"个人信息不符合规范",direction:"不符合专栏写作方向",tipjar:"滥用专栏赞赏功能",edit:"发生编辑战",porn:"色情低俗",minor:"未成年人",uncivilized_behavior:"驾驶/吸烟/纹身"};var o={success:"你的举报我们已经收到，处理结果会通过站务通知进行告知。",duplicate:"你已经举报过啦。管理员正在处理中，请耐心等待~",contentIllegal:"请提交正确的举报说明",contentTooLong:"举报说明不能超过 150 字",failure:"举报失败"}},933:function(e,t,n){"use strict";var a,o,r,i=n(6),c=n(10),s=n(9),l=n(7),u=n(8),d=n(0),p=n(3),h=n.n(p),f=n(1),b=n(21),m=n(862),v=n(20),g=(n(897),Object(b.connect)(function(e){return{theme:e.env.theme}})((r=o=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(l.a)(t).apply(this,arguments))}return Object(u.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){var e=this.props.zaViewName;Object(m.onViewedOnce)(this.node,function(){v.a.trackCardShow(null,{id:3613,name:e})})}},{key:"render",value:function(){var e=this,t=this.props,n=t.theme,a=t.zaViewName,o=t.vipIcon,r=o.nightModeUrl,i=o.url,c="light"===n?i:r;return Object(d.e)("a",{className:"UserLink-vipIcon",href:"https://www.zhihu.com/vip",target:"_blank",rel:"noopener noreferrer",ref:function(t){return e.node=t},"data-za-detail-view-id":3612,"data-za-detail-view-name":a},Object(d.e)("img",{src:c,alt:"zhihu vip"}))}}]),t}(f.Component),o.propTypes={vipIcon:h.a.shape({nightModeUrl:h.a.string,url:h.a.string}).isRequired,zaViewName:h.a.string},a=r))||a);t.a=g},934:function(e,t,n){"use strict";var a=n(16),o=n(6),r=n(10),i=n(9),c=n(7),s=n(37),l=n(8),u=n(0),d=n(1),p=n(21),h=n(360),f=n(882),b=n(1057),m=n(20),v=Object.freeze({DOM:{PLAY:"event/dom/play",PLAYING:"event/dom/playing",PAUSE:"event/dom/pause",ENDED:"event/dom/ended",TIMEUPDATE:"event/dom/timeupdate",ERROR:"event/dom/error",WAITING:"event/dom/waiting"},PLAYER:{QUALITY_CHANGE:"event/player/quality-change",REQUEST_PLAY:"event/player/request-play",PLAY_REJECTED:"event/player/play-rejected",REQUEST_PAUSE:"event/player/request-pause",PLAY_COUNT:"event/player/play-count",PLAY_FAILED:"event/player/play-failed",ENTER_FULLSCREEN:"event/player/enter-fullscreen",EXIT_FULLSCREEN:"event/player/exit-fullscreen",ENTER_PIP:"event/player/enter-pip",EXIT_PIP:"event/player/exit-pip"}}),g=Object.freeze({PLAYER:{PLAY:"action/player/play",PAUSE:"action/player/pause",SET_VOLUME:"action/player/set-volume",ENTER_FULLSCREEN:"action/player/enter-fullscreen",EXIT_FULLSCREEN:"action/player/exit-fullscreen",ENTER_PIP:"action/player/enter-pip",EXIT_PIP:"action/player/exit-pip"}}),O="griffith";var j,y=n(22),C=n(206),k=n(352),w=n(363),N=n.n(w),S=function(e,t){return e+(t?Date.now()-t:0)},x=function(e,t){return Math.abs(e-t)<.01},T={auto:"Auto",ld:"LD",sd:"SD",hd:"HD"},I={auto:"自动",ld:"低清",sd:"标清",hd:"超清"},E=[1,2,3,5,8,13];function L(e){var t,n="sd",a=0,o=null,r=0,i=null,c=!1,s=0,l=0;function u(t,c){e(t,Object.assign({play_event_identifier:o,duration:1e3*a,elapsed:S(r,i),video_quality:T[n]},c))}function d(){(++l<15?E.includes(l):l%15==0)&&u({action:"Playing"})}function p(){clearInterval(t)}return{handlePlayEvent:function(e){var n=e.currentTime,c=e.duration;a=c,x(n,0)&&(o=N()(),r=0),i=Date.now(),x(n,0)?u({action:"Play"}):u({action:"ResumePlay"}),l=0,p(),t=setInterval(d,1e3)},handlePauseEvent:function(e){var t=e.currentTime,n=e.duration;i&&(r+=Date.now()-i,i=null),x(t,n)?u({action:"EndPlay"}):u({action:"Pause"}),p()},handleQualityChangeEvent:function(e){var t=e.quality;u({action:"Switch",name:I[t]}),n=t},handleFragmentLoading:function(){c||(s=Date.now())},handleFragmentLoaded:function(){c||(c=!0,u({action:"Load"},{video_load_time:Date.now()-s}))},clearTick:p}}var P=Object(p.connect)(function(e,t){var n=t.data,a=n.isLens,o=n.id;return a?{data:Object.assign({},t.data,{source:"lens",playerUrl:"https://www.zhihu.com/video/".concat(o)})}:{data:e.video.data[o]||t.data}},{showNotification:y.h,loadVideo:C.c})(j=Object(k.b)(function(e){var t=e.data,n=t.isLens,a=t.id,o=t.isPlayable;return{module:"VideoItem",content:{type:"Video",sub_type:n?"SelfHosted":"Embedded",video_id:a,is_playable:Boolean(o)},trackCardShow:!0,view:{id:174}}})(j=function(e){function t(e){var n;Object(o.a)(this,t),(n=Object(i.a)(this,Object(c.a)(t).call(this,e))).pauseVideoInIframe=function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];n.messageHelper.dispatchMessage(e.contentWindow,g.PLAYER.PAUSE,{dontApplyOnFullScreen:t})},n.pauseAllOtherVideos=function(){Array.from(document.querySelectorAll("iframe")).filter(function(e){return e!==n.iframe}).forEach(function(e){return n.pauseVideoInIframe(e)})},n.handleMessage=function(e,t){var a=n.videoTracker,o=a.handlePlayEvent,r=a.handlePauseEvent,i=a.handleQualityChangeEvent,c=a.handleFragmentLoading,s=a.handleFragmentLoaded;switch(e){case v.DOM.PLAY:n.pauseAllOtherVideos(),o(t);break;case v.DOM.PAUSE:r(t);break;case v.PLAYER.QUALITY_CHANGE:i(t);break;case"fragment-loading":c(t);break;case"fragment-loaded":s(t)}},n.handleObserve=function(e){e[0].intersectionRatio<=0&&n.iframe&&n.pauseVideoInIframe(n.iframe,!0)},n.handlePlay=function(){n.props.trackEvent(Object(s.default)(n),{id:5500,action:"Play",element:"Video"})},n.handlePlayFailed=function(){(0,n.props.showNotification)("视频加载失败，请刷新页面重试","red")};var a=e.data;return n.messageHelper=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"*",n=arguments.length>2?arguments[2]:void 0;return{subscribeMessage:function(a){function o(o){var r=o.origin||o.originalEvent.origin,i="*"===t||t===r,c=o.data||{},s=c.from,l=c.id,u=c.payload;if(i&&s===O&&(!n||e===l)&&u){var d=u.messageName,p=u.data;d&&a(d,p,o.source)}}return window.addEventListener("message",o),{unsubscribe:function(){return window.removeEventListener("message",o)}}},dispatchMessage:function(n,a,o){n&&n.postMessage&&n.postMessage({from:O,id:e,payload:{messageName:a,data:o}},t||"*")}}}(a.id,"*",!0),n.videoTracker=L(function(e,t){m.a.trackEvent(Object(s.default)(n),e,{play:t})}),n}return Object(l.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){var e=this.props,t=e.data,n=t.isLens,a=t.id,o=t.playerUrl,r=t.flvPlayerUrl,i=e.loadVideo;n||!a||o||r||i(a);var c=this.messageHelper.subscribeMessage;this.messageSubscription=c(this.handleMessage)}},{key:"componentWillUnmount",value:function(){this.messageSubscription.unsubscribe(),this.videoTracker.clearTick()}},{key:"render",value:function(){var e=this,t=this.props,n=t.data,o=t.data.error,r=t.onBeforePlay;return Object(u.e)("div",{className:"RichText-video"},o?Object(u.e)(b.a,n):Object(u.e)(h.a,{onObserve:this.handleObserve},Object(u.e)(f.b,Object(a.default)({},n,{onIframeRef:function(t){return e.iframe=t},onPlay:this.handlePlay,onPlayFailed:this.handlePlayFailed,onBeforePlay:r}))))}}]),t}(d.Component))||j)||j;t.a=P},936:function(e,t){e.exports=function(e){return!!e&&("object"==typeof e||"function"==typeof e)&&"function"==typeof e.then}},938:function(e,t,n){var a,o,r;o=[t],void 0===(r="function"==typeof(a=function(e){"use strict";function t(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}Object.defineProperty(e,"__esModule",{value:!0});var n=!1;if("undefined"!=typeof window){var a={get passive(){n=!0}};window.addEventListener("testPassive",null,a),window.removeEventListener("testPassive",null,a)}var o="undefined"!=typeof window&&window.navigator&&window.navigator.platform&&/iP(ad|hone|od)/.test(window.navigator.platform),r=[],i=!1,c=-1,s=void 0,l=void 0,u=function(e){return r.some(function(t){return!(!t.options.allowTouchMove||!t.options.allowTouchMove(e))})},d=function(e){var t=e||window.event;return!!u(t.target)||1<t.touches.length||(t.preventDefault&&t.preventDefault(),!1)},p=function(){setTimeout(function(){void 0!==l&&(document.body.style.paddingRight=l,l=void 0),void 0!==s&&(document.body.style.overflow=s,s=void 0)})};e.disableBodyScroll=function(e,a){if(o){if(!e)return void console.error("disableBodyScroll unsuccessful - targetElement must be provided when calling disableBodyScroll on IOS devices.");if(e&&!r.some(function(t){return t.targetElement===e})){var p={targetElement:e,options:a||{}};r=[].concat(t(r),[p]),e.ontouchstart=function(e){1===e.targetTouches.length&&(c=e.targetTouches[0].clientY)},e.ontouchmove=function(t){var n,a,o,r;1===t.targetTouches.length&&(a=e,r=(n=t).targetTouches[0].clientY-c,!u(n.target)&&(a&&0===a.scrollTop&&0<r?d(n):(o=a)&&o.scrollHeight-o.scrollTop<=o.clientHeight&&r<0?d(n):n.stopPropagation()))},i||(document.addEventListener("touchmove",d,n?{passive:!1}:void 0),i=!0)}}else{f=a,setTimeout(function(){if(void 0===l){var e=!!f&&!0===f.reserveScrollBarGap,t=window.innerWidth-document.documentElement.clientWidth;e&&0<t&&(l=document.body.style.paddingRight,document.body.style.paddingRight=t+"px")}void 0===s&&(s=document.body.style.overflow,document.body.style.overflow="hidden")});var h={targetElement:e,options:a||{}};r=[].concat(t(r),[h])}var f},e.clearAllBodyScrollLocks=function(){o?(r.forEach(function(e){e.targetElement.ontouchstart=null,e.targetElement.ontouchmove=null}),i&&(document.removeEventListener("touchmove",d,n?{passive:!1}:void 0),i=!1),r=[],c=-1):(p(),r=[])},e.enableBodyScroll=function(e){if(o){if(!e)return void console.error("enableBodyScroll unsuccessful - targetElement must be provided when calling enableBodyScroll on IOS devices.");e.ontouchstart=null,e.ontouchmove=null,r=r.filter(function(t){return t.targetElement!==e}),i&&0===r.length&&(document.removeEventListener("touchmove",d,n?{passive:!1}:void 0),i=!1)}else(r=r.filter(function(t){return t.targetElement!==e})).length||p()}})?a.apply(t,o):a)||(e.exports=r)},939:function(e,t,n){"use strict";var a=n(6),o=n(10),r=n(9),i=n(7),c=n(8),s=n(1),l=(n(984),n(0)),u=function(e){function t(){return Object(a.a)(this,t),Object(r.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){return Object(l.e)("svg",{width:"30",height:"30",viewBox:"0 0 66 66",xmlns:"http://www.w3.org/2000/svg",className:"CircleLoadingBar","aria-hidden":"true"},Object(l.e)("g",null,Object(l.e)("circle",{className:"path",fill:"none",strokeWidth:"6",strokeLinecap:"round",cx:"33",cy:"33",r:"30"})))}}]),t}(s.Component);t.a=u},940:function(e,t,n){"use strict";var a=n(1),o=n(77);t.a=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=n.rootMargin,i=n.threshold,c=n.once,s=void 0===c||c;e=Array.isArray(e)?e:e?[e]:[];var l=Object(a.useRef)(null),u=Object(o.c)(t);Object(a.useEffect)(function(){if(e.length)return l.current&&e.forEach(function(e){return l.current.unobserve(e)}),l.current=new IntersectionObserver(function(e){e.forEach(function(e){e.intersectionRatio>0&&(u(e),s&&l.current.unobserve(e.target))})},{rootMargin:r,threshold:i}),e.forEach(function(e){return l.current.observe(e)}),function(){e.forEach(function(e){return l.current.unobserve(e)})}},[e,r,JSON.stringify(i),s])}},946:function(e,t,n){},948:function(e,t,n){"use strict";n.r(t);var a,o=n(24),r=n(16),i=n(26),c=n(0),s=n(1),l=n.n(s),u=n(1052),d=n(29),p=n.n(d),h=n(32),f=n.n(h),b=n(33),m=n(567),v=n.n(m),g=n(20),O=n(299),j=n.n(O),y=n(77),C=n(47),k=n.n(C),w=n(862),N=n(36),S=n.n(N),x=n(940),T=n(226),I=function(e){return fetch("https://api.zhihu.com/gif2mp4/".concat(e),{credentials:"include",headers:{"X-Requested-With":"Fetch"}}).then(function(e){return e.json()})},E=n(931),L=n(6),P=n(10),A=n(9),M=n(7),R=n(8),_=n(198),z=n(13),B=n.n(z),D=n(2),V=n(978),F=n.n(V),H=n(99),U=n.n(H),q=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:U.a;return function(n){return F()(function(a){function o(){var e,n;Object(L.a)(this,o);for(var a=arguments.length,r=new Array(a),i=0;i<a;i++)r[i]=arguments[i];return(n=Object(A.a)(this,(e=Object(M.a)(o)).call.apply(e,[this].concat(r)))).key=t(),n}return Object(R.a)(o,a),Object(P.a)(o,[{key:"render",value:function(){return Object(c.e)(n,p()({},this.props,Object(D.a)({},e,this.key)))}}]),o}(l.a.Component),n)}},W=n(1093),K=n(205),G=n.n(K),Q=function(e,t){return function(n){var a,o=(a=[],{value:{},listen:function(e){a.push(e)},unlisten:function(e){a=a.filter(function(t){return t!==e})},emit:function(e){this.value=e,a.forEach(function(t){return t(e)})}}),r=Object(W.createSubscription)({getCurrentValue:function(e){return e.value},subscribe:function(e,t){return e.listen(t),function(){return e.unlisten(t)}}}),i=function(e,t){return e?G()(e,function(e){return function(){return t(e.apply(void 0,arguments))}}):{dispatch:t}}(t,function(e){return o.emit(e(o.value))}),s=Object.assign(function(t){return Object(c.e)(r,{source:o},function(a){return Object(c.e)(n,p()({},t,e({value:a,source:o},t),i))})},{source:o});return F()(s,n)}};!function(e){e[e.Initial=0]="Initial",e[e.Loading=1]="Loading",e[e.Ok=2]="Ok",e[e.Failed=3]="Failed"}(a||(a={}));var Z=function(e){return Object(c.e)("svg",p()({width:60,height:60,viewBox:"0 0 60 60"},e),Object(c.e)("g",{fill:"none",fillRule:"evenodd"},Object(c.e)("ellipse",{fill:"#000",opacity:.45,cx:30,cy:30,rx:30,ry:30}),Object(c.e)("ellipse",{stroke:"#FFF",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"4,1,4",cx:30,cy:30,rx:26,ry:26}),Object(c.e)("svg",p()({x:16,y:18.5},e),Object(c.e)("path",{d:"M12.842 12.981V11.4H7.64v1.653h3.27v.272c-.018 1.881-1.442 3.147-3.516 3.147-2.382 0-3.876-1.846-3.876-4.834 0-2.936 1.485-4.79 3.832-4.79 1.732 0 2.936.835 3.428 2.364h1.977c-.43-2.566-2.522-4.201-5.405-4.201-3.55 0-5.845 2.601-5.845 6.644 0 4.096 2.268 6.654 5.863 6.654 3.322 0 5.475-2.083 5.475-5.327zM17.518 18V5.317H15.55V18h1.97zm5.142 0v-5.256h5.449v-1.74h-5.45V7.11h5.95V5.317h-7.918V18h1.969z",fill:"#fff"}))))},J=function(e){return Object(c.e)("svg",p()({width:"60px",height:"60px",viewBox:"0 0 60 60",version:"1.1",xmlns:"http://www.w3.org/2000/svg"},e),Object(c.e)("g",{stroke:"none",strokeWidth:"1",fill:"none",fillRule:"evenodd"},Object(c.e)("ellipse",{fill:"#000000",opacity:"0.45",cx:"30",cy:"30",rx:"30",ry:"30"}),Object(c.e)("ellipse",{stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0.5",cx:"30",cy:"30",rx:"26",ry:"26"}),Object(c.e)("ellipse",{stroke:"#ffffff",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",strokeDasharray:"4,1,4",cx:"30",cy:"30",rx:"26",ry:"26"},Object(c.e)("animateTransform",{attributeType:"xml",attributeName:"transform",type:"rotate",from:"0 30 30",to:"90 30 30",dur:"0.3s"}),Object(c.e)("animate",{attributeName:"opacity",from:"1",to:"0",dur:"0.3",fill:"freeze"}))),Object(c.e)("svg",{x:"16",y:"18.5"},Object(c.e)("g",{fill:"#ffffff"},Object(c.e)("path",{x:"100",y:"100",d:"M12.8422852,12.9814453 L12.8422852,11.3994141 L7.63916016,11.3994141 L7.63916016,13.0517578 L10.9086914,13.0517578 L10.9086914,13.3242188 C10.8911133,15.2050781 9.46728516,16.4707031 7.39306641,16.4707031 C5.01123047,16.4707031 3.51708984,14.625 3.51708984,11.6367188 C3.51708984,8.70117188 5.00244141,6.84667969 7.34912109,6.84667969 C9.08056641,6.84667969 10.284668,7.68164062 10.7768555,9.2109375 L12.7543945,9.2109375 C12.3237305,6.64453125 10.2319336,5.00976562 7.34912109,5.00976562 C3.79833984,5.00976562 1.50439453,7.61132812 1.50439453,11.6542969 C1.50439453,15.75 3.77197266,18.3076172 7.36669922,18.3076172 C10.6889648,18.3076172 12.8422852,16.2246094 12.8422852,12.9814453 Z M17.5180664,18 L17.5180664,5.31738281 L15.5493164,5.31738281 L15.5493164,18 L17.5180664,18 Z M22.659668,18 L22.659668,12.7441406 L28.1088867,12.7441406 L28.1088867,11.0039062 L22.659668,11.0039062 L22.659668,7.11035156 L28.6098633,7.11035156 L28.6098633,5.31738281 L20.690918,5.31738281 L20.690918,18 L22.659668,18 Z"}))),Object(c.e)("path",{d:"M56,30 C56,15.6405965 44.3594035,4 30,4",stroke:"#FFFFFF",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round",opacity:"0",fill:"none"},Object(c.e)("animate",{attributeName:"opacity",from:"0",to:"1",dur:".6",fill:"freeze"}),Object(c.e)("animateTransform",{attributeType:"xml",attributeName:"transform",type:"rotate",from:"0 30 30",to:"360 30 30",dur:"1.625s",repeatCount:"indefinite"})))},Y=function(e){return Object(c.e)("svg",p()({width:60,height:60,viewBox:"0 0 60 60"},e),Object(c.e)("g",{fill:"none",fillRule:"evenodd"},Object(c.e)("ellipse",{fill:"#282828",opacity:.45,cx:30,cy:30,rx:30,ry:30}),Object(c.e)("path",{d:"M41.552 18.93A15.954 15.954 0 0 0 30 14c-8.837 0-16 7.163-16 16s7.163 16 16 16c7.811 0 14.315-5.597 15.72-13",stroke:"#FFF",strokeWidth:2,strokeLinecap:"round"}),Object(c.e)("path",{d:"M45.108 16.236c.44-.33.797-.151.797.4v7.005c0 .55-.358.73-.797.4L40.7 20.736c-.44-.33-.439-.866 0-1.195l4.407-3.305z",fill:"#FFF"})))},X=(n(1118),function(){return new Promise(requestAnimationFrame)}),$=function(e){function t(){var e,n;Object(L.a)(this,t);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(n=Object(A.a)(this,(e=Object(M.a)(t)).call.apply(e,[this].concat(r)))).videoEle=null,n.onPlay=function(){var e=n.props.onSuccess;e&&e()},n.onError=function(e){var t=n.props,o=t.onFailed,r=t.gifKey;o&&o(e.target.error),n.props.updateGif({gifKey:r,loadState:a.Failed})},n.handleClick=function(e){var t=n.props,o=t.gifKey,r=t.src,i=t.onLoadStart,c=t.onSuccess,s=t.onFailed,l=t.onClick,u=t.onPlayChange,d=t.loadState,p=t.isPlaying,h=t.videoUrl;if(l&&l(e),u&&u(p),h)return n.videoEle&&(p?n.videoEle.pause():(d===a.Failed&&(n.videoEle.src=n.videoEle.src),n.videoEle.play(),i&&i())),void n.props.updateGif({gifKey:o,isPlaying:!p});n.canPlay?n.props.updateGif({gifKey:o,isPlaying:!p}):d!==a.Loading&&(n.props.updateGif({gifKey:o,loadState:a.Loading}),i&&i(),Promise.all([Object(_.loadImage)(r),X().then(X)]).then(function(){c&&c(),n.props.updateGif({gifKey:o,isPlaying:!0,loadState:a.Ok})}).catch(function(e){s&&s(e),n.props.updateGif({gifKey:o,loadState:a.Failed})}))},n}return Object(R.a)(t,e),Object(P.a)(t,[{key:"componentDidUpdate",value:function(e){var t=this.props,n=t.isPlaying,a=t.videoUrl;this.videoEle&&n&&a!==e.videoUrl&&this.videoEle.play(),this.videoEle&&!n&&(this.videoEle.currentTime=0,this.videoEle.controls=!1,this.videoEle.pause())}},{key:"componentWillUnmount",value:function(){this.props.removeGif({gifKey:this.props.gifKey})}},{key:"render",value:function(){var e,t=this,n=this.props,o=n.poster,r=n.src,i=n.size,s=n.loadState,l=n.isPlaying,u=n.onRef,d=n.videoUrl,p=this.canPlay&&l,h=s===a.Loading,f=s===a.Failed;return h?e=Object(c.e)(J,{className:"GifPlayer-icon"}):f?e=Object(c.e)(Y,{className:"GifPlayer-icon"}):l||(e=Object(c.e)(Z,{className:"GifPlayer-icon"})),e&&(this.lastIcon=e),Object(c.e)("div",{className:B()("GifPlayer",{isPlaying:l}),"data-size":i,onClick:this.handleClick,ref:u},d&&Object(c.e)("video",{ref:function(e){t.videoEle=e},className:"ztext-gif GifPlayer-gif2mp4",src:d,"data-thumbnail":o,poster:o,"data-size":i,controls:!1,preload:"metadata",loop:!0,muted:!0,onPlay:this.onPlay,onError:this.onError,playsInline:!0}),Object(c.e)("img",{className:"ztext-gif",role:"presentation",src:p?r:o,"data-thumbnail":o,"data-size":i}),e||this.lastIcon)}},{key:"canPlay",get:function(){return this.props.loadState===a.Ok}}]),t}(l.a.Component);$.defaultProps={isPlaying:!1,loadState:a.Initial};var ee=q("gifKey")(Q(function(e,t){return e.value[t.gifKey]},{updateGif:function(e){return function(t){var n=e.gifKey,a=e.isPlaying,o=f()(e,["gifKey","isPlaying"]),r=Object.assign({},t);if(a)for(var i=0,c=Object.keys(r);i<c.length;i++){var s=c[i],l=r[s];s!==n&&l.isPlaying&&(r[s]=Object.assign({},l,{isPlaying:!1}))}return Object.assign({},r,Object(D.a)({},n,Object.assign({},t[n],{isPlaying:a},o)))}},removeGif:function(e){return function(t){var n=Object.assign({},t);return delete n[e.gifKey],n}}})($)),te=function(e,t){g.a.trackEvent(e,{action:"StatusReport",element:"Card"},{status:{result:t}})},ne=function(e,t){var n,a,o;null===(n=window)||void 0===n||null===(a=n.Raven)||void 0===a||null===(o=a.captureException)||void 0===o||o.call(a,e,{fingerprint:["gif2mp4"],extra:t})},ae=function(e){var t=e.src,n=e.useWebP,a=void 0===n?"auto":n,o=e.useMp4,r=void 0!==o&&o,l=e.onRef,u=e.onLoadStateChange,d=f()(e,["src","useWebP","useMp4","onRef","onLoadStateChange"]),h=Object(s.useState)(""),b=Object(i.a)(h,2),O=b[0],C=b[1],N=Object(s.useState)(null),L=Object(i.a)(N,2),P=L[0],A=L[1],M=Object(s.useState)(Date.now()),R=Object(i.a)(M,2),_=R[0],z=R[1],B=Object(s.useState)(!1),D=Object(i.a)(B,2),V=D[0],F=D[1],H=Object(s.useState)(null),U=Object(i.a)(H,2),q=U[0],W=U[1],K=Object(E.a)("animation"),G=Object(s.useCallback)(function(){var e=(Object(m.imgPathParse)(t)||{}).hash;r&&Object(w.onViewedOnce)(P,function(){I(e).then(function(e){var t,n,a=e.playlist,o=(null==a?void 0:null===(t=a.SD)||void 0===t?void 0:t.play_url)||(null==a?void 0:null===(n=a.LD)||void 0===n?void 0:n.play_url);o&&k.a.increment("Gif2Mp4Player.mp4.fetch.success.count"),C(o)}).catch(j.a)})},[P,t,r]);Object(s.useEffect)(G,[t,r,P]),Object(s.useEffect)(function(){P&&g.a.setModule(P,{module:"GifItem"})},[P]),Object(x.a)(P,function(){g.a.trackCardShow(P,{element:"Card"})}),Object(y.g)(function(){k.a.increment("Gif2Mp4Player.mp4.play.failure.count"),ne(new Error("Gif2Mp4 play timeout"),{src:t,videoUrl:O}),F(!1)},V?2e3:null),Object(y.g)(function(){k.a.increment("Gif2Mp4Player.mp4.play.success.count"),k.a.timing("Gif2Mp4Player.mp4.first_frame_time",Date.now()-_-100),F(!1),W(null)},q);var Q=v()(t,{extension:("auto"===a?K:a)?"webp":"gif"});return Object(c.e)(ee,p()({videoUrl:O,src:Q,onRef:Object(s.useCallback)(Object(T.a)(l,A),[]),onPlayChange:function(e){e||(z(Date.now()),O&&(k.a.increment("Gif2Mp4Player.mp4.click.count"),F(!0)),g.a.trackEvent(P,{action:"Click",element:"Image"}))},onLoadStart:function(){if(O){var e=S.a.parse(O).expiration;e&&Number(e)<Date.now()/1e3+900&&G()}z(Date.now()),u&&u("loadstart",Q)},onSuccess:function(){te(P,"Success"),O?V&&W(100):k.a.timing("Gif2Mp4Player.gif.first_frame_time",Date.now()-_),u&&u("load",Q)},onFailed:function(e){te(P,"Fail"),O&&(V&&(k.a.increment("Gif2Mp4Player.mp4.play.failure.count"),F(!1),W(null)),ne(e,{videoUrl:O,src:t})),u&&u("error",Q)}},d))},oe=function(e){var t=e.dataset,n=t.thumbnail,a={src:n,poster:n,size:t.size},o=document.createElement("div");return o.className="RichText-gifPlaceholder",e.parentNode.replaceChild(o,e),{data:a,target:o}},re=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.Component,a=void 0===n?ae:n,o=Object(s.useState)(null),r=Object(i.a)(o,2),l=r[0],u=r[1];return Object(s.useEffect)(function(){if(e){var t=Array.from(e.querySelectorAll("img.origin_image[data-thumbnail],img.content_image[data-thumbnail]"));if(t.length){var n=t.map(function(e){return oe(e)}).map(function(e,t){var n=e.data,o=e.target;return Object(b.createPortal)(Object(c.e)(a,p()({key:t},n)),o)});u(n)}}},[e]),l},ie=n(368),ce=n(46),se=n(63),le=n.n(se),ue=n(114),de=n(21),pe=n(353),he=n(1048),fe=n(62),be=n.n(fe);var me=n(67),ve=n(863),ge=function(e){var t=Object(ve.a)(),n=Object(s.useCallback)(function(n){t.ZhihuHybrid&&function(e,t){var n=t.root;if(!e.defaultPrevented){var a=e.target;if("img"===a.tagName.toLowerCase()&&(a.src.includes("zhimg")||!a.src.includes("equation"))&&(!a.classList.contains("ztext-gif")||a.parentNode.classList.contains("isPlaying"))){var o=Array.from(n.querySelectorAll(["img"])).filter(function(e){return e.src.includes("zhimg")&&!e.src.includes("equation")}),r=o.indexOf(a);if(-1!==r){e.preventDefault();var i=o.map(function(e){return e.dataset.thumbnail&&e.src.replace(/\.jpg|\.webp/,".gif")||e.dataset.src||e.src||""}).map(function(e){return Object(_.imgUrl)(e,Object.assign({quality:""},e.endsWith("webp")&&{extension:"jpg"}))});me.a.dispatch("base/openImage",{images:i,index:r})}}}}(n,{root:e})},[e,t.ZhihuHybrid]);Object(s.useEffect)(function(){if(e)return e.addEventListener("click",n),function(){e.removeEventListener("click",n)}},[e,n])},Oe=n(871),je=function(e){var t=e.getAttribute("data-hash"),n=e.textContent.replace(/^@/,""),a=document.createElement("span");return e.parentNode.replaceChild(a,e),{target:a,data:{id:t,name:n}}},ye=function(e){var t=Object(s.useState)(null),n=Object(i.a)(t,2),a=n[0],o=n[1];return Object(s.useEffect)(function(){if(e){var t=Array.from(e.querySelectorAll(".member_mention"));if(t.length){var n=t.map(je).map(function(e,t){var n=e.data,a=e.target;return Object(b.createPortal)(Object(c.e)(Oe.a,{key:t,user:n},"@",n.name),a)});o(n)}}},[e]),a},Ce=n(934),ke=function(e){var t=e.getAttribute("data-poster"),n="data:,"===t?"":t,a={title:e.getAttribute("data-name"),thumbnail:n,url:e.getAttribute("href"),src:e.getAttribute("data-src")};a=e.getAttribute("data-lens-id")?Object.assign({},a,{isLens:!0,id:e.getAttribute("data-lens-id"),isPlayable:!0}):Object.assign({},a,{isLens:!1,id:e.getAttribute("data-video-id"),isPlayable:"true"===e.getAttribute("data-video-playable")}),e.hasAttribute("data-lens-status")&&(a=Object.assign({},a,{error:{status:e.getAttribute("data-lens-status"),message:e.getAttribute("data-description")}}));var o=document.createElement("div");return e.parentNode.replaceChild(o,e),{target:o,data:a}},we=function(e){var t=Object(s.useState)(null),n=Object(i.a)(t,2),a=n[0],o=n[1];return Object(s.useEffect)(function(){if(e){var t=Array.from(e.querySelectorAll(".video-box, .video-link, .unprocessable_video"));if(t.length){var n=t.map(ke).map(function(e,t){var n=e.data,a=e.target;return Object(b.createPortal)(Object(c.e)(Ce.a,{key:t,data:n}),a)});o(n)}}},[e]),a},Ne=(n(1119),{}),Se=function(e,t){var n=function(e){return e.split("/").reverse()[0]}(t),a=n.split("."),o=Object(i.a)(a,2),r=o[0],c=o[1],s=r.split("_"),l=Object(i.a)(s,2)[1],u="webp"===c||"gif"===c?c:"image",d=Object(C.statGenerator)({appName:"heifetz"})("".concat(u,".").concat(l,".unknown.RichText"));switch(e){case"loadstart":Ne[n]=Date.now();break;case"load":if(Ne[n]){var p="".concat(d,".success");k.a.increment({raw:"".concat(p,".cnt")}),k.a.timing(p,Date.now()-Ne[n]),delete Ne[n]}break;case"timeout":if(Ne[n]){var h="".concat(d,".timeout.cnt");k.a.increment({raw:h}),delete Ne[n]}break;case"error":if(Ne[n]){var f="".concat(d,".failure.cnt");k.a.increment({raw:f}),delete Ne[n]}}},xe=function(e){return Object(c.e)(ae,Object(r.default)({onLoadStateChange:Se},e,{useMp4:!0}))};t.default=function(e){var t=e.ecommerce,a=e.html,d=e.shouldUseArticleCard,p=e.sourceId,h=e.sourceType,f=Object(o.a)(e,["ecommerce","html","shouldUseArticleCard","sourceId","sourceType"]),b=Object(s.useState)(null),m=Object(i.a)(b,2),v=m[0],g=m[1],O=!Object(ce.p)({includeTablet:!0});ge(v);var j,y=(j=Object(de.useDispatch)(),Object(s.useCallback)(function(){var e=Object(ue.a)(le.a.mark(function e(t){var n,a,o,r;return le.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(n=t,a=null,"京东"!==t.source&&"苏宁"!==t.source){e.next=9;break}return be()(navigator.userAgent).Safari&&"苏宁拼购"!==t.goodsType&&(a=window.open()),e.next=7,j(Object(pe.j)(t.id,0)).catch(function(){return null});case 7:r=e.sent,n=Object.assign({},t,{},null==r?void 0:null===(o=r.payload)||void 0===o?void 0:o.data);case 9:"苏宁拼购"!==t.goodsType&&Object(he.a)(n,a);case 10:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}(),[j]));return Object(c.e)(l.a.Fragment,null,Object(c.e)(u.a,Object(r.default)({},f,{html:a,onRef:g,lazyLoadImageProps:{onLoadStateChange:Se,useWebP:!1},adLinkCardProps:{parentId:p,parentType:h},mcnLinkCardProps:{onClick:function(e){var t=e.currentTarget,n=t.href,a=t.dataset,o=a.mcnId,r=a.mcnSource,i=a.mcnAppSchemaIos,c=a.mcnAppSchemaAndroid,s=a.mcnGoodsType;O&&("拼多多"===r||"苏宁"===r&&"苏宁拼购"===s)||(e.preventDefault(),y({id:o,source:r,goodsType:s,url:n,appSchemaIos:i,appSchemaAndroid:c}))}},metaLinkCardProps:{onClick:function(e){e.preventDefault(),y({id:e.currentTarget.dataset.metaId,url:e.currentTarget.href,source:e.currentTarget.dataset.metaSource})}},mkSkuLinkCardProps:{cardSize:"large",enableBackdrop:!1,sourceConvert:!1,tagPreset:"plain",enableMetaTag:!1,enableButton:!0,buttonPreset:"plain",buttonColor:"orange",enableHint:!1},zvideoLinkCardProps:{enableInlinePlay:!0},articleLinkCardProps:{enableZa:!0,useOpenArticleButton:!0},shouldUseArticleCard:d})),re(v,{Component:xe}),we(v),ye(v),Object(ie.d)(v,{ecommerce:t,getComponent:function(){return n.e(1).then(n.bind(null,1718))}}))}},950:function(e,t,n){"use strict";var a=n(6),o=n(10),r=n(9),i=n(7),c=n(8),s=n(29),l=n.n(s),u=n(32),d=n.n(u),p=n(3),h=n.n(p),f=n(1),b=n(13),m=n.n(b),v=n(163),g=n(23),O=(n(1089),n(0));function j(e){var t=e.className,n=e.tag,a=e.name,o=e.value,r=d()(e,["className","tag","name","value"]),i="div";return n?i=n:r.href?i="a":r.onClick&&(i=g.d),Object(O.e)(i,l()({className:m()("NumberBoard-item",t)},r),Object(O.e)("div",{className:"NumberBoard-itemInner"},Object(O.e)("div",{className:"NumberBoard-itemName"},a),Object(O.e)("strong",{className:"NumberBoard-itemValue",title:o},Object(v.formatNumber)(o))))}var y=function(e){function t(){return Object(a.a)(this,t),Object(r.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(o.a)(t,[{key:"render",value:function(){var e=this.props,t=e.className,n=e.divider,a=e.children,o=e.items,r=d()(e,["className","divider","children","items"]);return Object(O.e)("div",l()({className:m()("NumberBoard",t,{"NumberBoard--divider":n})},r),a||o.map(function(e){return Object(O.e)(j,l()({key:e.name},e))}))}}]),t}(f.Component);y.propTypes={divider:h.a.bool},y.defaultProps={divider:!1},y.Item=j;var C=y;t.a=C},951:function(e,t,n){var a=n(893),o=n(385),r=n(920),i=n(921),c=n(86),s=n(1001),l="Expected a function",u=8,d=32,p=128,h=256;e.exports=function(e){return o(function(t){var n=t.length,o=n,f=a.prototype.thru;for(e&&t.reverse();o--;){var b=t[o];if("function"!=typeof b)throw new TypeError(l);if(f&&!m&&"wrapper"==i(b))var m=new a([],!0)}for(o=m?o:n;++o<n;){b=t[o];var v=i(b),g="wrapper"==v?r(b):void 0;m=g&&s(g[0])&&g[1]==(p|u|d|h)&&!g[4].length&&1==g[9]?m[i(g[0])].apply(m,g[3]):1==b.length&&s(b)?m[v]():m.thru(b)}return function(){var e=arguments,a=e[0];if(m&&1==e.length&&c(a))return m.plant(a).value();for(var o=0,r=n?t[o].apply(this,e):a;++o<n;)r=t[o].call(this,r);return r}})}},954:function(e,t,n){"use strict";n.d(t,"a",function(){return P});var a=n(16),o=n(2),r=n(6),i=n(10),c=n(9),s=n(7),l=n(8),u=n(24),d=n(0),p=n(3),h=n.n(p),f=n(1),b=n(21),m=n(31),v=n(128),g=n(421),O=n(147),j=n(104);var y,C,k,w=n(90),N=n(415),S=function(e,t){var n=t.urlToken;return e.people.allFavlistsByUser[n]||{}},x=function(e){return e.currentUser},T=(Object(w.a)(O.a.GET_ALL_FAVLISTS,function(e,t,n){return function(a,o){var r=o();if(e=e||x(r),!t){var i=S(r,{urlToken:e}),c=i.offset,s=void 0===c?0:c,l=i.limit;t={offset:s,limit:void 0===l?10:l}}return{action:Object.assign({urlToken:e,paging:t},j.a.enableSchema&&{schema:N.b},{extra:n}),fetcher:function(e,t){var n=t.next,a=t.offset,o=void 0===a?0:a,r=t.limit,i=void 0===r?10:r;return n?j.a.http(n):j.a.http("/api/v4/people/".concat(e,"/collections"),{query:{include:"data[*].updated_time,answer_count,follower_count,creator,is_public",offset:o,limit:i}})}(e,t)}}}),Object(w.a)(O.a.GET_ALL_FAVLISTS_WITH_RELATIONS,function(e,t,n,a,o){return function(r,i){var c=i();if(e=e||x(c),!a){var s=S(c,{urlToken:e}),l=s.offset,u=void 0===l?0:l,d=s.limit;a={offset:u,limit:void 0===d?10:d}}var p=Object.assign({contentType:t,contentId:n,urlToken:e,paging:a},j.a.enableSchema&&{schema:N.b},{extra:o});return{action:p,fetcher:function(e){var t=e.contentType,n=e.contentId,a=e.paging,o=(a=void 0===a?{}:a).next,r=a.offset,i=void 0===r?0:r,c=a.limit,s=void 0===c?10:c;return o?j.a.http(o):j.a.http("/api/v4/collections/contents/".concat(t,"/").concat(n),{query:{offset:i,limit:s}})}(p)}}})),I=function(){return n.e(23).then(n.bind(null,1624)).then(function(e){return e.FavlistsModal})},E={ids:[],isFetching:!1,isDrained:!1},L=Object(m.createSelector)(function(e){return e.people.allFavlistsByUser[e.currentUser]||E},function(e){return e.entities.favlists},function(e,t){var n=e.ids,a=Object(u.a)(e,["ids"]);return Object.assign({},a,{items:n.map(function(e){return t[e]})})});var P=Object(b.connect)(function(e,t){var n=t.id,a=t.type,o=e.favlists.relations,r=e.currentUser,i=L(e);return{isFetching:i.isFetching,isDrained:i.isDrained,items:i.items,relations:o["".concat(a,"_").concat(n)],zaEnabled:!0,urlToken:r}},function(e,t){return{onUpdateFav:function(){return e(g.b.apply(void 0,arguments))},onFavlistAdd:t.onFavlistAdd||function(){return e(g.a.apply(void 0,arguments))},onLoad:function(){return e(T.apply(void 0,arguments))},onUpdateReaction:function(){return e(g.c.apply(void 0,arguments))}}})((k=C=function(e){function t(){var e,n;Object(r.a)(this,t);for(var a=arguments.length,i=new Array(a),l=0;l<a;l++)i[l]=arguments[l];return(n=Object(c.a)(this,(e=Object(s.a)(t)).call.apply(e,[this].concat(i)))).onFavlistAdd=function(){for(var e=n.props,t=e.urlToken,a=e.onFavlistAdd,o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return a.apply(void 0,r.concat([{urlToken:t}]))},n.onLoad=function(){for(var e=n.props,t=e.onLoad,a=e.type,r=e.id,i=e.urlToken,c=e.onUpdateReaction,s=arguments.length,l=new Array(s),u=0;u<s;u++)l[u]=arguments[u];return t.apply(void 0,[i,a,r].concat(l)).then(function(e){c({contentType:a,contentId:r,relations:e.payload.data.reduce(function(e,t){return Object.assign({},e,Object(o.a)({},t.id,t.isFavorited))},{})})})},n}return Object(l.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this.context.currentUser||{};return Object(d.e)(v.a,Object(a.default)({getComponent:I},this.props,{authRequired:this.context.authRequired,isUserActive:e.isActive,onLoad:this.onLoad,onFavlistAdd:this.onFavlistAdd}))}}]),t}(f.Component),C.contextTypes={authRequired:h.a.func,currentUser:h.a.object},y=k))||y},955:function(e,t,n){},956:function(e,t,n){},957:function(e,t,n){"use strict";var a=n(16),o=n(24),r=n(0),i=n(1),c=n.n(i),s=n(3),l=n.n(s),u=n(359),d=n(358),p=n(975);function h(e){var t,n=e.user,c=e.noHeadline,s=Object(o.a)(e,["user","noHeadline"]),l=n.headline,h=n.isOrg,f=Object(i.useMemo)(function(){return Object(d.e)(n.badgeV2||n.badge)},[n]),b=f.identity,m=f.bestAnswerer,v=f.baike,g=f.title;return g?Object(r.e)(u.a,Object(a.default)({html:g},s)):!h&&(null==m?void 0:null===(t=m.topics)||void 0===t?void 0:t.length)?Object(r.e)("div",s,Object(r.e)(p.a,{topics:m.topics,user:n}),"的优秀回答者"):b?Object(r.e)("div",s,b[0].description):v?Object(r.e)("div",s,v.description):l&&!c?Object(r.e)(u.a,Object(a.default)({html:l},s)):null}h.propTypes={user:l.a.object.isRequired,noHeadline:l.a.bool},t.a=c.a.memo(h)},975:function(e,t,n){"use strict";var a=n(6),o=n(10),r=n(9),i=n(7),c=n(37),s=n(8),l=n(0),u=n(3),d=n.n(u),p=n(1),h=n(28),f=n(23),b=n(976),m=n(18),v=function(e){function t(){var e;return Object(a.a)(this,t),(e=Object(r.a)(this,Object(i.a)(t).call(this))).state={expanded:!1},e.onExpand=e.handleExpand.bind(Object(c.default)(e)),e}return Object(s.a)(t,e),Object(o.a)(t,[{key:"handleExpand",value:function(){this.setState({expanded:!0})}},{key:"render",value:function(){var e=this.props,t=e.topics,n=e.user,a=e.ellipsisLength,o=e.expandable,r=e.privacyEnabled,i=e.showPrivacyPage,c=this.state.expanded,s="等 ".concat(t.length," 个"),u=t;return c||(u=t.slice(0,a)),Object(l.e)("span",null,u.map(function(e,t){return Object(l.e)("span",{key:t},Object(l.e)(b.a,{showPrivacyPage:r&&i,authWrapperClassName:"ProfileMainPrivacy-authWrapper",authChild:Object(l.e)("span",{className:"ProfileMainPrivacy-pointerWrapper"},e.name)},Object(l.e)(h.Link,{to:"".concat(m.D,"/").concat(n.isOrg?"org":"people","/").concat(n.urlToken,"/creations/").concat(e.id)},e.name)),t<u.length-1?"、":" ")}),!c&&t.length>a&&(o?Object(l.e)(f.d,{preset:"plain",onClick:this.onExpand},s):s),"话题")}}]),t}(p.Component);v.propTypes={topics:d.a.array.isRequired,user:d.a.object,ellipsisLength:d.a.number,expandable:d.a.bool,noHoverCard:d.a.bool,privacyEnabled:d.a.bool,showPrivacyPage:d.a.bool},v.defaultProps={ellipsisLength:3,expandable:!0,noHoverCard:!1},t.a=v},976:function(e,t,n){"use strict";n.d(t,"a",function(){return c});var a=n(0),o=n(1),r=n.n(o),i=n(382),c=function(e){var t=e.children,n=e.showPrivacyPage,o=e.authWrapperClassName,c=e.authChild,s=r.a.Children.only(t),l=c?r.a.Children.only(c):s;return n?Object(a.e)(i.a,{wrapperClassName:o,loginButton:l}):s}},977:function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return l});var a=n(100),o=n.n(a),r=n(1090),i=n.n(r),c=function(e,t){var n=[];return o()(function(){for(var a=arguments.length,o=new Array(a),r=0;r<a;r++)o[r]=arguments[r];n.push(o),setTimeout(function(){n.length&&(t(n),n.length=0)},e)},function(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return String(t)})}(550,function(e){var t=new FormData;return t.append("items",JSON.stringify(e)),i()("/lastread/touch",{method:"POST",body:t})}),s="read",l="touch";t.c=c},978:function(e,t,n){"use strict";var a={childContextTypes:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},o={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},r=Object.defineProperty,i=Object.getOwnPropertyNames,c=Object.getOwnPropertySymbols,s=Object.getOwnPropertyDescriptor,l=Object.getPrototypeOf,u=l&&l(Object);e.exports=function e(t,n,d){if("string"!=typeof n){if(u){var p=l(n);p&&p!==u&&e(t,p,d)}var h=i(n);c&&(h=h.concat(c(n)));for(var f=0;f<h.length;++f){var b=h[f];if(!(a[b]||o[b]||d&&d[b])){var m=s(n,b);try{r(t,b,m)}catch(e){}}}return t}return t}},981:function(e,t,n){"use strict";n.d(t,"b",function(){return a}),n.d(t,"d",function(){return o}),n.d(t,"c",function(){return r}),n.d(t,"e",function(){return i}),n.d(t,"a",function(){return c});var a={ClubPageByCreated:"created",ClubPageFeature:"feature",ClubPage:"created",ClubPageHot:"hot",ClubPageByReaction:"reaction"},o=["1149348871749672960","1238110874666917888"],r={light:"https://pic1.zhimg.com/80/v2-b15da9b37f8b82bc6a2bbe9d500cd1ee_hd.png",dark:"https://pic3.zhimg.com/80/v2-3eb1b2e2945e8c7c75dc0f70e030b586_hd.png"},i={light:"https://pic3.zhimg.com/80/v2-822fcfabfcd84ac292fe0d2f35bda980_hd.png",dark:"https://pic4.zhimg.com/80/v2-61c5e49ee12cf0c7f9649604440dc153_hd.png"},c=["image/jpg","image/jpeg","image/png","image/gif"]},982:function(e,t,n){"use strict";var a=n(16),o=n(24),r=n(0),i=(n(1),n(358)),c=n(162),s=n(872),l=n(100),u=n.n(l),d=n(198),p=u()(d.findImageSpec),h=function(e,t){return Object(d.imgUrl)(e,p(t))},f={name:"uodor8",styles:"border-radius:50%;"},b={name:"79elbk",styles:"position:relative;"};t.a=function(e){var t=e.user,n=e.size,l=void 0===n?38:n,u=e.noBadge,d=void 0!==u&&u,p=e.noLink,m=void 0!==p&&p,v=e.linkProps,g=Object(o.a)(e,["user","size","noBadge","noLink","linkProps"]),O=t.avatarUrl,j=t.isOrg,y=t.urlToken,C=!m&&y?"https://www.zhihu.com/".concat(j?"org":"people","/").concat(y):null,k=Object(r.e)(c.f,{loading:"lazy",src:h(O,l),srcSet:"".concat(h(O,2*l)," 2x"),size:l,display:"block",css:f});return Object(r.e)(c.a,Object(a.default)({display:"inline-block",size:l,css:b},g),C?Object(r.e)(s.a,Object(a.default)({href:C,target:"_blank"},v),k):k,!d&&Object(r.e)(i.c,{css:Object(i.f)(l),isOrg:j,badge:t.badgeV2||t.badge,linkify:!m,enableTooltip:!0}))}},984:function(e,t,n){},985:function(e,t,n){},986:function(e,t,n){},987:function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return l}),n.d(t,"d",function(){return u}),n.d(t,"c",function(){return d});var a=n(2),o=n(11),r=n(14),i=n(5),c=Object(i.a)("club",["GET","JOIN","LEAVE","UPDATE","REQUEST_JOIN"]),s=function(e){return{API:{types:c.GET,method:"GET",endpoint:"clubs/".concat(e),fetchOptions:{credentials:"include"}},schema:r.a.CLUB,meta:{id:e}}},l=function(e){return function(t){return t({API:{types:c.JOIN,method:"POST",endpoint:"clubs/".concat(e,"/join"),fetchOptions:{credentials:"include"}},meta:{id:e}}).then(function(){return t(s(e))})}},u=function(e,t){return function(n){return n({API:{types:c.REQUEST_JOIN,method:"POST",endpoint:"clubs/".concat(e,"/join_requests"),fetchOptions:{zsEncrypt:!0},body:Object(o.decamelizeKeys)({requestDetail:t})}}).then(function(){return n(s(e))})}},d=function(e){return function(t,n){var o=n().entities.clubs[e],r=o.joinCount,i=o.isJoined,l=o.loginMask;return t({API:{types:c.LEAVE,method:"DELETE",endpoint:"clubs/".concat(e,"/join"),fetchOptions:{credentials:"include"}},UPDATE:{request:{clubs:Object(a.a)({},e,Object.assign({isJoined:!1},r&&{joinCount:r-1}))},failure:{clubs:Object(a.a)({},e,Object.assign({isJoined:i,loginMask:l},r&&{joinCount:r}))}},meta:{id:e}}).then(function(){return t(s(e))})}}},989:function(e,t,n){"use strict";n.d(t,"b",function(){return _});var a=n(6),o=n(10),r=n(9),i=n(7),c=n(8),s=n(26),l=n(29),u=n.n(l),d=n(32),p=n.n(d),h=n(1),f=n.n(h),b=n(3),m=n.n(b),v=n(17),g=function(e){return f.a.createElement(v.a,e,f.a.createElement("path",{d:"M11.991 3C7.023 3 3 7.032 3 12s4.023 9 8.991 9C16.968 21 21 16.968 21 12s-4.032-9-9.009-9zm6.237 5.4h-2.655a14.084 14.084 0 0 0-1.242-3.204A7.227 7.227 0 0 1 18.228 8.4zM12 4.836A12.678 12.678 0 0 1 13.719 8.4h-3.438A12.678 12.678 0 0 1 12 4.836zM5.034 13.8A7.418 7.418 0 0 1 4.8 12c0-.621.09-1.224.234-1.8h3.042A14.864 14.864 0 0 0 7.95 12c0 .612.054 1.206.126 1.8H5.034zm.738 1.8h2.655a14.084 14.084 0 0 0 1.242 3.204A7.188 7.188 0 0 1 5.772 15.6zm2.655-7.2H5.772a7.188 7.188 0 0 1 3.897-3.204c-.54.999-.954 2.079-1.242 3.204zM12 19.164a12.678 12.678 0 0 1-1.719-3.564h3.438A12.678 12.678 0 0 1 12 19.164zm2.106-5.364H9.894A13.242 13.242 0 0 1 9.75 12c0-.612.063-1.215.144-1.8h4.212c.081.585.144 1.188.144 1.8 0 .612-.063 1.206-.144 1.8zm.225 5.004c.54-.999.954-2.079 1.242-3.204h2.655a7.227 7.227 0 0 1-3.897 3.204zm1.593-5.004c.072-.594.126-1.188.126-1.8 0-.612-.054-1.206-.126-1.8h3.042c.144.576.234 1.179.234 1.8s-.09 1.224-.234 1.8h-3.042z"}))};g.defaultProps={name:"Browser"};var O=g,j=n(851),y=n(857),C=n(13),k=n.n(C),w=n(81),N=n.n(w),S=n(198),x=n(915),T=[{id:"4",url:"https://m.yaochufa.com/d_142935?payChannel=5df72913c00a7",banner:"https://pic4.zhimg.com/80/v2-ea9684815413107f1847bc1f198711c3.jpg",name:"融创雪世界，畅享冰雪狂欢",priceText:"¥180 起",province:"广东",city:"广州",source:"要出发",type:"门票"},{id:"7",url:"https://m.yaochufa.com/d_131732?payChannel=5df72913c00a7",banner:"https://pic3.zhimg.com/80/v2-9a8bbc609b0d170b888eede800041676.jpg",name:"长隆香江酒店（野生动物世界店）",priceText:"¥666 起",province:"广东",city:"广州",source:"要出发",type:"酒景套餐"},{id:"8",url:"https://m.yaochufa.com/d_179094?payChannel=5df72913c00a7",banner:"https://pic3.zhimg.com/80/v2-ed46b402a13c20e13ce50bace5b4fe1a.jpg",name:"北京欢乐谷",priceText:"¥66.6 起",province:"北京",city:"北京",source:"要出发",type:"门票"},{id:"11",url:"https://m.yaochufa.com/d_25830?payChannel=5df72913c00a7",banner:"https://pic2.zhimg.com/80/v2-3da17340263451c52311f12b252adb2c.png",name:"古北水镇－古北之光温泉度假酒店",priceText:"¥1190 起",province:"北京",city:"北京",source:"要出发",type:"酒景套餐"},{id:"13",url:"https://m.yaochufa.com/d_25600?payChannel=5df72913c00a7",banner:"https://pic1.zhimg.com/80/v2-7a2fbc319c89b875ad25fed75222f358.jpg",name:"北京 古北水镇-梨园客栈，京剧往事",priceText:"¥540 起",province:"北京",city:"北京",source:"要出发",type:"酒景套餐"},{id:"17",url:"https://m.yaochufa.com/d_177004?payChannel=5df72913c00a7",banner:"https://pic2.zhimg.com/80/v2-5a410355e749b9bee787883b4dd3d861.jpg",name:"上海野生动物园",priceText:"¥65 起",province:"上海",city:"上海",source:"要出发",type:"门票"},{id:"19",url:"https://m.yaochufa.com/d_23067?payChannel=5df72913c00a7",banner:"https://pic3.zhimg.com/80/v2-73fe1fe0945a3cde3fd62539f2a811b2.jpg",name:"上海迪士尼乐园酒店",priceText:"¥1505 起",province:"上海",city:"上海",source:"要出发",type:"酒景套餐"},{id:"23",url:"https://m.yaochufa.com/d_19258?payChannel=5df72913c00a7",banner:"https://pic4.zhimg.com/80/v2-9964b6bf9b1bb8c4c04e366b23532dc7.jpg",name:"横店圆明新园，重现百年辉煌历史",priceText:"¥160 起",province:"浙江",city:"金华",source:"要出发",type:"门票"},{id:"26",url:"https://m.yaochufa.com/d_12373?payChannel=5df72913c00a7",banner:"https://pic3.zhimg.com/80/v2-7bd5e8d2c164058627e4d703de7dd4fe.jpg",name:"宋城千古情景区，宋文化主题游",priceText:"¥290 起",province:"浙江",city:"杭州",source:"要出发",type:"门票"},{id:"34",url:"https://m.yaochufa.com/d_14155?payChannel=5df72913c00a7",banner:"https://pic3.zhimg.com/80/v2-5de0708096f517c04df8e25b73fae3a2.jpg",name:"环球恐龙城恐龙主题度假酒店",priceText:"¥519 起",province:"江苏",city:"常州",source:"要出发",type:"酒景套餐"}];var I=n(36),E=(n(1006),n(0)),L=function(e){return Object(E.e)("div",e,Object(E.e)("span",null),Object(E.e)("span",null))},P=function(e){var t=N()(e,["entityType","entityData"]),n=t.target,a=t.url,o=t.image,r=t.imageWidth,i=t.imageHeight,c=t.component,s=t.size,l=t.className,d=p()(t,["target","url","image","imageWidth","imageHeight","component","size","className"]);return Object(E.e)(c,u()({target:n,href:a,"data-draft-node":"block","data-draft-type":"link-card","data-image":o},r&&{"data-image-width":r},i&&{"data-image-height":i},s&&{"data-size":s},{className:k()("LinkCard",l)},d),Object(E.e)("span",{className:"LinkCard-content LinkCard-ecommerceLoadingCard"},Object(E.e)("div",{className:"LinkCard-ecommerceLoadingCardAvatarWrapper"},Object(E.e)("img",{src:"https://pic2.zhimg.com/v2-1b0bbef27f0496a58468f92d94c8a80e_l.png",className:"LinkCard-ecommerceLoadingCardNetwork"})),Object(E.e)(L,{className:"LinkCard-ecommerceLoadingCardLoadingbar"})))},A=(n(1007),function(){return Object(E.e)("div",{className:"LinkCard-image LinkCard-image--default"},Object(E.e)(O,{size:32}))}),M=/^https?:\/\/link\.zhihu\.com/,R=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e;if(M.test(e)){var n=e.match(/target=([^=]+)/)||[],a=Object(s.a)(n,2),o=a[1];o&&(t=decodeURIComponent(o))}var r=t.split("/"),i=Object(s.a)(r,3),c=i[2];return c||""},_=function(e){var t=R(e);return"zhihu.com"===t||t.endsWith(".zhihu.com")},z=function(e){function t(){return Object(a.a)(this,t),Object(r.a)(this,Object(i.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(o.a)(t,[{key:"renderLinkMeta",value:function(){var e=this.props,t=e.url,n=e.entityType,a=e.entityData,o=R(t);if(n&&a&&"job"===n){var r=a.salary,i=a.city,c=a.location,s=a.seniority,l=a.education;return Object(E.e)("span",{className:"LinkCard-meta"},Object(E.e)("span",{className:"LinkCard-textMeta"},s&&Object(E.e)("span",{className:"LinkCard-metaItem"},s),l&&Object(E.e)("span",{className:"LinkCard-metaItem"},l),(i||c)&&Object(E.e)("span",{className:"LinkCard-metaItem"},i,Object(E.e)("span",{className:"LinkCard-metaItem-jobLocation"},c))),r&&Object(E.e)("span",{className:"LinkCard-badge"},r))}return Object(E.e)("span",{className:"LinkCard-meta"},Object(E.e)(j.a,{size:17,center:!0}),o)}},{key:"render",value:function(){var e=N()(this.props,["entityType","entityData"]),t=e.text,n=e.target,a=e.url,o=e.image,r=e.imageWidth,i=e.imageHeight,c=e.component,s=e.className,l=e.size,d=p()(e,["text","target","url","image","imageWidth","imageHeight","component","className","size"]);if(function(e){var t;return"ECOMMERCE"===Object(I.parse)(null===(t=e.split("?"))||void 0===t?void 0:t[1]).BIZ}(a))return Object(E.e)(P,this.props);var h=function(e){try{return T.find(function(t){return decodeURIComponent(e).includes(t.url)})}catch(e){return null}}(a);if(h){var f=h.name,b=h.url,m=h.banner,v=h.source,g=h.type,O=h.priceText,j=h.province,C=h.city;return Object(E.e)(c,u()({target:n,href:b,"data-draft-node":"block","data-draft-type":"link-card","data-image":m,"data-image-width":"","data-image-height":"",className:k()("LinkCard","TravelMVPLinkCard",s)},d),Object(E.e)("div",{className:"TravelMVPLinkCard-main"},Object(E.e)("div",{className:"TravelMVPLinkCard-banner"},Object(E.e)("img",{src:Object(S.imgUrl)(m,"xll"),alt:"商品图片"})),Object(E.e)("div",{className:"TravelMVPLinkCard-core"},Object(E.e)("div",{className:"TravelMVPLinkCard-info"},Object(E.e)("div",{className:"TravelMVPLinkCard-name"},f),Object(E.e)("div",{className:"TravelMVPLinkCard-tags"},v," · ",g)),Object(E.e)("div",{className:"TravelMVPLinkCard-priceArea"},Object(E.e)("div",{className:"TravelMVPLinkCard-priceText"},O),Object(E.e)("div",{role:"button",className:"TravelMVPLinkCard-buyButton"},"去购买",Object(E.e)(y.a,{size:18,center:!0}))),Object(E.e)("div",{className:"TravelMVPLinkCard-location"},Object(E.e)(x.a,{width:"12",height:"12"}),!["北京","上海"].includes(j)&&Object(E.e)("span",{className:"TravelMVPLinkCard-locationTag"},j),Object(E.e)("span",{className:"TravelMVPLinkCard-locationTag"},C)))))}var w=function(e,t){if(e>0&&t>0){var n=e/t;if(n>1.2)return{modifier:"horizontal",size:"180x120"};if(n<=.8)return{modifier:"vertical",size:"120x160"}}return{modifier:"square",size:"ipico"}}(r,i),L=w.modifier,M=w.size,R=!o&&_(a)?"https://zhstatic.zhihu.com/assets/zhihu/editor/zhihu-card-default.svg":Object(S.imgUrl)(o,M);return Object(E.e)(c,u()({target:n,href:a,"data-draft-node":"block","data-draft-type":"link-card"},R&&{"data-image":R},r&&{"data-image-width":r},i&&{"data-image-height":i},l&&{"data-size":l},{className:k()("LinkCard",s,{"LinkCard--hasImage":Boolean(R),"LinkCard--noImage":!R})},d),R&&Object(E.e)("span",{className:"LinkCard-backdrop",style:{backgroundImage:"url(".concat(R,")")}}),Object(E.e)("span",{className:"LinkCard-content"},Object(E.e)("span",{className:"LinkCard-text"},Object(E.e)("span",{className:"LinkCard-title","data-text":!0},t),this.renderLinkMeta()),Object(E.e)("span",{className:"LinkCard-imageCell"},R?Object(E.e)("img",{className:k()("LinkCard-image","LinkCard-image--".concat(L)),alt:"图标",src:R}):Object(E.e)(A,null))))}}]),t}(f.a.Component);z.propTypes={component:m.a.oneOfType([m.a.string,m.a.func]),target:m.a.string,url:m.a.string.isRequired,text:m.a.string.isRequired,image:m.a.string,imageWidth:m.a.oneOfType([m.a.string,m.a.number]),imageHeight:m.a.oneOfType([m.a.string,m.a.number])},z.defaultProps={component:"a",target:"_blank"};t.a=z},990:function(e,t,n){"use strict";n.d(t,"a",function(){return i});n(1);var a=n(13),o=n.n(a),r=(n(1114),n(0)),i=function(e){var t=e.avatar,n=e.bottom,a=e.button,i=e.className,c=e.height,s=e.icon,l=e.inline,u=e.right,d=e.style,p=void 0===d?{}:d,h=e.title,f=e.width,b=Object.assign({},p);return f&&(b.width="".concat(f,"px")),c&&(b.height="".concat(c,"px")),n&&(b.marginBottom="".concat(n,"px")),u&&(b.marginRight="".concat(u,"px")),Object(r.e)("div",{className:o()("Holder",i,{"Holder--inline":l,"Holder--title":h,"Holder--icon":s,"Holder--button":a,"Holder--avatar":t}),style:b})}},991:function(e,t,n){"use strict";n(1);var a=n(13),o=n.n(a),r=n(0),i=[{extensionList:["doc","docx","txt"],type:"doc"},{extensionList:["jpg","jpeg","png","bmp"],type:"image"},{extensionList:["mp3","aac"],type:"music"},{extensionList:["pdf"],type:"pdf"},{extensionList:["xls","xlsx","csv"],type:"table"},{extensionList:["torrent"],type:"torrent"},{extensionList:["mp4","flv"],type:"video"},{extensionList:["zip","rar","7z"],type:"zip"},{extensionList:[""],type:"folder"}];t.a=function(e){var t=e.className,n=e.isDirectory,a=void 0!==n&&n,c=e.extension,s=function(e){return"https://zhstatic.zhihu.com/assets/zhihu-components/file-icon/zhimg_answer_editor_file_".concat(e,".svg")}(a?"folder":function(e){var t=i.find(function(t){return t.extensionList.includes(e)});return t?t.type:"other"}(c));return Object(r.e)("img",{className:o()("FileExtensionIcon",t),src:s})}},992:function(e,t,n){"use strict";var a=n(26),o=n(29),r=n.n(o),i=n(32),c=n.n(i),s=n(1),l=n.n(s),u=n(13),d=n.n(u),p=n(20),h=n(299),f=n.n(h),b=n(11),m=n(862),v=n(163),g=n(222),O=n(168),j=n(880),y=n(922),C=n(882),k=(n(1012),n(0));function w(e){var t=String(e);return t.length<2&&(t="0"+t),t}function N(e){var t=Object(s.useRef)(null),n=e.component,a=void 0===n?"a":n,o=e.className,r=e.onClick,i=e.onMouseDown,c=e.zvideo,u=e.enableInlinePlay,h=void 0!==u&&u,b=e.onImageClick,j=void 0===b?f.a:b,N=e.onInfoClick,x=void 0===N?f.a:N,T=c.id,I=c.title,E=c.url,L=c.imageUrl,P=c.video,A=P.videoId,M=P.duration,R=P.status,_=c.author,z=c.playCount,B=!E?"inlinezvideo":"zvideo";Object(s.useEffect)(function(){Object(m.onViewedOnce)(t.current,function(){p.a.trackCardShow(t.current,{id:7844},{button:{text:B}})})},[B]);var D=Object(s.useCallback)(function(e){p.a.trackEvent(e.target,{id:7846,action:"OpenUrl"},{button:{text:B}}),j(e,c)},[j,c,B]),V=Object(s.useCallback)(function(e){p.a.trackEvent(e.target,{id:7847,action:"OpenUrl"},{button:{text:B}}),x(e,c)},[x,c,B]);return"converting_failure"===R?Object(k.e)(S,{error:"视频转码失败，请重新上传视频"}):Object(k.e)(l.a.Fragment,null,Object(k.e)(g.c,{as:a,shouldTrackClick:!0,shouldTrackShow:!0,zaAction:"OpenUrl",zaEventType:"Click",zaBlock:"ZTextZVideoLinkCard",zaType:"Button",extra:{link:{url:E}},className:d()("ZVideoLinkCard",o),ref:t,href:E,target:"_blank",rel:"noopener noreferrer",onClick:r,onMouseDown:i,"data-za-not-track-link":!0,"data-za-module":"Content","data-za-module-info":JSON.stringify({card:{content:{type:"Zvideo",token:T,video_id:A}}})},h?Object(k.e)(y.a,{placeholder:Object(k.e)("div",{className:"ZVideoLinkCard-playerContainer"})},Object(k.e)("div",{className:"ZVideoLinkCard-playerContainer"},Object(k.e)("iframe",{className:"ZVideoLinkCard-player",frameBorder:0,allowFullScreen:!0,src:"https://www.zhihu.com/video/".concat(A)}))):Object(k.e)("div",{className:"ZVideoLinkCard-image",style:{backgroundImage:"url(".concat(L,")")},onClick:D},Object(k.e)(C.a,{className:"ZVideoLinkCard-playIcon"}),Boolean(M)&&Object(k.e)("div",{className:"ZVideoLinkCard-duration"},function(e){if(!Number.isFinite(e))return"";var t=(e=Math.floor(e))%60,n=Math.floor(e/60);return"".concat(w(n),":").concat(w(t))}(M))),Object(k.e)("div",{className:"ZVideoLinkCard-info",onClick:V},Object(k.e)("div",{className:"ZVideoLinkCard-title"},I),Boolean(E)&&Object(k.e)("div",{className:"ZVideoLinkCard-author"},Object(k.e)(O.a,{className:"ZVideoLinkCard-avatar",url:_.avatarUrl,alt:"",size:20,round:!0}),Object(k.e)("div",null,_.name,"的视频"),Boolean(z)&&Object(k.e)("div",null," · ",Object(v.cnNiceNumber)(z),"播放")))))}function S(e){var t=e.error;return Object(k.e)("div",{className:"ZVideoLinkErrorCard"},Object(k.e)("div",{className:"ZVideoLinkErrorCard-message"},t.message||"视频加载错误"))}t.a=function(e){var t=e.id,n=c()(e,["id"]),o=Object(s.useState)(null),i=Object(a.a)(o,2),l=i[0],u=i[1],d=Object(s.useState)(null),p=Object(a.a)(d,2),h=p[0],f=p[1];return Object(s.useEffect)(function(){var e="https://www.zhihu.com/api/v4/zvideos/".concat(t,"/card");Object(j.a)(e).then(function(e){return Object(b.camelizeKeys)(e)}).then(function(e){e.error?f(e.error):u(e)}).catch(function(e){f(e)})},[t]),h?Object(k.e)(S,{error:h}):l?Object(k.e)(N,r()({zvideo:l},n)):null}},993:function(e,t,n){"use strict";t.a=function(e){return Array.isArray(e)?e.length:0}},995:function(e,t,n){},996:function(e,t,n){"use strict";
/*!
 * bytes
 * Copyright(c) 2012-2014 TJ Holowaychuk
 * Copyright(c) 2015 Jed Watson
 * MIT Licensed
 */e.exports=function(e,t){if("string"==typeof e)return s(e);if("number"==typeof e)return c(e,t);return null},e.exports.format=c,e.exports.parse=s;var a=/\B(?=(\d{3})+(?!\d))/g,o=/(?:\.0*|(\.[^0]+)0+)$/,r={b:1,kb:1024,mb:1<<20,gb:1<<30,tb:Math.pow(1024,4),pb:Math.pow(1024,5)},i=/^((-|\+)?(\d+(?:\.\d+)?)) *(kb|mb|gb|tb|pb)$/i;function c(e,t){if(!Number.isFinite(e))return null;var n=Math.abs(e),i=t&&t.thousandsSeparator||"",c=t&&t.unitSeparator||"",s=t&&void 0!==t.decimalPlaces?t.decimalPlaces:2,l=Boolean(t&&t.fixedDecimals),u=t&&t.unit||"";u&&r[u.toLowerCase()]||(u=n>=r.pb?"PB":n>=r.tb?"TB":n>=r.gb?"GB":n>=r.mb?"MB":n>=r.kb?"KB":"B");var d=(e/r[u.toLowerCase()]).toFixed(s);return l||(d=d.replace(o,"$1")),i&&(d=d.replace(a,i)),d+c+u}function s(e){if("number"==typeof e&&!isNaN(e))return e;if("string"!=typeof e)return null;var t,n=i.exec(e),a="b";return n?(t=parseFloat(n[1]),a=n[4].toLowerCase()):(t=parseInt(e,10),a="b"),Math.floor(r[a]*t)}},997:function(e,t,n){},998:function(e,t,n){},999:function(e,t,n){var a=n(564),o=a&&new a;e.exports=o}}]);
//# sourceMappingURL=main.search-routes.a211cfa5ee8f36fd01ac.js.map